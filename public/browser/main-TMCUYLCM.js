var Kk=Object.defineProperty,Qk=Object.defineProperties;var Yk=Object.getOwnPropertyDescriptors;var _u=Object.getOwnPropertySymbols,Jk=Object.getPrototypeOf,RC=Object.prototype.hasOwnProperty,NC=Object.prototype.propertyIsEnumerable,Zk=Reflect.get;var AC=(t,e,n)=>e in t?Kk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})RC.call(e,n)&&AC(t,n,e[n]);if(_u)for(var n of _u(e))NC.call(e,n)&&AC(t,n,e[n]);return t},le=(t,e)=>Qk(t,Yk(e));var MC=(t,e)=>{var n={};for(var r in t)RC.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&_u)for(var r of _u(t))e.indexOf(r)<0&&NC.call(t,r)&&(n[r]=t[r]);return n};var $r=(t,e,n)=>Zk(Jk(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var PC=null;var tm=1,nm=Symbol("SIGNAL");function ge(t){let e=PC;return PC=t,e}var xC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xk(t){if(!(sm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tm)){if(!t.producerMustRecompute(t)&&!rm(t)){t.dirty=!1,t.lastCleanEpoch=tm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=tm}}function OC(t){return t&&(t.nextProducerIndex=0),ge(t)}function kC(t,e){if(ge(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(sm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)im(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rm(t){vu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Xk(n),r!==n.version))return!0}return!1}function FC(t){if(vu(t),sm(t))for(let e=0;e<t.producerNode.length;e++)im(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function im(t,e){if(e1(t),vu(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)im(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];vu(i),i.producerIndexOfThis[r]=e}}function sm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function vu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function e1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function t1(){throw new Error}var n1=t1;function LC(t){n1=t}function z(t){return typeof t=="function"}function Ks(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wu=Ks(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Si(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Be=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(s){e=s instanceof wu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{VC(s)}catch(o){e=e??[],o instanceof wu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)VC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Si(n,e)}remove(e){let{_finalizers:n}=this;n&&Si(n,e),e instanceof t&&e._removeParent(this)}};Be.EMPTY=(()=>{let t=new Be;return t.closed=!0,t})();var om=Be.EMPTY;function Eu(t){return t instanceof Be||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function VC(t){z(t)?t():t.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qs={setTimeout(t,e,...n){let{delegate:r}=Qs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Qs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Iu(t){Qs.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(t);else throw t})}function za(){}var UC=am("C",void 0,void 0);function jC(t){return am("E",void 0,t)}function BC(t){return am("N",t,void 0)}function am(t,e,n){return{kind:t,value:e,error:n}}var Ai=null;function Ys(t){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Ai;if(e&&(Ai={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ai;if(Ai=null,n)throw r}}else t()}function $C(t){fn.useDeprecatedSynchronousErrorHandling&&Ai&&(Ai.errorThrown=!0,Ai.error=t)}var Ri=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Eu(e)&&e.add(this)):this.destination=s1}static create(e,n,r){return new Js(e,n,r)}next(e){this.isStopped?lm(BC(e),this):this._next(e)}error(e){this.isStopped?lm(jC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lm(UC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},r1=Function.prototype.bind;function cm(t,e){return r1.call(t,e)}var um=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Tu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Tu(r)}else Tu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Tu(n)}}},Js=class extends Ri{constructor(e,n,r){super();let i;if(z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&fn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cm(e.next,s),error:e.error&&cm(e.error,s),complete:e.complete&&cm(e.complete,s)}):i=e}this.destination=new um(i)}};function Tu(t){fn.useDeprecatedSynchronousErrorHandling?$C(t):Iu(t)}function i1(t){throw t}function lm(t,e){let{onStoppedNotification:n}=fn;n&&Qs.setTimeout(()=>n(t,e))}var s1={closed:!0,next:za,error:i1,complete:za};var Zs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Bt(t){return t}function Cu(...t){return dm(t)}function dm(t){return t.length===0?Bt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=a1(n)?n:new Js(n,r,i);return Ys(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=HC(r),new r((i,s)=>{let o=new Js({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Zs](){return this}pipe(...n){return dm(n)(this)}toPromise(n){return n=HC(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function HC(t){var e;return(e=t??fn.Promise)!==null&&e!==void 0?e:Promise}function o1(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}function a1(t){return t&&t instanceof Ri||o1(t)&&Eu(t)}function hm(t){return z(t?.lift)}function ue(t){return e=>{if(hm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(t,e,n,r,i){return new fm(t,e,n,r,i)}var fm=class extends Ri{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xs(){return ue((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var eo=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return Xs()(this)}};var qC=Ks(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Du(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new qC}next(n){Ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?om:(this.currentObservers=null,s.push(n),new Be(()=>{this.currentObservers=null,Si(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Du(e,n),t})(),Du=class extends xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:om}};var lt=class extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var pm={now(){return(pm.delegate||Date).now()},delegate:void 0};var bu=class extends Be{constructor(e,n){super()}schedule(e,n=0){return this}};var Ga={setInterval(t,e,...n){let{delegate:r}=Ga;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ga;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var to=class extends bu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ga.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ga.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Si(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var no=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};no.now=pm.now;var ro=class extends no{constructor(e,n=no.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var mm=new ro(to);var Su=class extends to{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Au=class extends ro{};var gm=new Au(Su);var $t=new ne(t=>t.complete());function zC(t){return t&&z(t.schedule)}function GC(t){return t[t.length-1]}function Ru(t){return z(GC(t))?t.pop():void 0}function Hr(t){return zC(GC(t))?t.pop():void 0}function ym(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function KC(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function WC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ni(t){return this instanceof Ni?(this.v=t,this):new Ni(t)}function QC(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(m,g){s.push([h,f,m,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(m){d(s[0][3],m)}}function c(h){h.value instanceof Ni?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function YC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof WC=="function"?WC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Nu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Mu(t){return z(t?.then)}function Pu(t){return z(t[Zs])}function xu(t){return Symbol.asyncIterator&&z(t?.[Symbol.asyncIterator])}function Ou(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function c1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ku=c1();function Fu(t){return z(t?.[ku])}function Lu(t){return QC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ni(n.read());if(i)return yield Ni(void 0);yield yield Ni(r)}}finally{n.releaseLock()}})}function Vu(t){return z(t?.getReader)}function Ge(t){if(t instanceof ne)return t;if(t!=null){if(Pu(t))return l1(t);if(Nu(t))return u1(t);if(Mu(t))return d1(t);if(xu(t))return JC(t);if(Fu(t))return h1(t);if(Vu(t))return f1(t)}throw Ou(t)}function l1(t){return new ne(e=>{let n=t[Zs]();if(z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function u1(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function d1(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Iu)})}function h1(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function JC(t){return new ne(e=>{p1(t,e).catch(n=>e.error(n))})}function f1(t){return JC(Lu(t))}function p1(t,e){var n,r,i,s;return KC(this,void 0,void 0,function*(){try{for(n=YC(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function xt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function qr(t,e=0){return ue((n,r)=>{n.subscribe(re(r,i=>xt(r,t,()=>r.next(i),e),()=>xt(r,t,()=>r.complete(),e),i=>xt(r,t,()=>r.error(i),e)))})}function zr(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function ZC(t,e){return Ge(t).pipe(zr(e),qr(e))}function XC(t,e){return Ge(t).pipe(zr(e),qr(e))}function eD(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function tD(t,e){return new ne(n=>{let r;return xt(n,e,()=>{r=t[ku](),xt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function Uu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{xt(n,e,()=>{let r=t[Symbol.asyncIterator]();xt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function nD(t,e){return Uu(Lu(t),e)}function rD(t,e){if(t!=null){if(Pu(t))return ZC(t,e);if(Nu(t))return eD(t,e);if(Mu(t))return XC(t,e);if(xu(t))return Uu(t,e);if(Fu(t))return tD(t,e);if(Vu(t))return nD(t,e)}throw Ou(t)}function ke(t,e){return e?rD(t,e):Ge(t)}function W(...t){let e=Hr(t);return ke(t,e)}function io(t,e){let n=z(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function _m(t){return!!t&&(t instanceof ne||z(t.lift)&&z(t.subscribe))}var dr=Ks(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(t,e){return ue((n,r)=>{let i=0;n.subscribe(re(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:m1}=Array;function g1(t,e){return m1(e)?t(...e):t(e)}function ju(t){return Z(e=>g1(t,e))}var{isArray:y1}=Array,{getPrototypeOf:_1,prototype:v1,keys:w1}=Object;function Bu(t){if(t.length===1){let e=t[0];if(y1(e))return{args:e,keys:null};if(E1(e)){let n=w1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function E1(t){return t&&typeof t=="object"&&_1(t)===v1}function $u(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Hu(...t){let e=Hr(t),n=Ru(t),{args:r,keys:i}=Bu(t);if(r.length===0)return ke([],e);let s=new ne(I1(r,e,i?o=>$u(i,o):Bt));return n?s.pipe(ju(n)):s}function I1(t,e,n=Bt){return r=>{iD(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)iD(e,()=>{let l=ke(t[c],e),u=!1;l.subscribe(re(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function iD(t,e,n){t?xt(n,t,e):e()}function sD(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<r?m(g):c.push(g),m=g=>{s&&e.next(g),l++;let y=!1;Ge(n(g,u++)).subscribe(re(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let v=c.shift();o?xt(e,o,()=>m(v)):m(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(re(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Qe(t,e,n=1/0){return z(e)?Qe((r,i)=>Z((s,o)=>e(r,s,i,o))(Ge(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>sD(r,i,t,n)))}function vm(t=1/0){return Qe(Bt,t)}function oD(){return vm(1)}function so(...t){return oD()(ke(t,Hr(t)))}function qu(t){return new ne(e=>{Ge(t()).subscribe(e)})}function wm(...t){let e=Ru(t),{args:n,keys:r}=Bu(t),i=new ne(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Ge(n[u]).subscribe(re(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?$u(r,a):a),s.complete())}))}});return e?i.pipe(ju(e)):i}function Xt(t,e){return ue((n,r)=>{let i=0;n.subscribe(re(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Gr(t){return ue((e,n)=>{let r=null,i=!1,s;r=e.subscribe(re(n,void 0,void 0,o=>{s=Ge(t(o,Gr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function aD(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(re(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function oo(t,e){return z(e)?Qe(t,e,1):Qe(t,1)}function Wr(t){return ue((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function hr(t){return t<=0?()=>$t:ue((e,n)=>{let r=0;e.subscribe(re(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Em(t){return Z(()=>t)}function zu(t=T1){return ue((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function T1(){return new dr}function Wa(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function On(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,s)=>t(i,s,r)):Bt,hr(1),n?Wr(e):zu(()=>new dr))}function ao(t){return t<=0?()=>$t:ue((e,n)=>{let r=[];e.subscribe(re(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Im(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,s)=>t(i,s,r)):Bt,ao(1),n?Wr(e):zu(()=>new dr))}function Gu(t,e){return ue(aD(t,e,arguments.length>=2,!0))}function Wu(...t){let e=Hr(t);return ue((n,r)=>{(e?so(t,n,e):so(t,n)).subscribe(r)})}function pn(t,e){return ue((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(re(r,c=>{i?.unsubscribe();let l=0,u=s++;Ge(t(c,u)).subscribe(i=re(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Tm(t){return ue((e,n)=>{Ge(t).subscribe(re(n,()=>n.complete(),za)),!n.closed&&e.subscribe(n)})}function Ye(t,e,n){let r=z(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(re(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Bt}var GD="https://g.co/ng/security#xss",E=class extends Error{constructor(e,n){super(Rg(e,n)),this.code=e}};function Rg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function oc(t){return{toString:t}.toString()}var Ku="__parameters__";function C1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function D1(t,e,n){return oc(()=>{let r=C1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Ku)?c[Ku]:Object.defineProperty(c,Ku,{value:[]})[Ku];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var fr=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function b1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Nt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Nt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Um(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var S1=Te({__forward_ref__:Te});function ac(t){return t.__forward_ref__=ac,t.toString=function(){return Nt(this())},t}function At(t){return WD(t)?t():t}function WD(t){return typeof t=="function"&&t.hasOwnProperty(S1)&&t.__forward_ref__===ac}function P(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ut(t){return{providers:t.providers||[],imports:t.imports||[]}}function Td(t){return cD(t,QD)||cD(t,YD)}function KD(t){return Td(t)!==null}function cD(t,e){return t.hasOwnProperty(e)?t[e]:null}function A1(t){let e=t&&(t[QD]||t[YD]);return e||null}function lD(t){return t&&(t.hasOwnProperty(uD)||t.hasOwnProperty(R1))?t[uD]:null}var QD=Te({\u0275prov:Te}),uD=Te({\u0275inj:Te}),YD=Te({ngInjectableDef:Te}),R1=Te({ngInjectorDef:Te}),F=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function JD(t){return t&&!!t.\u0275providers}var N1=Te({\u0275cmp:Te}),M1=Te({\u0275dir:Te}),P1=Te({\u0275pipe:Te}),x1=Te({\u0275mod:Te}),sd=Te({\u0275fac:Te}),Ka=Te({__NG_ELEMENT_ID__:Te}),dD=Te({__NG_ENV_ID__:Te});function Cd(t){return typeof t=="string"?t:t==null?"":String(t)}function O1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Cd(t)}function k1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new E(-200,t)}function Ng(t,e){throw new E(-201,!1)}var X=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(X||{}),jm;function ZD(){return jm}function en(t){let e=jm;return jm=t,e}function XD(t,e,n){let r=Td(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&X.Optional)return null;if(e!==void 0)return e;Ng(t,"Injector")}var F1={},Qa=F1,Bm="__NG_DI_FLAG__",od="ngTempTokenPath",L1="ngTokenPath",V1=/\n/gm,U1="\u0275",hD="__source",ho;function j1(){return ho}function Kr(t){let e=ho;return ho=t,e}function B1(t,e=X.Default){if(ho===void 0)throw new E(-203,!1);return ho===null?XD(t,void 0,e):ho.get(t,e&X.Optional?null:void 0,e)}function x(t,e=X.Default){return(ZD()||B1)(At(t),e)}function b(t,e=X.Default){return x(t,Dd(e))}function Dd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function $m(t){let e=[];for(let n=0;n<t.length;n++){let r=At(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,s=X.Default;for(let o=0;o<r.length;o++){let a=r[o],c=H1(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(x(i,s))}else e.push(x(r))}return e}function $1(t,e){return t[Bm]=e,t.prototype[Bm]=e,t}function H1(t){return t[Bm]}function q1(t,e,n,r){let i=t[od];throw e[hD]&&i.unshift(e[hD]),t.message=z1(`
`+t.message,i,n,r),t[L1]=i,t[od]=null,t}function z1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==U1?t.slice(2):t;let i=Nt(e);if(Array.isArray(e))i=e.map(Nt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Nt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(V1,`
  `)}`}var Je=$1(D1("Optional"),8);function po(t,e){let n=t.hasOwnProperty(sd);return n?t[sd]:null}function Mg(t,e){t.forEach(n=>Array.isArray(n)?Mg(n,e):e(n))}function eb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ad(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function G1(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Pg(t,e,n){let r=cc(t,e);return r>=0?t[r|1]=n:(r=~r,G1(t,r,e,n)),r}function Cm(t,e){let n=cc(t,e);if(n>=0)return t[n|1]}function cc(t,e){return W1(t,e,1)}function W1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var mo={},Ot=[],go=new F(""),tb=new F("",-1),nb=new F(""),cd=class{get(e,n=Qa){if(n===Qa){let r=new Error(`NullInjectorError: No provider for ${Nt(e)}!`);throw r.name="NullInjectorError",r}return n}},rb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(rb||{}),Ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ln||{}),nn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(nn||{});function K1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Hm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Y1(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Q1(t){return t===3||t===4||t===6}function Y1(t){return t.charCodeAt(0)===64}function Ya(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?fD(t,n,i,null,e[++r]):fD(t,n,i,null,null))}}return t}function fD(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var ib="ng-template";function J1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&K1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(xg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function xg(t){return t.type===4&&t.value!==ib}function Z1(t,e,n){let r=t.type===4&&!n?ib:t.value;return e===r}function X1(t,e,n){let r=4,i=t.attrs,s=i!==null?nF(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!mn(r)&&!mn(c))return!1;if(o&&mn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Z1(t,c,n)||c===""&&e.length===1){if(mn(r))return!1;o=!0}}else if(r&8){if(i===null||!J1(t,i,c,n)){if(mn(r))return!1;o=!0}}else{let l=e[++a],u=eF(c,i,xg(t),n);if(u===-1){if(mn(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(mn(r))return!1;o=!0}}}}return mn(r)||o}function mn(t){return(t&1)===0}function eF(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return rF(e,t)}function tF(t,e,n=!1){for(let r=0;r<e.length;r++)if(X1(t,e[r],n))return!0;return!1}function nF(t){for(let e=0;e<t.length;e++){let n=t[e];if(Q1(n))return e}return t.length}function rF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function pD(t,e){return t?":not("+e.trim()+")":e}function iF(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!mn(o)&&(e+=pD(s,i),i=""),r=o,s=s||!mn(r);n++}return i!==""&&(e+=pD(s,i)),e}function sF(t){return t.map(iF).join(",")}function oF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!mn(i))break;i=s}r++}return{attrs:e,classes:n}}function $e(t){return oc(()=>{let e=lb(t),n=le(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===rb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ln.Emulated,styles:t.styles||Ot,_:null,schemas:t.schemas||null,tView:null,id:""});ub(n);let r=t.dependencies;return n.directiveDefs=gD(r,!1),n.pipeDefs=gD(r,!0),n.id=lF(n),n})}function aF(t){return xi(t)||sb(t)}function cF(t){return t!==null}function dt(t){return oc(()=>({type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function mD(t,e){if(t==null)return mo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=nn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==nn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function wn(t){return oc(()=>{let e=lb(t);return ub(e),e})}function xi(t){return t[N1]||null}function sb(t){return t[M1]||null}function ob(t){return t[P1]||null}function ab(t){let e=xi(t)||sb(t)||ob(t);return e!==null?e.standalone:!1}function cb(t,e){let n=t[x1]||null;if(!n&&e===!0)throw new Error(`Type ${Nt(t)} does not have '\u0275mod' property.`);return n}function lb(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||mo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mD(t.inputs,e),outputs:mD(t.outputs),debugInfo:null}}function ub(t){t.features?.forEach(e=>e(t))}function gD(t,e){if(!t)return null;let n=e?ob:aF;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(cF)}function lF(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function To(t){return{\u0275providers:t}}function Co(...t){return{\u0275providers:db(!0,t),\u0275fromNgModule:!0}}function db(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Mg(e,o=>{let a=o;qm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hb(i,s),n}function hb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Og(i,s=>{e(s,r)})}}function qm(t,e,n,r){if(t=At(t),!t)return!1;let i=null,s=lD(t),o=!s&&xi(t);if(!s&&!o){let c=t.ngModule;if(s=lD(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)qm(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Mg(s.imports,u=>{qm(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&hb(l,e)}if(!a){let l=po(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ot},i),e({provide:nb,useValue:i,multi:!0},i),e({provide:go,useValue:()=>x(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;Og(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Og(t,e){for(let n of t)JD(n)&&(n=n.\u0275providers),Array.isArray(n)?Og(n,e):e(n)}var uF=Te({provide:String,useValue:Te});function fb(t){return t!==null&&typeof t=="object"&&uF in t}function dF(t){return!!(t&&t.useExisting)}function hF(t){return!!(t&&t.useFactory)}function yo(t){return typeof t=="function"}function fF(t){return!!t.useClass}var bd=new F(""),ed={},pF={},Dm;function kg(){return Dm===void 0&&(Dm=new cd),Dm}var rn=class{},Ja=class extends rn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gm(e,o=>this.processProvider(o)),this.records.set(tb,co(void 0,this)),i.has("environment")&&this.records.set(rn,co(void 0,this));let s=this.records.get(bd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(nb,Ot,X.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Kr(this),r=en(void 0),i;try{return e()}finally{Kr(n),en(r)}}get(e,n=Qa,r=X.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(dD))return e[dD](this);r=Dd(r);let i,s=Kr(this),o=en(void 0);try{if(!(r&X.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=vF(e)&&Td(e);l&&this.injectableDefInScope(l)?c=co(zm(e),ed):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&X.Self?kg():this.parent;return n=r&X.Optional&&n===Qa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[od]=a[od]||[]).unshift(Nt(e)),s)throw a;return q1(a,e,"R3InjectorError",this.source)}else throw a}finally{en(o),Kr(s)}}resolveInjectorInitializers(){let e=ge(null),n=Kr(this),r=en(void 0),i;try{let s=this.get(go,Ot,X.Self);for(let o of s)o()}finally{Kr(n),en(r),ge(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(e){e=At(e);let n=yo(e)?e:At(e&&e.provide),r=gF(e);if(!yo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=co(void 0,ed,!0),i.factory=()=>$m(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ge(null);try{return n.value===ed&&(n.value=pF,n.value=n.factory()),typeof n.value=="object"&&n.value&&_F(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ge(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=At(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zm(t){let e=Td(t),n=e!==null?e.factory:po(t);if(n!==null)return n;if(t instanceof F)throw new E(204,!1);if(t instanceof Function)return mF(t);throw new E(204,!1)}function mF(t){if(t.length>0)throw new E(204,!1);let n=A1(t);return n!==null?()=>n.factory(t):()=>new t}function gF(t){if(fb(t))return co(void 0,t.useValue);{let e=pb(t);return co(e,ed)}}function pb(t,e,n){let r;if(yo(t)){let i=At(t);return po(i)||zm(i)}else if(fb(t))r=()=>At(t.useValue);else if(hF(t))r=()=>t.useFactory(...$m(t.deps||[]));else if(dF(t))r=()=>x(At(t.useExisting));else{let i=At(t&&(t.useClass||t.provide));if(yF(t))r=()=>new i(...$m(t.deps));else return po(i)||zm(i)}return r}function co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yF(t){return!!t.deps}function _F(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function vF(t){return typeof t=="function"||typeof t=="object"&&t instanceof F}function Gm(t,e){for(let n of t)Array.isArray(n)?Gm(n,e):n&&JD(n)?Gm(n.\u0275providers,e):e(n)}function Bi(t,e){t instanceof Ja&&t.assertNotDestroyed();let n,r=Kr(t),i=en(void 0);try{return e()}finally{Kr(r),en(i)}}function wF(){return ZD()!==void 0||j1()!=null}function EF(t){return typeof t=="function"}var jn=0,oe=1,H=2,_t=3,yn=4,En=5,ld=6,Za=7,_n=8,_o=9,vn=10,Fe=11,Xa=12,yD=13,Do=14,Vn=15,Sd=16,lo=17,vo=18,Ad=19,mb=20,Qr=21,bm=22,Oi=23,pr=25,Fg=1;var ki=7,ud=8,dd=9,tn=10,Lg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Lg||{});function Mi(t){return Array.isArray(t)&&typeof t[Fg]=="object"}function wr(t){return Array.isArray(t)&&t[Fg]===!0}function Vg(t){return(t.flags&4)!==0}function Rd(t){return t.componentOffset>-1}function Nd(t){return(t.flags&1)===1}function mr(t){return!!t.template}function IF(t){return(t[H]&512)!==0}var Wm=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function gb(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function bo(){return yb}function yb(t){return t.type.prototype.ngOnChanges&&(t.setInput=CF),TF}bo.ngInherit=!0;function TF(){let t=vb(this),e=t?.current;if(e){let n=t.previous;if(n===mo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function CF(t,e,n,r,i){let s=this.declaredInputs[r],o=vb(t)||DF(t,{previous:mo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Wm(l&&l.currentValue,n,c===mo),gb(t,e,i,n)}var _b="__ngSimpleChanges__";function vb(t){return t[_b]||null}function DF(t,e){return t[_b]=e}var _D=null;var kn=function(t,e,n){_D?.(t,e,n)},bF="svg",SF="math",AF=!1;function RF(){return AF}function Un(t){for(;Array.isArray(t);)t=t[jn];return t}function NF(t){for(;Array.isArray(t);){if(typeof t[Fg]=="object")return t;t=t[jn]}return null}function wb(t,e){return Un(e[t])}function sn(t,e){return Un(e[t.index])}function Eb(t,e){return t.data[e]}function Zr(t,e){let n=e[t];return Mi(n)?n:n[jn]}function Ug(t){return(t[H]&128)===128}function MF(t){return wr(t[_t])}function wo(t,e){return e==null?null:t[e]}function Ib(t){t[lo]=0}function PF(t){t[H]&1024||(t[H]|=1024,Ug(t)&&ec(t))}function xF(t,e){for(;t>0;)e=e[Do],t--;return e}function jg(t){return!!(t[H]&9216||t[Oi]?.dirty)}function Km(t){t[vn].changeDetectionScheduler?.notify(1),jg(t)?ec(t):t[H]&64&&(RF()?(t[H]|=1024,ec(t)):t[vn].changeDetectionScheduler?.notify())}function ec(t){t[vn].changeDetectionScheduler?.notify();let e=tc(t);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!Ug(e)));)e=tc(e)}function Tb(t,e){if((t[H]&256)===256)throw new E(911,!1);t[Qr]===null&&(t[Qr]=[]),t[Qr].push(e)}function OF(t,e){if(t[Qr]===null)return;let n=t[Qr].indexOf(e);n!==-1&&t[Qr].splice(n,1)}function tc(t){let e=t[_t];return wr(e)?e[_t]:e}var ie={lFrame:Pb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function kF(){return ie.lFrame.elementDepthCount}function FF(){ie.lFrame.elementDepthCount++}function LF(){ie.lFrame.elementDepthCount--}function Cb(){return ie.bindingsEnabled}function VF(){return ie.skipHydrationRootTNode!==null}function UF(t){return ie.skipHydrationRootTNode===t}function jF(){ie.skipHydrationRootTNode=null}function Ee(){return ie.lFrame.lView}function ht(){return ie.lFrame.tView}function Bg(t){return ie.lFrame.contextLView=t,t[_n]}function $g(t){return ie.lFrame.contextLView=null,t}function kt(){let t=Db();for(;t!==null&&t.type===64;)t=t.parent;return t}function Db(){return ie.lFrame.currentTNode}function BF(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $i(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function Hg(){return ie.lFrame.isParent}function bb(){ie.lFrame.isParent=!1}function $F(t){return ie.lFrame.bindingIndex=t}function lc(){return ie.lFrame.bindingIndex++}function Sb(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function HF(){return ie.lFrame.inI18n}function qF(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qm(e)}function zF(){return ie.lFrame.currentDirectiveIndex}function Qm(t){ie.lFrame.currentDirectiveIndex=t}function Ab(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Rb(t){ie.lFrame.currentQueryIndex=t}function GF(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[En]:null}function Nb(t,e,n){if(n&X.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&X.Host);)if(i=GF(s),i===null||(s=s[Do],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ie.lFrame=Mb();return r.currentTNode=e,r.lView=t,!0}function qg(t){let e=Mb(),n=t[oe];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Mb(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?Pb(t):e}function Pb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xb(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ob=xb;function zg(){let t=xb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function WF(t){return(ie.lFrame.contextLView=xF(t,ie.lFrame.contextLView))[_n]}function Hi(){return ie.lFrame.selectedIndex}function Fi(t){ie.lFrame.selectedIndex=t}function Md(){let t=ie.lFrame;return Eb(t.tView,t.selectedIndex)}function KF(){return ie.lFrame.currentNamespace}var kb=!0;function Pd(){return kb}function xd(t){kb=t}function QF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=yb(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Od(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function td(t,e,n){Fb(t,e,3,n)}function nd(t,e,n,r){(t[H]&3)===n&&Fb(t,e,n,r)}function Sm(t,e){let n=t[H];(n&3)===e&&(n&=16383,n+=1,t[H]=n)}function Fb(t,e,n,r){let i=r!==void 0?t[lo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[lo]+=65536),(a<s||s==-1)&&(YF(t,n,e,c),t[lo]=(t[lo]&4294901760)+c+2),c++}function vD(t,e){kn(4,t,e);let n=ge(null);try{e.call(t)}finally{ge(n),kn(5,t,e)}}function YF(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[H]>>14<t[lo]>>16&&(t[H]&3)===e&&(t[H]+=16384,vD(a,s)):vD(a,s)}var fo=-1,Li=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function JF(t){return t instanceof Li}function ZF(t){return(t.flags&8)!==0}function XF(t){return(t.flags&16)!==0}function Lb(t){return t!==fo}function hd(t){return t&32767}function eL(t){return t>>16}function fd(t,e){let n=eL(t),r=e;for(;n>0;)r=r[Do],n--;return r}var Ym=!0;function wD(t){let e=Ym;return Ym=t,e}var tL=256,Vb=tL-1,Ub=5,nL=0,Fn={};function rL(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ka)&&(r=n[Ka]),r==null&&(r=n[Ka]=nL++);let i=r&Vb,s=1<<i;e.data[t+(i>>Ub)]|=s}function pd(t,e){let n=jb(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,Am(r.data,t),Am(e,null),Am(r.blueprint,null));let i=Gg(t,e),s=t.injectorIndex;if(Lb(i)){let o=hd(i),a=fd(i,e),c=a[oe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Am(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Gg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zb(i),r===null)return fo;if(n++,i=i[Do],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return fo}function Jm(t,e,n){rL(t,e,n)}function Bb(t,e,n){if(n&X.Optional||t!==void 0)return t;Ng(e,"NodeInjector")}function $b(t,e,n,r){if(n&X.Optional&&r===void 0&&(r=null),!(n&(X.Self|X.Host))){let i=t[_o],s=en(void 0);try{return i?i.get(e,r,n&X.Optional):XD(e,r,n&X.Optional)}finally{en(s)}}return Bb(r,e,n)}function Hb(t,e,n,r=X.Default,i){if(t!==null){if(e[H]&2048&&!(r&X.Self)){let o=cL(t,e,n,r,Fn);if(o!==Fn)return o}let s=qb(t,e,n,r,Fn);if(s!==Fn)return s}return $b(e,n,r,i)}function qb(t,e,n,r,i){let s=oL(n);if(typeof s=="function"){if(!Nb(e,t,r))return r&X.Host?Bb(i,n,r):$b(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&X.Optional))Ng(n);else return o}finally{Ob()}}else if(typeof s=="number"){let o=null,a=jb(t,e),c=fo,l=r&X.Host?e[Vn][En]:null;for((a===-1||r&X.SkipSelf)&&(c=a===-1?Gg(t,e):e[a+8],c===fo||!ID(r,!1)?a=-1:(o=e[oe],a=hd(c),e=fd(c,e)));a!==-1;){let u=e[oe];if(ED(s,a,u.data)){let d=iL(a,e,n,o,r,l);if(d!==Fn)return d}c=e[a+8],c!==fo&&ID(r,e[oe].data[a+8]===l)&&ED(s,a,e)?(o=u,a=hd(c),e=fd(c,e)):a=-1}}return i}function iL(t,e,n,r,i,s){let o=e[oe],a=o.data[t+8],c=r==null?Rd(a)&&Ym:r!=o&&(a.type&3)!==0,l=i&X.Host&&s===a,u=sL(a,o,n,c,l);return u!==null?Eo(e,o,u,a):Fn}function sL(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=o[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(i){let f=o[c];if(f&&mr(f)&&f.type===n)return c}return null}function Eo(t,e,n,r){let i=t[n],s=e.data;if(JF(i)){let o=i;o.resolving&&k1(O1(s[n]));let a=wD(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?en(o.injectImpl):null,u=Nb(t,r,X.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&QF(n,s[n],e)}finally{l!==null&&en(l),wD(a),o.resolving=!1,Ob()}}return i}function oL(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ka)?t[Ka]:void 0;return typeof e=="number"?e>=0?e&Vb:aL:e}function ED(t,e,n){let r=1<<t;return!!(n[e+(t>>Ub)]&r)}function ID(t,e){return!(t&X.Self)&&!(t&X.Host&&e)}var Pi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Hb(this._tNode,this._lView,e,Dd(r),n)}};function aL(){return new Pi(kt(),Ee())}function uc(t){return oc(()=>{let e=t.prototype.constructor,n=e[sd]||Zm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[sd]||Zm(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zm(t){return WD(t)?()=>{let e=Zm(At(t));return e&&e()}:po(t)}function cL(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[H]&2048&&!(o[H]&512);){let a=qb(s,o,n,r|X.Self,Fn);if(a!==Fn)return a;let c=s.parent;if(!c){let l=o[mb];if(l){let u=l.get(n,Fn,r);if(u!==Fn)return u}c=zb(o),o=o[Do]}s=c}return i}function zb(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[En]:null}function TD(t,e=null,n=null,r){let i=Gb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Gb(t,e=null,n=null,r,i=new Set){let s=[n||Ot,Co(t)];return r=r||(typeof t=="object"?void 0:Nt(t)),new Ja(s,e||kg(),r||null,i)}var nt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return TD({name:""},i,r,"");{let s=r.name??"";return TD({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Qa,e.NULL=new cd,e.\u0275prov=P({token:e,providedIn:"any",factory:()=>x(tb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var lL="ngOriginalError";function Rm(t){return t[lL]}var gr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Rm(e);for(;n&&Rm(n);)n=Rm(n);return n||null}},Wb=new F("",{providedIn:"root",factory:()=>b(gr).handleError.bind(void 0)}),Kb=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uL,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Xm=class extends Kb{constructor(e){super(),this._lView=e}onDestroy(e){return Tb(this._lView,e),()=>OF(this._lView,e)}};function uL(){return new Xm(Ee())}function dL(){return kd(kt(),Ee())}function kd(t,e){return new Xr(sn(t,e))}var Xr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=dL;let t=e;return t})();var eg=class extends xe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,wF()&&(this.destroyRef=b(Kb,{optional:!0})??void 0)}emit(e){let n=ge(null);try{super.next(e)}finally{ge(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Nm(s),i&&(i=Nm(i)),o&&(o=Nm(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Be&&e.add(a),a}};function Nm(t){return e=>{setTimeout(t,void 0,e)}}var Rt=eg;function Qb(t){return(t.flags&128)===128}var Yb=new Map,hL=0;function fL(){return hL++}function pL(t){Yb.set(t[Ad],t)}function mL(t){Yb.delete(t[Ad])}var CD="__ngContext__";function Yr(t,e){Mi(e)?(t[CD]=e[Ad],pL(e)):t[CD]=e}function Jb(t){return Xb(t[Xa])}function Zb(t){return Xb(t[yn])}function Xb(t){for(;t!==null&&!wr(t);)t=t[yn];return t}var tg;function e0(t){tg=t}function t0(){if(tg!==void 0)return tg;if(typeof document<"u")return document;throw new E(210,!1)}var Wg=new F("",{providedIn:"root",factory:()=>gL}),gL="ng",Kg=new F(""),ei=new F("",{providedIn:"platform",factory:()=>"unknown"});var Qg=new F(""),Yg=new F("",{providedIn:"root",factory:()=>t0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var yL="h",_L="b";var vL=()=>null;function Jg(t,e,n=!1){return vL(t,e,n)}var n0=!1,wL=new F("",{providedIn:"root",factory:()=>n0});var Qu;function EL(){if(Qu===void 0&&(Qu=null,fr.trustedTypes))try{Qu=fr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Qu}function Fd(t){return EL()?.createHTML(t)||t}var Yu;function IL(){if(Yu===void 0&&(Yu=null,fr.trustedTypes))try{Yu=fr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Yu}function DD(t){return IL()?.createHTML(t)||t}var yr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${GD})`}},ng=class extends yr{getTypeName(){return"HTML"}},rg=class extends yr{getTypeName(){return"Style"}},ig=class extends yr{getTypeName(){return"Script"}},sg=class extends yr{getTypeName(){return"URL"}},og=class extends yr{getTypeName(){return"ResourceURL"}};function Bn(t){return t instanceof yr?t.changingThisBreaksApplicationSecurity:t}function qi(t,e){let n=TL(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${GD})`)}return n===e}function TL(t){return t instanceof yr&&t.getTypeName()||null}function r0(t){return new ng(t)}function i0(t){return new rg(t)}function s0(t){return new ig(t)}function o0(t){return new sg(t)}function a0(t){return new og(t)}function CL(t){let e=new cg(t);return DL()?new ag(e):e}var ag=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Fd(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},cg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Fd(e),n}};function DL(){try{return!!new window.DOMParser().parseFromString(Fd(""),"text/html")}catch{return!1}}var bL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zg(t){return t=String(t),t.match(bL)?t:"unsafe:"+t}function Er(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function dc(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var c0=Er("area,br,col,hr,img,wbr"),l0=Er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),u0=Er("rp,rt"),SL=dc(u0,l0),AL=dc(l0,Er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),RL=dc(u0,Er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bD=dc(c0,AL,RL,SL),d0=Er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),NL=Er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ML=Er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),PL=dc(d0,NL,ML),xL=Er("script,style,template"),lg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=FL(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=kL(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=SD(e).toLowerCase();if(!bD.hasOwnProperty(n))return this.sanitizedSomething=!0,!xL.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!PL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;d0[a]&&(c=Zg(c)),this.buf.push(" ",o,'="',AD(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=SD(e).toLowerCase();bD.hasOwnProperty(n)&&!c0.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(AD(e))}};function OL(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function kL(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw h0(e);return e}function FL(t){let e=t.firstChild;if(e&&OL(t,e))throw h0(e);return e}function SD(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function h0(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var LL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,VL=/([^\#-~ |!])/g;function AD(t){return t.replace(/&/g,"&amp;").replace(LL,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(VL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ju;function Xg(t,e){let n=null;try{Ju=Ju||CL(t);let r=e?String(e):"";n=Ju.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Ju.getInertBodyElement(r)}while(r!==s);let a=new lg().sanitizeChildren(RD(n)||n);return Fd(a)}finally{if(n){let r=RD(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function RD(t){return"content"in t&&UL(t)?t.content:null}function UL(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var In=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(In||{});function ey(t){let e=jL();return e?DD(e.sanitize(In.HTML,t)||""):qi(t,"HTML")?DD(Bn(t)):Xg(t0(),Cd(t))}function jL(){let t=Ee();return t&&t[vn].sanitizer}var BL=/^>|^->|<!--|-->|--!>|<!-$/g,$L=/(<|>)/g,HL="\u200B$1\u200B";function qL(t){return t.replace(BL,e=>e.replace($L,HL))}function f0(t){return t instanceof Function?t():t}var _r=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_r||{}),zL;function ty(t,e){return zL(t,e)}function uo(t,e,n,r,i){if(r!=null){let s,o=!1;wr(r)?s=r:Mi(r)&&(o=!0,r=r[jn]);let a=Un(r);t===0&&n!==null?i==null?_0(e,n,a):md(e,n,a,i||null,!0):t===1&&n!==null?md(e,n,a,i||null,!0):t===2?lV(e,a,o):t===3&&e.destroyNode(a),s!=null&&dV(e,t,s,n,i)}}function GL(t,e){return t.createText(e)}function WL(t,e,n){t.setValue(e,n)}function KL(t,e){return t.createComment(qL(e))}function p0(t,e,n){return t.createElement(e,n)}function QL(t,e){m0(t,e),e[jn]=null,e[En]=null}function YL(t,e,n,r,i,s){r[jn]=i,r[En]=e,Vd(t,r,n,1,i,s)}function m0(t,e){e[vn].changeDetectionScheduler?.notify(1),Vd(t,e,e[Fe],2,null,null)}function JL(t){let e=t[Xa];if(!e)return Mm(t[oe],t);for(;e;){let n=null;if(Mi(e))n=e[Xa];else{let r=e[tn];r&&(n=r)}if(!n){for(;e&&!e[yn]&&e!==t;)Mi(e)&&Mm(e[oe],e),e=e[_t];e===null&&(e=t),Mi(e)&&Mm(e[oe],e),n=e&&e[yn]}e=n}}function ZL(t,e,n,r){let i=tn+r,s=n.length;r>0&&(n[i-1][yn]=e),r<s-tn?(e[yn]=n[i],eb(n,tn+r,e)):(n.push(e),e[yn]=null),e[_t]=n;let o=e[Sd];o!==null&&n!==o&&XL(o,e);let a=e[vo];a!==null&&a.insertView(t),Km(e),e[H]|=128}function XL(t,e){let n=t[dd],i=e[_t][_t][Vn];e[Vn]!==i&&(t[H]|=Lg.HasTransplantedViews),n===null?t[dd]=[e]:n.push(e)}function g0(t,e){let n=t[dd],r=n.indexOf(e);n.splice(r,1)}function ug(t,e){if(t.length<=tn)return;let n=tn+e,r=t[n];if(r){let i=r[Sd];i!==null&&i!==t&&g0(i,r),e>0&&(t[n-1][yn]=r[yn]);let s=ad(t,tn+e);QL(r[oe],r);let o=s[vo];o!==null&&o.detachView(s[oe]),r[_t]=null,r[yn]=null,r[H]&=-129}return r}function y0(t,e){if(!(e[H]&256)){let n=e[Fe];n.destroyNode&&Vd(t,e,n,3,null,null),JL(e)}}function Mm(t,e){if(e[H]&256)return;let n=ge(null);try{e[H]&=-129,e[H]|=256,e[Oi]&&FC(e[Oi]),tV(t,e),eV(t,e),e[oe].type===1&&e[Fe].destroy();let r=e[Sd];if(r!==null&&wr(e[_t])){r!==e[_t]&&g0(r,e);let i=e[vo];i!==null&&i.detachView(t)}mL(e)}finally{ge(n)}}function eV(t,e){let n=t.cleanup,r=e[Za];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Za]=null);let i=e[Qr];if(i!==null){e[Qr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function tV(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Li)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];kn(4,a,c);try{c.call(a)}finally{kn(5,a,c)}}else{kn(4,i,s);try{s.call(i)}finally{kn(5,i,s)}}}}}function nV(t,e,n){return rV(t,e.parent,n)}function rV(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[jn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ln.None||s===Ln.Emulated)return null}return sn(r,n)}}function md(t,e,n,r,i){t.insertBefore(e,n,r,i)}function _0(t,e,n){t.appendChild(e,n)}function ND(t,e,n,r,i){r!==null?md(t,e,n,r,i):_0(t,e,n)}function iV(t,e,n,r){t.removeChild(e,n,r)}function ny(t,e){return t.parentNode(e)}function sV(t,e){return t.nextSibling(e)}function oV(t,e,n){return cV(t,e,n)}function aV(t,e,n){return t.type&40?sn(t,n):null}var cV=aV,MD;function Ld(t,e,n,r){let i=nV(t,r,e),s=e[Fe],o=r.parent||e[En],a=oV(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)ND(s,i,n[c],a,!1);else ND(s,i,n,a,!1);MD!==void 0&&MD(s,r,e,n,i)}function rd(t,e){if(e!==null){let n=e.type;if(n&3)return sn(e,t);if(n&4)return dg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return rd(t,r);{let i=t[e.index];return wr(i)?dg(-1,i):Un(i)}}else{if(n&32)return ty(e,t)()||Un(t[e.index]);{let r=v0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=tc(t[Vn]);return rd(i,r)}else return rd(t,e.next)}}}return null}function v0(t,e){if(e!==null){let r=t[Vn][En],i=e.projection;return r.projection[i]}return null}function dg(t,e){let n=tn+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return rd(r,i)}return e[ki]}function lV(t,e,n){let r=ny(t,e);r&&iV(t,r,e,n)}function ry(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Yr(Un(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)ry(t,e,n.child,r,i,s,!1),uo(e,t,i,a,s);else if(c&32){let l=ty(n,r),u;for(;u=l();)uo(e,t,i,u,s);uo(e,t,i,a,s)}else c&16?uV(t,e,r,n,i,s):uo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Vd(t,e,n,r,i,s){ry(n,r,t.firstChild,e,i,s,!1)}function uV(t,e,n,r,i,s){let o=n[Vn],c=o[En].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];uo(e,t,i,u,s)}else{let l=c,u=o[_t];Qb(r)&&(l.flags|=128),ry(t,e,l,u,i,s,!0)}}function dV(t,e,n,r,i){let s=n[ki],o=Un(n);s!==o&&uo(e,t,r,s,i);for(let a=tn;a<n.length;a++){let c=n[a];Vd(c[oe],c,t,e,r,s)}}function hV(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:_r.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_r.Important),t.setStyle(n,r,i,s))}}function fV(t,e,n){t.setAttribute(e,"style",n)}function w0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function E0(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Hm(t,e,r),i!==null&&w0(t,e,i),s!==null&&fV(t,e,s)}var ti={};function Se(t=1){I0(ht(),Ee(),Hi()+t,!1)}function I0(t,e,n,r){if(!r)if((e[H]&3)===3){let s=t.preOrderCheckHooks;s!==null&&td(e,s,n)}else{let s=t.preOrderHooks;s!==null&&nd(e,s,0,n)}Fi(n)}function te(t,e=X.Default){let n=Ee();if(n===null)return x(t,e);let r=kt();return Hb(r,n,At(t),e)}function T0(t,e,n,r,i,s){let o=ge(null);try{let a=null;i&nn.SignalBased&&(a=e[r][nm]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&nn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):gb(e,a,r,s)}finally{ge(o)}}function pV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fi(~i);else{let s=i,o=n[++r],a=n[++r];qF(o,s);let c=e[s];a(2,c)}}}finally{Fi(-1)}}function Ud(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[jn]=i,d[H]=r|4|128|8|64,(l!==null||t&&t[H]&2048)&&(d[H]|=2048),Ib(d),d[_t]=d[Do]=t,d[_n]=n,d[vn]=o||t&&t[vn],d[Fe]=a||t&&t[Fe],d[_o]=c||t&&t[_o]||null,d[En]=s,d[Ad]=fL(),d[ld]=u,d[mb]=l,d[Vn]=e.type==2?t[Vn]:d,d}function hc(t,e,n,r,i){let s=t.data[e];if(s===null)s=mV(t,e,n,r,i),HF()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=BF();s.injectorIndex=o===null?-1:o.injectorIndex}return $i(s,!0),s}function mV(t,e,n,r,i){let s=Db(),o=Hg(),a=o?s:s&&s.parent,c=t.data[e]=wV(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function C0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function D0(t,e,n,r,i){let s=Hi(),o=r&2;try{Fi(-1),o&&e.length>pr&&I0(t,e,pr,!1),kn(o?2:0,i),n(r,i)}finally{Fi(s),kn(o?3:1,i)}}function iy(t,e,n){if(Vg(e)){let r=ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{ge(r)}}}function sy(t,e,n){Cb()&&(bV(t,e,n,sn(n,e)),(n.flags&64)===64&&A0(t,e,n))}function oy(t,e,n=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function b0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ay(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ay(t,e,n,r,i,s,o,a,c,l,u){let d=pr+r,h=d+i,f=gV(d,h),m=typeof l=="function"?l():l;return f[oe]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function gV(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ti);return n}function yV(t,e,n,r){let s=r.get(wL,n0)||n===Ln.ShadowDom,o=t.selectRootElement(e,s);return _V(o),o}function _V(t){vV(t)}var vV=()=>null;function wV(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return VF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function PD(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=nn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?xD(r,n,l,a,c):xD(r,n,l,a)}return r}function xD(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function EV(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=PD(0,d.inputs,u,c,f),l=PD(1,d.outputs,u,l,m);let g=c!==null&&o!==null&&!xg(e)?LV(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function IV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function cy(t,e,n,r,i,s,o,a){let c=sn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(uy(t,n,u,r,i),Rd(e)&&TV(n,e.index)):e.type&3?(r=IV(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function TV(t,e){let n=Zr(e,t);n[H]&16||(n[H]|=64)}function ly(t,e,n,r){if(Cb()){let i=r===null?null:{"":-1},s=AV(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&S0(t,e,n,o,i,a),i&&RV(n,r,i)}n.mergedAttrs=Ya(n.mergedAttrs,n.attrs)}function S0(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Jm(pd(n,e),t,r[l].type);MV(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=C0(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Ya(n.mergedAttrs,u.hostAttrs),PV(t,n,e,c,u),NV(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}EV(t,n,s)}function CV(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;DV(o)!=a&&o.push(a),o.push(n,r,s)}}function DV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function bV(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Rd(n)&&xV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||pd(n,e),Yr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Eo(e,t,a,n);if(Yr(l,e),o!==null&&FV(e,a-i,l,c,n,o),mr(c)){let u=Zr(n.index,e);u[_n]=Eo(e,t,a,n)}}}function A0(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=zF();try{Fi(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Qm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&SV(c,l)}}finally{Fi(-1),Qm(o)}}function SV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function AV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(tF(e,o.selectors,!1))if(r||(r=[]),mr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;hg(t,e,c)}else r.unshift(o),hg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function hg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function RV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new E(-301,!1);r.push(e[i],s)}}}function NV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mr(e)&&(n[""]=t)}}function MV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function PV(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=po(i.type,!0)),o=new Li(s,mr(i),te);t.blueprint[r]=o,n[r]=o,CV(t,e,r,C0(t,n,i.hostVars,ti),i)}function xV(t,e,n){let r=sn(e,t),i=b0(n),s=t[vn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=jd(t,Ud(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function OV(t,e,n,r,i,s){let o=sn(t,e);kV(e[Fe],o,s,t.value,n,r,i)}function kV(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Cd(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function FV(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];T0(r,n,c,l,u,d)}}function LV(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function R0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function N0(t,e){let n=t.contentQueries;if(n!==null){let r=ge(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Rb(s),a.contentQueries(2,e[o],o)}}}finally{ge(r)}}}function jd(t,e){return t[Xa]?t[yD][yn]=e:t[Xa]=e,t[yD]=e,e}function fg(t,e,n){Rb(0);let r=ge(null);try{e(t,n)}finally{ge(r)}}function VV(t){return t[Za]||(t[Za]=[])}function UV(t){return t.cleanup||(t.cleanup=[])}function jV(t,e,n){return(t===null||mr(t))&&(n=NF(n[e.index])),n[Fe]}function M0(t,e){let n=t[_o],r=n?n.get(gr,null):null;r&&r.handleError(e)}function uy(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];T0(u,l,r,a,c,i)}}function BV(t,e,n){let r=wb(e,t);WL(t[Fe],r,n)}function $V(t,e){let n=Zr(e,t),r=n[oe];HV(r,n);let i=n[jn];i!==null&&n[ld]===null&&(n[ld]=Jg(i,n[_o])),dy(r,n,n[_n])}function HV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function dy(t,e,n){qg(e);try{let r=t.viewQuery;r!==null&&fg(1,r,n);let i=t.template;i!==null&&D0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[vo]?.finishViewCreation(t),t.staticContentQueries&&N0(t,e),t.staticViewQueries&&fg(2,t.viewQuery,n);let s=t.components;s!==null&&qV(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[H]&=-5,zg()}}function qV(t,e){for(let n=0;n<e.length;n++)$V(t,e[n])}function zV(t,e,n,r){let i=ge(null);try{let s=e.tView,a=t[H]&4096?4096:16,c=Ud(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Sd]=l;let u=t[vo];return u!==null&&(c[vo]=u.createEmbeddedView(s)),dy(s,c,n),c}finally{ge(i)}}function OD(t,e){return!e||e.firstChild===null||Qb(t)}function GV(t,e,n,r=!0){let i=e[oe];if(ZL(i,e,t,n),r){let o=dg(n,t),a=e[Fe],c=ny(a,t[ki]);c!==null&&YL(i,t[En],a,e,c,o)}let s=e[ld];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function gd(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Un(s)),wr(s)&&WV(s,r);let o=n.type;if(o&8)gd(t,e,n.child,r);else if(o&32){let a=ty(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=v0(e,n);if(Array.isArray(a))r.push(...a);else{let c=tc(e[Vn]);gd(c[oe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function WV(t,e){for(let n=tn;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&gd(r[oe],r,i,e)}t[ki]!==t[jn]&&e.push(t[ki])}var P0=[];function KV(t){return t[Oi]??QV(t)}function QV(t){let e=P0.pop()??Object.create(JV);return e.lView=t,e}function YV(t){t.lView[Oi]!==t&&(t.lView=null,P0.push(t))}var JV=le(I({},xC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ec(t.lView)},consumerOnSignalRead(){this.lView[Oi]=this}}),x0=100;function O0(t,e=!0,n=0){let r=t[vn],i=r.rendererFactory,s=!1;s||i.begin?.();try{ZV(t,n)}catch(o){throw e&&M0(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function ZV(t,e){pg(t,e);let n=0;for(;jg(t);){if(n===x0)throw new E(103,!1);n++,pg(t,1)}}function XV(t,e,n,r){let i=e[H];if((i&256)===256)return;let s=!1;!s&&e[vn].inlineEffectRunner?.flush(),qg(e);let o=null,a=null;!s&&eU(t)&&(a=KV(e),o=OC(a));try{Ib(e),$F(t.bindingStartIndex),n!==null&&D0(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&td(e,d,null)}else{let d=t.preOrderHooks;d!==null&&nd(e,d,0,null),Sm(e,0)}if(tU(e),k0(e,0),t.contentQueries!==null&&N0(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&td(e,d)}else{let d=t.contentHooks;d!==null&&nd(e,d,1),Sm(e,1)}pV(t,e);let l=t.components;l!==null&&L0(e,l,0);let u=t.viewQuery;if(u!==null&&fg(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&td(e,d)}else{let d=t.viewHooks;d!==null&&nd(e,d,2),Sm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[bm]){for(let d of e[bm])d();e[bm]=null}s||(e[H]&=-73)}catch(c){throw ec(e),c}finally{a!==null&&(kC(a,o),YV(a)),zg()}}function eU(t){return t.type!==2}function k0(t,e){for(let n=Jb(t);n!==null;n=Zb(n))for(let r=tn;r<n.length;r++){let i=n[r];F0(i,e)}}function tU(t){for(let e=Jb(t);e!==null;e=Zb(e)){if(!(e[H]&Lg.HasTransplantedViews))continue;let n=e[dd];for(let r=0;r<n.length;r++){let i=n[r],s=i[_t];PF(i)}}}function nU(t,e,n){let r=Zr(e,t);F0(r,n)}function F0(t,e){Ug(t)&&pg(t,e)}function pg(t,e){let r=t[oe],i=t[H],s=t[Oi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&rm(s)),s&&(s.dirty=!1),t[H]&=-9217,o)XV(r,t,r.template,t[_n]);else if(i&8192){k0(t,1);let a=r.components;a!==null&&L0(t,a,1)}}function L0(t,e,n){for(let r=0;r<e.length;r++)nU(t,e[r],n)}function hy(t){for(t[vn].changeDetectionScheduler?.notify();t;){t[H]|=64;let e=tc(t);if(IF(t)&&!e)return t;t=e}return null}var Vi=class{get rootNodes(){let e=this._lView,n=e[oe];return gd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return(this._lView[H]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if(wr(e)){let n=e[ud],r=n?n.indexOf(this):-1;r>-1&&(ug(e,r),ad(n,r))}this._attachedToViewContainer=!1}y0(this._lView[oe],this._lView)}onDestroy(e){Tb(this._lView,e)}markForCheck(){hy(this._cdRefInjectingView||this._lView)}detach(){this._lView[H]&=-129}reattach(){Km(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,O0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,m0(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e,Km(this._lView)}},fy=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sU;let t=e;return t})(),rU=fy,iU=class extends rU{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=zV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Vi(i)}};function sU(){return oU(kt(),Ee())}function oU(t,e){return t.type&4?new iU(e,t,kd(t,e)):null}var IX=new RegExp(`^(\\d+)*(${_L}|${yL})*(.*)`);var aU=()=>null;function kD(t,e){return aU(t,e)}var nc=class{},mg=class{},yd=class{};function cU(t){let e=Error(`No component factory found for ${Nt(t)}.`);return e[lU]=t,e}var lU="ngComponent";var gg=class{resolveComponentFactory(e){throw cU(e)}},So=(()=>{let e=class e{};e.NULL=new gg;let t=e;return t})(),Ui=class{},Ao=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>uU();let t=e;return t})();function uU(){let t=Ee(),e=kt(),n=Zr(e.index,t);return(Mi(n)?n:t)[Fe]}var dU=(()=>{let e=class e{};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Pm={};var FD=new Set;function Bd(t){FD.has(t)||(FD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function LD(...t){}function hU(){let t=typeof fr.requestAnimationFrame=="function",e=fr[t?"requestAnimationFrame":"setTimeout"],n=fr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ae=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rt(!1),this.onMicrotaskEmpty=new Rt(!1),this.onStable=new Rt(!1),this.onError=new Rt(!1),typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=hU().nativeRequestAnimationFrame,mU(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,fU,LD,LD);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},fU={};function py(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pU(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(fr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,yg(t),t.isCheckStableRunning=!0,py(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),yg(t))}function mU(t){let e=()=>{pU(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(gU(a))return n.invokeTask(i,s,o,a);try{return VD(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),UD(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return VD(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),UD(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,yg(t),py(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function yg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function VD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function UD(t){t._nesting--,py(t)}function gU(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var V0=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function _d(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Um(i,a);else if(s==2){let c=a,l=e[++o];r=Um(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var vd=class extends So{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=xi(e);return new rc(n,this.ngModule)}};function jD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function yU(t){let e=t.toLowerCase();return e==="svg"?bF:e==="math"?SF:null}var _g=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Dd(r);let i=this.injector.get(e,Pm,r);return i!==Pm||n===Pm?i:this.parentInjector.get(e,n,r)}},rc=class extends yd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=jD(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return jD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=sF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ge(null);try{i=i||this.ngModule;let o=i instanceof rn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new _g(e,o):e,c=a.get(Ui,null);if(c===null)throw new E(407,!1);let l=a.get(dU,null),u=a.get(V0,null),d=a.get(nc,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=r?yV(f,r,this.componentDef.encapsulation,a):p0(f,m,yU(m)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let v=null;g!==null&&(v=Jg(g,a,!0));let N=ay(0,null,null,1,0,null,null,null,null,null,null),M=Ud(null,N,null,y,null,null,h,f,a,null,v);qg(M);let $,Ne;try{let Y=this.componentDef,me,be=null;Y.findHostDirectiveDefs?(me=[],be=new Map,Y.findHostDirectiveDefs(Y,me,be),me.push(Y)):me=[Y];let St=_U(M,g),Ut=vU(St,g,Y,me,M,h,f);Ne=Eb(N,pr),g&&IU(f,Y,g,r),n!==void 0&&TU(Ne,this.ngContentSelectors,n),$=EU(Ut,Y,me,be,M,[CU]),dy(N,M,null)}finally{zg()}return new vg(this.componentType,$,kd(Ne,M),M,Ne)}finally{ge(s)}}},vg=class extends mg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Vi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;uy(s[oe],s,i,e,n),this.previousInputValues.set(e,n);let o=Zr(this._tNode.index,s);hy(o)}}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _U(t,e){let n=t[oe],r=pr;return t[r]=e,hc(n,r,2,"#host",null)}function vU(t,e,n,r,i,s,o){let a=i[oe];wU(r,t,e,o);let c=null;e!==null&&(c=Jg(e,i[_o]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ud(i,b0(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&hg(a,t,r.length-1),jd(i,d),i[t.index]=d}function wU(t,e,n,r){for(let i of t)e.mergedAttrs=Ya(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_d(e,e.mergedAttrs,!0),n!==null&&E0(r,n,e))}function EU(t,e,n,r,i,s){let o=kt(),a=i[oe],c=sn(o,i);S0(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Eo(i,a,d,o);Yr(h,i)}A0(a,i,o),c&&Yr(c,i);let l=Eo(i,a,o.directiveStart+o.componentOffset,o);if(t[_n]=i[_n]=l,s!==null)for(let u of s)u(l,e);return iy(a,o,i),l}function IU(t,e,n,r){if(r)Hm(t,n,["ng-version","17.3.6"]);else{let{attrs:i,classes:s}=oF(e.selectors[0]);i&&Hm(t,n,i),s&&s.length>0&&w0(t,n,s.join(" "))}}function TU(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function CU(){let t=kt();Od(Ee()[oe],t)}var fc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DU;let t=e;return t})();function DU(){let t=kt();return SU(t,Ee())}var bU=fc,U0=class extends bU{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return kd(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gg(this._hostTNode,this._hostLView);if(Lb(e)){let n=fd(e,this._hostLView),r=hd(e),i=n[oe].data[r+8];return new Pi(i,n)}else return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=BD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-tn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=kD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,OD(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!EF(e),a;if(o)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let c=o?e:new rc(xi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(rn,null);g&&(s=g)}let u=xi(c.componentType??{}),d=kD(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,OD(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(MF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[_t],l=new U0(c,c[En],c[_t]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return GV(o,i,s,r),e.attachToViewContainerRef(),eb(xm(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=BD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ug(this._lContainer,n);r&&(ad(xm(this._lContainer),n),y0(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=ug(this._lContainer,n);return r&&ad(xm(this._lContainer),n)!=null?new Vi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function BD(t){return t[ud]}function xm(t){return t[ud]||(t[ud]=[])}function SU(t,e){let n,r=e[t.index];return wr(r)?n=r:(n=R0(r,e,null,t),e[t.index]=n,jd(e,n)),RU(n,e,t,r),new U0(n,t,e)}function AU(t,e){let n=t[Fe],r=n.createComment(""),i=sn(e,t),s=ny(n,i);return md(n,s,r,sV(n,i),!1),r}var RU=PU,NU=()=>!1;function MU(t,e,n){return NU(t,e,n)}function PU(t,e,n,r){if(t[ki])return;let i;n.type&8?i=Un(r):i=AU(e,n),t[ki]=i}function xU(t){return typeof t=="function"&&t[nm]!==void 0}function j0(t){return xU(t)&&typeof t.set=="function"}function OU(t){return Object.getPrototypeOf(t.prototype).constructor}function Ro(t){let e=OU(t.type),n=!0,r=[t];for(;e;){let i;if(mr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new E(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Zu(t.inputs),o.inputTransforms=Zu(t.inputTransforms),o.declaredInputs=Zu(t.declaredInputs),o.outputs=Zu(t.outputs);let a=i.hostBindings;a&&UU(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&LU(t,c),l&&VU(t,l),kU(t,i),b1(t.outputs,i.outputs),mr(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ro&&(n=!1)}}e=Object.getPrototypeOf(e)}FU(r)}function kU(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function FU(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ya(i.hostAttrs,n=Ya(n,i.hostAttrs))}}function Zu(t){return t===mo?{}:t===Ot?[]:t}function LU(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function VU(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function UU(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Jr=class{},ic=class{};var wg=class extends Jr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vd(this);let i=cb(e);this._bootstrapComponents=f0(i.bootstrap),this._r3Injector=Gb(e,n,[{provide:Jr,useValue:this},{provide:So,useValue:this.componentFactoryResolver},...r],Nt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Eg=class extends ic{constructor(e){super(),this.moduleType=e}create(e){return new wg(this.moduleType,e,[])}};var wd=class extends Jr{constructor(e){super(),this.componentFactoryResolver=new vd(this),this.instance=null;let n=new Ja([...e.providers,{provide:Jr,useValue:this},{provide:So,useValue:this.componentFactoryResolver}],e.parent||kg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function my(t,e,n=null){return new wd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var $d=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function jU(t){return(t.flags&32)===32}function BU(t,e,n,r,i,s,o,a,c){let l=e.consts,u=hc(e,t,4,o||null,wo(l,a));ly(e,n,u,wo(l,c)),Od(e,u);let d=u.tView=ay(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function No(t,e,n,r,i,s,o,a){let c=Ee(),l=ht(),u=t+pr,d=l.firstCreatePass?BU(u,l,c,e,n,r,i,s,o):l.data[u];$i(d,!1);let h=$U(l,c,d,t);Pd()&&Ld(l,c,h,d),Yr(h,c);let f=R0(h,c,h,d);return c[u]=f,jd(c,f),MU(f,d,c),Nd(d)&&sy(l,c,d),o!=null&&oy(c,d,a),No}var $U=HU;function HU(t,e,n,r){return xd(!0),e[Fe].createComment("")}function ni(t,e,n,r){let i=Ee(),s=lc();if(zi(i,s,e)){let o=ht(),a=Md();OV(a,i,t,e,n,r)}return ni}function qU(t,e,n,r){return zi(t,lc(),n)?e+Cd(n)+r:ti}function Xu(t,e){return t<<17|e<<2}function ji(t){return t>>17&32767}function zU(t){return(t&2)==2}function GU(t,e){return t&131071|e<<17}function Ig(t){return t|2}function Io(t){return(t&131068)>>2}function Om(t,e){return t&-131069|e<<2}function WU(t){return(t&1)===1}function Tg(t){return t|1}function KU(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ji(o),c=Io(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||cc(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=ji(t[a+1]);t[r+1]=Xu(h,a),h!==0&&(t[h+1]=Om(t[h+1],r)),t[a+1]=GU(t[a+1],r)}else t[r+1]=Xu(a,0),a!==0&&(t[a+1]=Om(t[a+1],r)),a=r;else t[r+1]=Xu(c,0),a===0?a=r:t[c+1]=Om(t[c+1],r),c=r;l&&(t[r+1]=Ig(t[r+1])),$D(t,u,r,!0),$D(t,u,r,!1),QU(e,u,t,r,s),o=Xu(a,c),s?e.classBindings=o:e.styleBindings=o}function QU(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&cc(s,e)>=0&&(n[r+1]=Tg(n[r+1]))}function $D(t,e,n,r){let i=t[n+1],s=e===null,o=r?ji(i):Io(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];YU(c,e)&&(a=!0,t[o+1]=r?Tg(l):Ig(l)),o=r?ji(l):Io(l)}a&&(t[n+1]=r?Ig(i):Tg(i))}function YU(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?cc(t,e)>=0:!1}var gn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function JU(t){return t.substring(gn.key,gn.keyEnd)}function ZU(t){return XU(t),B0(t,$0(t,0,gn.textEnd))}function B0(t,e){let n=gn.textEnd;return n===e?-1:(e=gn.keyEnd=ej(t,gn.key=e,n),$0(t,e,n))}function XU(t){gn.key=0,gn.keyEnd=0,gn.value=0,gn.valueEnd=0,gn.textEnd=t.length}function $0(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ej(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function vt(t,e,n){let r=Ee(),i=lc();if(zi(r,i,e)){let s=ht(),o=Md();cy(s,o,r,t,e,r[Fe],n,!1)}return vt}function Cg(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";uy(t,n,s[o],o,r)}function Gi(t,e,n){return H0(t,e,n,!1),Gi}function gy(t,e){return H0(t,e,null,!0),gy}function Ir(t){nj(cj,tj,t,!0)}function tj(t,e){for(let n=ZU(e);n>=0;n=B0(e,n))Pg(t,JU(e),!0)}function H0(t,e,n,r){let i=Ee(),s=ht(),o=Sb(2);if(s.firstUpdatePass&&z0(s,t,o,r),e!==ti&&zi(i,o,e)){let a=s.data[Hi()];G0(s,a,i,i[Fe],t,i[o+1]=uj(e,n),r,o)}}function nj(t,e,n,r){let i=ht(),s=Sb(2);i.firstUpdatePass&&z0(i,null,s,r);let o=Ee();if(n!==ti&&zi(o,s,n)){let a=i.data[Hi()];if(W0(a,r)&&!q0(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Um(c,n||"")),Cg(i,a,o,n,r)}else lj(i,a,o,o[Fe],o[s+1],o[s+1]=aj(t,e,n),r,s)}}function q0(t,e){return e>=t.expandoStartIndex}function z0(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Hi()],o=q0(t,n);W0(s,r)&&e===null&&!o&&(e=!1),e=rj(i,s,e,r),KU(i,s,e,n,o,r)}}function rj(t,e,n,r){let i=Ab(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=km(null,t,e,n,r),n=sc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=km(i,t,e,n,r),s===null){let c=ij(t,e,r);c!==void 0&&Array.isArray(c)&&(c=km(null,t,e,c[1],r),c=sc(c,e.attrs,r),sj(t,e,r,c))}else s=oj(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function ij(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Io(r)!==0)return t[ji(r)]}function sj(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ji(i)]=r}function oj(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=sc(r,o,n)}return sc(r,e.attrs,n)}function km(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=sc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function sc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Pg(t,o,n?!0:e[++s]))}return t===void 0?null:t}function aj(t,e,n){if(n==null||n==="")return Ot;let r=[],i=Bn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function cj(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Pg(t,r,n)}function lj(t,e,n,r,i,s,o,a){i===ti&&(i=Ot);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<s.length?s[l+1]:void 0,m=null,g;u===d?(c+=2,l+=2,h!==f&&(m=d,g=f)):d===null||u!==null&&u<d?(c+=2,m=u):(l+=2,m=d,g=f),m!==null&&G0(t,e,n,r,m,g,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}function G0(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=WU(l)?HD(c,e,n,i,Io(l),o):void 0;if(!Ed(u)){Ed(s)||zU(l)&&(s=HD(c,null,n,i,a,o));let d=wb(Hi(),n);hV(r,o,d,i,s)}}function HD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===ti&&(h=d?Ot:void 0);let f=d?Cm(h,r):u===r?h:void 0;if(l&&!Ed(f)&&(f=Cm(c,r)),Ed(f)&&(a=f,o))return a;let m=t[i+1];i=o?ji(m):Io(m)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Cm(c,r))}return a}function Ed(t){return t!==void 0}function uj(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Nt(Bn(t)))),t}function W0(t,e){return(t.flags&(e?8:16))!==0}function dj(t,e,n,r,i,s){let o=e.consts,a=wo(o,i),c=hc(e,t,2,r,a);return ly(e,n,c,wo(o,s)),c.attrs!==null&&_d(c,c.attrs,!1),c.mergedAttrs!==null&&_d(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function D(t,e,n,r){let i=Ee(),s=ht(),o=pr+t,a=i[Fe],c=s.firstCreatePass?dj(o,s,i,e,n,r):s.data[o],l=hj(s,i,c,a,e,t);i[o]=l;let u=Nd(c);return $i(c,!0),E0(a,l,c),!jU(c)&&Pd()&&Ld(s,i,l,c),kF()===0&&Yr(l,i),FF(),u&&(sy(s,i,c),iy(s,c,i)),r!==null&&oy(i,c),D}function S(){let t=kt();Hg()?bb():(t=t.parent,$i(t,!1));let e=t;UF(e)&&jF(),LF();let n=ht();return n.firstCreatePass&&(Od(n,t),Vg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&ZF(e)&&Cg(n,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&XF(e)&&Cg(n,e,Ee(),e.stylesWithoutHost,!1),S}function ve(t,e,n,r){return D(t,e,n,r),S(),ve}var hj=(t,e,n,r,i,s)=>(xd(!0),p0(r,i,KF()));function fj(t,e,n,r,i){let s=e.consts,o=wo(s,r),a=hc(e,t,8,"ng-container",o);o!==null&&_d(a,o,!0);let c=wo(s,i);return ly(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Hd(t,e,n){let r=Ee(),i=ht(),s=t+pr,o=i.firstCreatePass?fj(s,i,r,e,n):i.data[s];$i(o,!0);let a=pj(i,r,o,t);return r[s]=a,Pd()&&Ld(i,r,a,o),Yr(a,r),Nd(o)&&(sy(i,r,o),iy(i,o,r)),n!=null&&oy(r,o),Hd}function qd(){let t=kt(),e=ht();return Hg()?bb():(t=t.parent,$i(t,!1)),e.firstCreatePass&&(Od(e,t),Vg(t)&&e.queries.elementEnd(t)),qd}var pj=(t,e,n,r)=>(xd(!0),KL(e[Fe],""));function yy(){return Ee()}function _y(t,e,n){let r=Ee(),i=lc();if(zi(r,i,e)){let s=ht(),o=Md(),a=Ab(s.data),c=jV(a,o,r);cy(s,o,r,t,e,c,n,!0)}return _y}var Id="en-US";var mj=Id;function gj(t){typeof t=="string"&&(mj=t.toLowerCase().replace(/_/g,"-"))}function He(t,e,n,r){let i=Ee(),s=ht(),o=kt();return K0(s,i,i[Fe],o,t,e,r),He}function yj(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Za],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function K0(t,e,n,r,i,s,o){let a=Nd(r),l=t.firstCreatePass&&UV(t),u=e[_n],d=VV(e),h=!0;if(r.type&3||o){let g=sn(r,e),y=o?o(g):g,v=d.length,N=o?$=>o(Un($[r.index])):r.index,M=null;if(!o&&a&&(M=yj(t,e,i,r.index)),M!==null){let $=M.__ngLastListenerFn__||M;$.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,h=!1}else{s=zD(r,e,u,s,!1);let $=n.listen(y,i,s);d.push(s,$),l&&l.push(i,N,v,v+1)}}else s=zD(r,e,u,s,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let g=m.length;if(g)for(let y=0;y<g;y+=2){let v=m[y],N=m[y+1],Ne=e[v][N].subscribe(s),Y=d.length;d.push(s,Ne),l&&l.push(i,r.index,Y,-(Y+1))}}}function qD(t,e,n,r){let i=ge(null);try{return kn(6,e,n),n(r)!==!1}catch(s){return M0(t,s),!1}finally{kn(7,e,n),ge(i)}}function zD(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Zr(t.index,e):e;hy(a);let c=qD(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=qD(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Ht(t=1){return WF(t)}function L(t,e=""){let n=Ee(),r=ht(),i=t+pr,s=r.firstCreatePass?hc(r,i,1,e,null):r.data[i],o=_j(r,n,s,e,t);n[i]=o,Pd()&&Ld(r,n,o,s),$i(s,!1)}var _j=(t,e,n,r,i)=>(xd(!0),GL(e[Fe],r));function ri(t,e,n){let r=Ee(),i=qU(r,t,e,n);return i!==ti&&BV(r,Hi(),i),ri}function Wi(t,e,n){j0(e)&&(e=e());let r=Ee(),i=lc();if(zi(r,i,e)){let s=ht(),o=Md();cy(s,o,r,t,e,r[Fe],n,!1)}return Wi}function Mo(t,e){let n=j0(t);return n&&t.set(e),n}function Ki(t,e){let n=Ee(),r=ht(),i=kt();return K0(r,n,n[Fe],i,t,e),Ki}function vj(t,e,n){let r=ht();if(r.firstCreatePass){let i=mr(t);Dg(n,r.data,r.blueprint,i,!0),Dg(e,r.data,r.blueprint,i,!1)}}function Dg(t,e,n,r,i){if(t=At(t),Array.isArray(t))for(let s=0;s<t.length;s++)Dg(t[s],e,n,r,i);else{let s=ht(),o=Ee(),a=kt(),c=yo(t)?t:At(t.provide),l=pb(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(yo(t)||!t.multi){let f=new Li(l,i,te),m=Lm(c,e,i?u:u+h,d);m===-1?(Jm(pd(a,o),s,c),Fm(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[m]=f,o[m]=f)}else{let f=Lm(c,e,u+h,d),m=Lm(c,e,u,u+h),g=f>=0&&n[f],y=m>=0&&n[m];if(i&&!y||!i&&!g){Jm(pd(a,o),s,c);let v=Ij(i?Ej:wj,n.length,i,r,l);!i&&y&&(n[m].providerFactory=v),Fm(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)}else{let v=Q0(n[i?m:f],l,!i&&r);Fm(s,t,f>-1?f:m,v)}!i&&r&&y&&n[m].componentProviders++}}}function Fm(t,e,n,r){let i=yo(e),s=fF(e);if(i||s){let c=(s?At(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Q0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function wj(t,e,n,r){return bg(this.multi,[])}function Ej(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Eo(n,n[oe],this.providerFactory.index,r);s=a.slice(0,o),bg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],bg(i,s);return s}function bg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Ij(t,e,n,r,i){let s=new Li(t,n,te);return s.multi=[],s.index=e,s.componentProviders=0,Q0(s,i,r&&!n),s}function vy(t,e=[]){return n=>{n.providersResolver=(r,i)=>vj(r,i?i(t):t,e)}}var Tj=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=db(!1,r.type),s=i.length>0?my([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(x(rn))});let t=e;return t})();function qe(t){Bd("NgStandalone"),t.getStandaloneInjector=e=>e.get(Tj).getOrCreateStandaloneInjector(t)}var vr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Y0=new vr("17.3.6"),zd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var J0=new F("");function Qi(t){return!!t&&typeof t.then=="function"}function Z0(t){return!!t&&typeof t.subscribe=="function"}var X0=new F(""),eS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=b(X0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Qi(o))r.push(o);else if(Z0(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wy=new F("");function Cj(){LC(()=>{throw new E(600,!1)})}function Dj(t){return t.isBoundToModule}function bj(t,e,n){try{let r=n();return Qi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Tr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=b(Wb),this.afterRenderEffectManager=b(V0),this.externalTestViews=new Set,this.beforeRender=new xe,this.afterTick=new xe,this.componentTypes=[],this.components=[],this.isStable=b($d).hasPendingTasks.pipe(Z(r=>!r)),this._injector=b(rn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof yd;if(!this._injector.get(eS).done){let f=!s&&ab(r),m=!1;throw new E(405,m)}let a;s?a=r:a=this._injector.get(So).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Dj(a)?void 0:this._injector.get(Jr),l=i||a.selector,u=a.create(nt.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(J0,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Vm(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new E(101,!1);let i=ge(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,ge(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===x0)throw new E(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)Sj(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sg(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sg(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Vm(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(wy,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Vm(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new E(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Vm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Sj(t,e,n){!e&&!Sg(t)||Aj(t,n,e)}function Sg(t){return jg(t)}function Aj(t,e,n){let r;n?(r=0,t[H]|=1024):t[H]&64?r=0:r=1,O0(t,e,r)}var Ag=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ey=(()=>{let e=class e{compileModuleSync(r){return new Eg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=cb(r),o=f0(s.declarations).reduce((a,c)=>{let l=xi(c);return l&&a.push(new rc(l)),a},[]);return new Ag(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Rj=(()=>{let e=class e{constructor(){this.zone=b(ae),this.applicationRef=b(Tr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Nj(t){return[{provide:ae,useFactory:t},{provide:go,multi:!0,useFactory:()=>{let e=b(Rj,{optional:!0});return()=>e.initialize()}},{provide:go,multi:!0,useFactory:()=>{let e=b(Oj);return()=>{e.initialize()}}},{provide:Wb,useFactory:Mj}]}function Mj(){let t=b(ae),e=b(gr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Pj(t){let e=Nj(()=>new ae(xj(t)));return To([[],e])}function xj(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Oj=(()=>{let e=class e{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=b(ae),this.pendingTasks=b($d)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ae.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kj(){return typeof $localize<"u"&&$localize.locale||Id}var Iy=new F("",{providedIn:"root",factory:()=>b(Iy,X.Optional|X.SkipSelf)||kj()});var tS=new F("");var id=null;function Fj(t=[],e){return nt.create({name:e,providers:[{provide:bd,useValue:"platform"},{provide:tS,useValue:new Set([()=>id=null])},...t]})}function Lj(t=[]){if(id)return id;let e=Fj(t);return id=e,Cj(),Vj(e),e}function Vj(t){t.get(Kg,null)?.forEach(n=>n())}var Yi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Uj;let t=e;return t})();function Uj(t){return jj(kt(),Ee(),(t&16)===16)}function jj(t,e,n){if(Rd(t)&&!n){let r=Zr(t.index,e);return new Vi(r,r)}else if(t.type&47){let r=e[Vn];return new Vi(r,e)}return null}function nS(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Lj(r),s=[Pj(),...n||[]],a=new wd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ae);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(gr,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=i.get(tS);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),bj(l,c,()=>{let f=a.get(eS);return f.runInitializers(),f.donePromise.then(()=>{let m=a.get(Iy,Id);gj(m||Id);let g=a.get(Tr);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function Gd(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var oS=null;function Cr(){return oS}function aS(t){oS??=t}var Wd=class{};var rt=new F(""),cS=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>b(Hj),providedIn:"platform"});let t=e;return t})();var Hj=(()=>{let e=class e extends cS{constructor(){super(),this._doc=b(rt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cr().getBaseHref(this._doc)}onPopState(r){let i=Cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function lS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function rS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ji(t){return t&&t[0]!=="?"?"?"+t:t}var Qd=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>b(uS),providedIn:"root"});let t=e;return t})(),qj=new F(""),uS=(()=>{let e=class e extends Qd{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??b(rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return lS(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ji(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ji(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ji(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(cS),x(qj,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pc=(()=>{let e=class e{constructor(r){this._subject=new Rt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Wj(rS(iS(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ji(i))}normalize(r){return e.stripTrailingSlash(Gj(this._basePath,iS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ji(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ji(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Ji,e.joinWithSlash=lS,e.stripTrailingSlash=rS,e.\u0275fac=function(i){return new(i||e)(x(Qd))},e.\u0275prov=P({token:e,factory:()=>zj(),providedIn:"root"});let t=e;return t})();function zj(){return new pc(x(Qd))}function Gj(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function iS(t){return t.replace(/\/index.html$/,"")}function Wj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function dS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Cy=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ty,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){sS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){sS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(te(fc),te(fy))},e.\u0275dir=wn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ty=class{constructor(){this.$implicit=null,this.ngIf=null}};function sS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Nt(e)}'.`)}var Dy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({});let t=e;return t})(),hS="browser",Kj="server";function by(t){return t===Kj}var Kd=class{};var Ry=class extends Wd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ny=class t extends Ry{static makeCurrent(){aS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Qj();return n==null?null:Yj(n)}resetBaseElement(){mc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dS(document.cookie,e)}},mc=null;function Qj(){return mc=mc||document.querySelector("base"),mc?mc.getAttribute("href"):null}function Yj(t){return new URL(t,document.baseURI).pathname}var Jj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),My=new F(""),mS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new E(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(x(My),x(ae))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Yd=class{constructor(e){this._doc=e}},Sy="ng-app-id",gS=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=by(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Sy}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Sy),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Sy,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(x(rt),x(Wg),x(Yg,8),x(ei))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),Ay={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xy=/%COMP%/g,yS="%COMP%",Zj=`_nghost-${yS}`,Xj=`_ngcontent-${yS}`,e2=!0,t2=new F("",{providedIn:"root",factory:()=>e2});function n2(t){return Xj.replace(xy,t)}function r2(t){return Zj.replace(xy,t)}function _S(t,e){return e.map(n=>n.replace(xy,t))}var Jd=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=by(c),this.defaultRenderer=new gc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ln.ShadowDom&&(i=le(I({},i),{encapsulation:Ln.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Zd?s.applyToHost(r):s instanceof yc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Ln.Emulated:o=new Zd(l,u,i,this.appId,d,a,c,h);break;case Ln.ShadowDom:return new Py(l,u,r,i,a,c,this.nonce,h);default:o=new yc(l,u,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(x(mS),x(gS),x(Wg),x(t2),x(rt),x(ei),x(ae),x(Yg))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),gc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ay[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(fS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(fS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Ay[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ay[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_r.DashCase|_r.Important)?e.style.setProperty(n,r,i&_r.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_r.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Cr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function fS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Py=class extends gc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=_S(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yc=class extends gc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?_S(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Zd=class extends yc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=n2(l),this.hostAttr=r2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},i2=(()=>{let e=class e extends Yd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(x(rt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),pS=["alt","control","meta","shift"],s2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},o2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},a2=(()=>{let e=class e extends Yd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),pS.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=s2[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),pS.forEach(a=>{if(a!==s){let c=o2[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(x(rt))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function vS(t,e){return nS(I({rootComponent:t},c2(e)))}function c2(t){return{appProviders:[...f2,...t?.providers??[]],platformProviders:h2}}function l2(){Ny.makeCurrent()}function u2(){return new gr}function d2(){return e0(document),document}var h2=[{provide:ei,useValue:hS},{provide:Kg,useValue:l2,multi:!0},{provide:rt,useFactory:d2,deps:[]}];var f2=[{provide:bd,useValue:"root"},{provide:gr,useFactory:u2,deps:[]},{provide:My,useClass:i2,multi:!0,deps:[rt,ae,ei]},{provide:My,useClass:a2,multi:!0,deps:[rt]},Jd,gS,mS,{provide:Ui,useExisting:Jd},{provide:Kd,useClass:Jj,deps:[]},[]];var wS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(x(rt))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Oy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=x(p2),s},providedIn:"root"});let t=e;return t})(),p2=(()=>{let e=class e extends Oy{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case In.NONE:return i;case In.HTML:return qi(i,"HTML")?Bn(i):Xg(this._doc,String(i)).toString();case In.STYLE:return qi(i,"Style")?Bn(i):i;case In.SCRIPT:if(qi(i,"Script"))return Bn(i);throw new E(5200,!1);case In.URL:return qi(i,"URL")?Bn(i):Zg(String(i));case In.RESOURCE_URL:if(qi(i,"ResourceURL"))return Bn(i);throw new E(5201,!1);default:throw new E(5202,!1)}}bypassSecurityTrustHtml(r){return r0(r)}bypassSecurityTrustStyle(r){return i0(r)}bypassSecurityTrustScript(r){return s0(r)}bypassSecurityTrustUrl(r){return o0(r)}bypassSecurityTrustResourceUrl(r){return a0(r)}};e.\u0275fac=function(i){return new(i||e)(x(rt))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var J="primary",Pc=Symbol("RouteTitle"),Uy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fo(t){return new Uy(t)}function m2(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function g2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!$n(t[n],e[n]))return!1;return!0}function $n(t,e){let n=t?jy(t):void 0,r=e?jy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!SS(t[i],e[i]))return!1;return!0}function jy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function SS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function AS(t){return t.length>0?t[t.length-1]:null}function oi(t){return _m(t)?t:Qi(t)?ke(Promise.resolve(t)):W(t)}var y2={exact:NS,subset:MS},RS={exact:_2,subset:v2,ignored:()=>!0};function IS(t,e,n){return y2[n.paths](t.root,e.root,n.matrixParams)&&RS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function _2(t,e){return $n(t,e)}function NS(t,e,n){if(!Xi(t.segments,e.segments)||!th(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!NS(t.children[r],e.children[r],n))return!1;return!0}function v2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>SS(t[n],e[n]))}function MS(t,e,n){return PS(t,e,e.segments,n)}function PS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Xi(i,n)||e.hasChildren()||!th(i,n,r))}else if(t.segments.length===n.length){if(!Xi(t.segments,n)||!th(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!MS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Xi(t.segments,i)||!th(t.segments,i,r)||!t.children[J]?!1:PS(t.children[J],e,s,r)}}function th(t,e,n){return e.every((r,i)=>RS[n](t[i].parameters,r.parameters))}var ii=class{constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fo(this.queryParams),this._queryParamMap}toString(){return I2.serialize(this)}},_e=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nh(this)}},Zi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Fo(this.parameters),this._parameterMap}toString(){return OS(this)}};function w2(t,e){return Xi(t,e)&&t.every((n,r)=>$n(n.parameters,e[r].parameters))}function Xi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function E2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===J&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==J&&(n=n.concat(e(i,r)))}),n}var h_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>new ih,providedIn:"root"});let t=e;return t})(),ih=class{parse(e){let n=new $y(e);return new ii(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${_c(e.root,!0)}`,r=D2(e.queryParams),i=typeof e.fragment=="string"?`#${T2(e.fragment)}`:"";return`${n}${r}${i}`}},I2=new ih;function nh(t){return t.segments.map(e=>OS(e)).join("/")}function _c(t,e){if(!t.hasChildren())return nh(t);if(e){let n=t.children[J]?_c(t.children[J],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==J&&r.push(`${i}:${_c(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=E2(t,(r,i)=>i===J?[_c(t.children[J],!1)]:[`${i}:${_c(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[J]!=null?`${nh(t)}/${n[0]}`:`${nh(t)}/(${n.join("//")})`}}function xS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xd(t){return xS(t).replace(/%3B/gi,";")}function T2(t){return encodeURI(t)}function By(t){return xS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rh(t){return decodeURIComponent(t)}function TS(t){return rh(t.replace(/\+/g,"%20"))}function OS(t){return`${By(t.path)}${C2(t.parameters)}`}function C2(t){return Object.entries(t).map(([e,n])=>`;${By(e)}=${By(n)}`).join("")}function D2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Xd(n)}=${Xd(i)}`).join("&"):`${Xd(n)}=${Xd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var b2=/^[^\/()?;#]+/;function ky(t){let e=t.match(b2);return e?e[0]:""}var S2=/^[^\/()?;=#]+/;function A2(t){let e=t.match(S2);return e?e[0]:""}var R2=/^[^=?&#]+/;function N2(t){let e=t.match(R2);return e?e[0]:""}var M2=/^[^&#]+/;function P2(t){let e=t.match(M2);return e?e[0]:""}var $y=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[J]=new _e(e,n)),r}parseSegment(){let e=ky(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new Zi(rh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=A2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ky(this.remaining);i&&(r=i,this.capture(r))}e[rh(n)]=rh(r)}parseQueryParam(e){let n=N2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=P2(this.remaining);o&&(r=o,this.capture(r))}let i=TS(n),s=TS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ky(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=J);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[J]:new _e([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function kS(t){return t.segments.length>0?new _e([],{[J]:t}):t}function FS(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=FS(i);if(r===J&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new _e(t.segments,e);return x2(n)}function x2(t){if(t.numberOfChildren===1&&t.children[J]){let e=t.children[J];return new _e(t.segments.concat(e.segments),e.children)}return t}function Lo(t){return t instanceof ii}function O2(t,e,n=null,r=null){let i=LS(t);return VS(i,e,n,r)}function LS(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new _e(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=kS(r);return e??i}function VS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Fy(i,i,i,n,r);let s=k2(e);if(s.toRoot())return Fy(i,i,new _e([],{}),n,r);let o=F2(s,i,t),a=o.processChildren?Ec(o.segmentGroup,o.index,s.commands):jS(o.segmentGroup,o.index,s.commands);return Fy(i,o.segmentGroup,a,n,r)}function sh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Cc(t){return typeof t=="object"&&t!=null&&t.outlets}function Fy(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=US(t,e,n);let a=kS(FS(o));return new ii(a,s,i)}function US(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=US(s,e,n)}),new _e(t.segments,r)}var oh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&sh(r[0]))throw new E(4003,!1);let i=r.find(Cc);if(i&&i!==AS(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function k2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new oh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new oh(n,e,r)}var Oo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function F2(t,e,n){if(t.isAbsolute)return new Oo(e,!0,0);if(!n)return new Oo(e,!1,NaN);if(n.parent===null)return new Oo(n,!0,0);let r=sh(t.commands[0])?0:1,i=n.segments.length-1+r;return L2(n,i,t.numberOfDoubleDots)}function L2(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Oo(r,!1,i-s)}function V2(t){return Cc(t[0])?t[0].outlets:{[J]:t}}function jS(t,e,n){if(t??=new _e([],{}),t.segments.length===0&&t.hasChildren())return Ec(t,e,n);let r=U2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new _e(t.segments.slice(0,r.pathIndex),{});return s.children[J]=new _e(t.segments.slice(r.pathIndex),t.children),Ec(s,0,i)}else return r.match&&i.length===0?new _e(t.segments,{}):r.match&&!t.hasChildren()?Hy(t,e,n):r.match?Ec(t,0,i):Hy(t,e,n)}function Ec(t,e,n){if(n.length===0)return new _e(t.segments,{});{let r=V2(n),i={};if(Object.keys(r).some(s=>s!==J)&&t.children[J]&&t.numberOfChildren===1&&t.children[J].segments.length===0){let s=Ec(t.children[J],e,n);return new _e(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=jS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new _e(t.segments,i)}}function U2(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Cc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!DS(c,l,o))return s;r+=2}else{if(!DS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Cc(s)){let c=j2(s.outlets);return new _e(r,c)}if(i===0&&sh(n[0])){let c=t.segments[e];r.push(new Zi(c.path,CS(n[0]))),i++;continue}let o=Cc(s)?s.outlets[J]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&sh(a)?(r.push(new Zi(o,CS(a))),i+=2):(r.push(new Zi(o,{})),i++)}return new _e(r,{})}function j2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Hy(new _e([],{}),0,r))}),e}function CS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function DS(t,e,n){return t==n.path&&$n(e,n.parameters)}var Ic="imperative",ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ft||{}),on=class{constructor(e,n){this.id=e,this.url=n}},Dc=class extends on{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},es=class extends on{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(zt||{}),qy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(qy||{}),si=class extends on{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ts=class extends on{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationSkipped}},bc=class extends on{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ah=class extends on{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends on{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gy=class extends on{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wy=class extends on{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ky=class extends on{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qy=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yy=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jy=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zy=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e_=class{constructor(e){this.snapshot=e,this.type=ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Sc=class{},Ac=class{constructor(e){this.url=e}};var t_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fh,this.attachRef=null}},fh=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new t_,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ch=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=n_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=n_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=r_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return r_(e,this._root).map(n=>n.value)}};function n_(t,e){if(t===e.value)return e;for(let n of e.children){let r=n_(t,n);if(r)return r}return null}function r_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=r_(t,n);if(r.length)return r.unshift(e),r}return[]}var qt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function xo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var lh=class extends ch{constructor(e,n){super(e),this.snapshot=n,p_(this,e)}toString(){return this.snapshot.toString()}};function BS(t){let e=B2(t),n=new lt([new Zi("",{})]),r=new lt({}),i=new lt({}),s=new lt({}),o=new lt(""),a=new Vo(n,r,s,o,i,J,t,e.root);return a.snapshot=e.root,new lh(new qt(a,[]),e)}function B2(t){let e={},n={},r={},i="",s=new Rc([],e,r,i,n,J,t,null,{});return new uh("",new qt(s,[]))}var Vo=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(l=>l[Pc]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>Fo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>Fo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function f_(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&HS(i)&&(r.resolve[Pc]=i.title),r}var Rc=class{get title(){return this.data?.[Pc]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},uh=class extends ch{constructor(e,n){super(n),this.url=e,p_(this,n)}toString(){return $S(this._root)}};function p_(t,e){e.value._routerState=t,e.children.forEach(n=>p_(t,n))}function $S(t){let e=t.children.length>0?` { ${t.children.map($S).join(", ")} } `:"";return`${t.value}${e}`}function Ly(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$n(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),$n(e.params,n.params)||t.paramsSubject.next(n.params),g2(e.url,n.url)||t.urlSubject.next(n.url),$n(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function i_(t,e){let n=$n(t.params,e.params)&&w2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||i_(t.parent,e.parent))}function HS(t){return typeof t.title=="string"||t.title===null}var m_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=J,this.activateEvents=new Rt,this.deactivateEvents=new Rt,this.attachEvents=new Rt,this.detachEvents=new Rt,this.parentContexts=b(fh),this.location=b(fc),this.changeDetector=b(Yi),this.environmentInjector=b(rn),this.inputBinder=b(g_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new s_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=wn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[bo]});let t=e;return t})(),s_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Vo?this.route:e===fh?this.childContexts:this.parent.get(e,n)}},g_=new F("");function $2(t,e,n){let r=Nc(t,e._root,n?n._root:void 0);return new lh(r,e)}function Nc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=H2(t,e,n);return new qt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Nc(t,a)),o}}let r=q2(e.value),i=e.children.map(s=>Nc(t,s));return new qt(r,i)}}function H2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Nc(t,r,i);return Nc(t,r)})}function q2(t){return new Vo(new lt(t.url),new lt(t.params),new lt(t.queryParams),new lt(t.fragment),new lt(t.data),t.outlet,t.component,t)}var qS="ngNavigationCancelingError";function zS(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Lo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GS(!1,zt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function GS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[qS]=!0,n.cancellationCode=e,n}function z2(t){return WS(t)&&Lo(t.url)}function WS(t){return!!t&&t[qS]}var G2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["ng-component"]],standalone:!0,features:[qe],decls:1,vars:0,template:function(i,s){i&1&&ve(0,"router-outlet")},dependencies:[m_],encapsulation:2});let t=e;return t})();function W2(t,e){return t.providers&&!t._injector&&(t._injector=my(t.providers,e,`Route: ${t.path}`)),t._injector??e}function y_(t){let e=t.children&&t.children.map(y_),n=e?le(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==J&&(n.component=G2),n}function Hn(t){return t.outlet||J}function K2(t,e){let n=t.filter(r=>Hn(r)===e);return n.push(...t.filter(r=>Hn(r)!==e)),n}function xc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Q2=(t,e,n,r)=>Z(i=>(new o_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),o_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ly(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=xo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=xo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=xo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new e_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Ly(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ly(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=xc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},dh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ko=class{constructor(e,n){this.component=e,this.route=n}};function Y2(t,e,n){let r=t._root,i=e?e._root:null;return vc(r,i,n,[r.value])}function J2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function jo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!KD(t)?t:e.get(t):r}function vc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=xo(e);return t.children.forEach(o=>{Z2(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Tc(a,n.getContext(o),i)),i}function Z2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=X2(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new dh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?vc(t,e,a?a.children:null,r,i):vc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ko(a.outlet.component,o))}else o&&Tc(e,a,i),i.canActivateChecks.push(new dh(r)),s.component?vc(t,null,a?a.children:null,r,i):vc(t,null,n,r,i);return i}function X2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Xi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Xi(t.url,e.url)||!$n(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!i_(t,e)||!$n(t.queryParams,e.queryParams);case"paramsChange":default:return!i_(t,e)}}function Tc(t,e,n){let r=xo(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Tc(o,e.children.getContext(s),n):Tc(o,null,n):Tc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ko(e.outlet.component,i)):n.canDeactivateChecks.push(new ko(null,i)):n.canDeactivateChecks.push(new ko(null,i))}function Oc(t){return typeof t=="function"}function eB(t){return typeof t=="boolean"}function tB(t){return t&&Oc(t.canLoad)}function nB(t){return t&&Oc(t.canActivate)}function rB(t){return t&&Oc(t.canActivateChild)}function iB(t){return t&&Oc(t.canDeactivate)}function sB(t){return t&&Oc(t.canMatch)}function KS(t){return t instanceof dr||t?.name==="EmptyError"}var eh=Symbol("INITIAL_VALUE");function Uo(){return pn(t=>Hu(t.map(e=>e.pipe(hr(1),Wu(eh)))).pipe(Z(e=>{for(let n of e)if(n!==!0){if(n===eh)return eh;if(n===!1||n instanceof ii)return n}return!0}),Xt(e=>e!==eh),hr(1)))}function oB(t,e){return Qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?W(le(I({},n),{guardsResult:!0})):aB(o,r,i,t).pipe(Qe(a=>a&&eB(a)?cB(r,s,t,e):W(a)),Z(a=>le(I({},n),{guardsResult:a})))})}function aB(t,e,n,r){return ke(t).pipe(Qe(i=>fB(i.component,i.route,n,e,r)),On(i=>i!==!0,!0))}function cB(t,e,n,r){return ke(e).pipe(oo(i=>so(uB(i.route.parent,r),lB(i.route,r),hB(t,i.path,n),dB(t,i.route,n))),On(i=>i!==!0,!0))}function lB(t,e){return t!==null&&e&&e(new Xy(t)),W(!0)}function uB(t,e){return t!==null&&e&&e(new Jy(t)),W(!0)}function dB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(s=>qu(()=>{let o=xc(e)??n,a=jo(s,o),c=nB(a)?a.canActivate(e,t):Bi(o,()=>a(e,t));return oi(c).pipe(On())}));return W(i).pipe(Uo())}function hB(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>J2(o)).filter(o=>o!==null).map(o=>qu(()=>{let a=o.guards.map(c=>{let l=xc(o.node)??n,u=jo(c,l),d=rB(u)?u.canActivateChild(r,t):Bi(l,()=>u(r,t));return oi(d).pipe(On())});return W(a).pipe(Uo())}));return W(s).pipe(Uo())}function fB(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(a=>{let c=xc(e)??i,l=jo(a,c),u=iB(l)?l.canDeactivate(t,e,n,r):Bi(c,()=>l(t,e,n,r));return oi(u).pipe(On())});return W(o).pipe(Uo())}function pB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let s=i.map(o=>{let a=jo(o,t),c=tB(a)?a.canLoad(e,n):Bi(t,()=>a(e,n));return oi(c)});return W(s).pipe(Uo(),QS(r))}function QS(t){return Cu(Ye(e=>{if(Lo(e))throw zS(t,e)}),Z(e=>e===!0))}function mB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let s=i.map(o=>{let a=jo(o,t),c=sB(a)?a.canMatch(e,n):Bi(t,()=>a(e,n));return oi(c)});return W(s).pipe(Uo(),QS(r))}var Mc=class{constructor(e){this.segmentGroup=e||null}},hh=class extends Error{constructor(e){super(),this.urlTree=e}};function Po(t){return io(new Mc(t))}function gB(t){return io(new E(4e3,!1))}function yB(t){return io(GS(!1,zt.GuardRejected))}var a_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[J])return gB(e.redirectTo);i=i.children[J]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new hh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ii(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new _e(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},c_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _B(t,e,n,r,i){let s=__(t,e,n);return s.matched?(r=W2(e,r),mB(r,e,n,i).pipe(Z(o=>o===!0?s:I({},c_)))):W(s)}function __(t,e,n){if(e.path==="**")return vB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},c_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||m2)(n,t,e);if(!i)return I({},c_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?I(I({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function vB(t){return{matched:!0,parameters:t.length>0?AS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function bS(t,e,n,r){return n.length>0&&IB(t,n,r)?{segmentGroup:new _e(e,EB(r,new _e(n,t.children))),slicedSegments:[]}:n.length===0&&TB(t,n,r)?{segmentGroup:new _e(t.segments,wB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function wB(t,e,n,r){let i={};for(let s of n)if(ph(t,e,s)&&!r[Hn(s)]){let o=new _e([],{});i[Hn(s)]=o}return I(I({},r),i)}function EB(t,e){let n={};n[J]=e;for(let r of t)if(r.path===""&&Hn(r)!==J){let i=new _e([],{});n[Hn(r)]=i}return n}function IB(t,e,n){return n.some(r=>ph(t,e,r)&&Hn(r)!==J)}function TB(t,e,n){return n.some(r=>ph(t,e,r))}function ph(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CB(t,e,n,r){return Hn(t)!==r&&(r===J||!ph(e,n,t))?!1:__(e,t,n).matched}function DB(t,e,n){return e.length===0&&!t.children[n]}var l_=class{};function bB(t,e,n,r,i,s,o="emptyOnly"){return new u_(t,e,n,r,i,o,s).recognize()}var SB=31,u_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new a_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}recognize(){let e=bS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(n=>{let r=new Rc([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},J,this.rootComponentType,null,{}),i=new qt(r,n),s=new uh("",i),o=O2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,J).pipe(Gr(r=>{if(r instanceof hh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=f_(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Z(s=>s instanceof qt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ke(i).pipe(oo(s=>{let o=r.children[s],a=K2(n,s);return this.processSegmentGroup(e,a,o,s)}),Gu((s,o)=>(s.push(...o),s)),Wr(null),Im(),Qe(s=>{if(s===null)return Po(r);let o=YS(s);return AB(o),W(o)}))}processSegment(e,n,r,i,s,o){return ke(n).pipe(oo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Gr(c=>{if(c instanceof Mc)return W(null);throw c}))),On(a=>!!a),Gr(a=>{if(KS(a))return DB(r,i,s)?W(new l_):Po(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return CB(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Po(i):Po(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=__(n,i,s);if(!a)return Po(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SB&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(Qe(h=>this.processSegment(e,r,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=_B(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(pn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(pn(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Rc(u,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,NB(r),Hn(r),r.component??r._loadedComponent??null,r,MB(r)),{segmentGroup:m,slicedSegments:g}=bS(n,u,d,c);if(g.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(Z(v=>v===null?null:new qt(f,v)));if(c.length===0&&g.length===0)return W(new qt(f,[]));let y=Hn(r)===s;return this.processSegment(l,c,m,g,y?J:s,!0).pipe(Z(v=>new qt(f,v instanceof qt?[v]:[])))}))):Po(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?W({routes:n._loadedRoutes,injector:n._loadedInjector}):pB(e,n,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ye(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):yB(n))):W({routes:[],injector:e})}};function AB(t){t.sort((e,n)=>e.value.outlet===J?-1:n.value.outlet===J?1:e.value.outlet.localeCompare(n.value.outlet))}function RB(t){let e=t.value.routeConfig;return e&&e.path===""}function YS(t){let e=[],n=new Set;for(let r of t){if(!RB(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=YS(r.children);e.push(new qt(r.value,i))}return e.filter(r=>!n.has(r))}function NB(t){return t.data||{}}function MB(t){return t.resolve||{}}function PB(t,e,n,r,i,s){return Qe(o=>bB(t,e,n,r,o.extractedUrl,i,s).pipe(Z(({state:a,tree:c})=>le(I({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function xB(t,e){return Qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of JS(c))o.add(l);let a=0;return ke(o).pipe(oo(c=>s.has(c)?OB(c,r,t,e):(c.data=f_(c,c.parent,t).resolve,W(void 0))),Ye(()=>a++),ao(1),Qe(c=>a===o.size?W(n):$t))})}function JS(t){let e=t.children.map(n=>JS(n)).flat();return[t,...e]}function OB(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!HS(i)&&(s[Pc]=i.title),kB(s,t,e,r).pipe(Z(o=>(t._resolvedData=o,t.data=f_(t,t.parent,n).resolve,null)))}function kB(t,e,n,r){let i=jy(t);if(i.length===0)return W({});let s={};return ke(i).pipe(Qe(o=>FB(t[o],e,n,r).pipe(On(),Ye(a=>{s[o]=a}))),ao(1),Em(s),Gr(o=>KS(o)?$t:io(o)))}function FB(t,e,n,r){let i=xc(e)??r,s=jo(t,i),o=s.resolve?s.resolve(e,n):Bi(i,()=>s(e,n));return oi(o)}function Vy(t){return pn(e=>{let n=t(e);return n?ke(n).pipe(Z(()=>e)):W(e)})}var ZS=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===J);return i}getResolvedTitleForRoute(r){return r.data[Pc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>b(LB),providedIn:"root"});let t=e;return t})(),LB=(()=>{let e=class e extends ZS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(x(wS))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),v_=new F("",{providedIn:"root",factory:()=>({})}),w_=new F(""),VB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(Ey)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=oi(r.loadComponent()).pipe(Z(XS),Ye(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Wa(()=>{this.componentLoaders.delete(r)})),s=new eo(i,()=>new xe).pipe(Xs());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return W({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=UB(i,this.compiler,r,this.onLoadEndListener).pipe(Wa(()=>{this.childrenLoaders.delete(i)})),a=new eo(o,()=>new xe).pipe(Xs());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UB(t,e,n,r){return oi(t.loadChildren()).pipe(Z(XS),Qe(i=>i instanceof ic||Array.isArray(i)?W(i):ke(e.compileModuleAsync(i))),Z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(w_,[],{optional:!0,self:!0}).flat()),{routes:o.map(y_),injector:s}}))}function jB(t){return t&&typeof t=="object"&&"default"in t}function XS(t){return jB(t)?t.default:t}var E_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>b(BB),providedIn:"root"});let t=e;return t})(),BB=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$B=new F("");var HB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xe,this.transitionAbortSubject=new xe,this.configLoader=b(VB),this.environmentInjector=b(rn),this.urlSerializer=b(h_),this.rootContexts=b(fh),this.location=b(pc),this.inputBindingEnabled=b(g_,{optional:!0})!==null,this.titleStrategy=b(ZS),this.options=b(v_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(E_),this.createViewTransition=b($B,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Qy(s)),i=s=>this.events.next(new Yy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(le(I(I({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new lt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ic,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xt(o=>o.id!==0),Z(o=>le(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pn(o=>{let a=!1,c=!1;return W(o).pipe(pn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",zt.SupersededByNewNavigation),$t;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?le(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new ts(l.id,this.urlSerializer.serialize(l.rawUrl),h,qy.IgnoredSameUrlNavigation)),l.resolve(null),$t}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return W(l).pipe(pn(h=>{let f=this.transitions?.getValue();return this.events.next(new Dc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?$t:Promise.resolve(h)}),PB(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=le(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new ah(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:g,extras:y}=l,v=new Dc(h,this.urlSerializer.serialize(f),m,g);this.events.next(v);let N=BS(this.rootComponentType).snapshot;return this.currentTransition=o=le(I({},l),{targetSnapshot:N,urlAfterRedirects:f,extras:le(I({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,W(o)}else{let h="";return this.events.next(new ts(l.id,this.urlSerializer.serialize(l.extractedUrl),h,qy.IgnoredByUrlHandlingStrategy)),l.resolve(null),$t}}),Ye(l=>{let u=new zy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Z(l=>(this.currentTransition=o=le(I({},l),{guards:Y2(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),oB(this.environmentInjector,l=>this.events.next(l)),Ye(l=>{if(o.guardsResult=l.guardsResult,Lo(l.guardsResult))throw zS(this.urlSerializer,l.guardsResult);let u=new Gy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Xt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",zt.GuardRejected),!1)),Vy(l=>{if(l.guards.canActivateChecks.length)return W(l).pipe(Ye(u=>{let d=new Wy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),pn(u=>{let d=!1;return W(u).pipe(xB(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",zt.NoDataFromResolver)}}))}),Ye(u=>{let d=new Ky(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Vy(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ye(f=>{d.component=f}),Z(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Hu(u(l.targetSnapshot.root)).pipe(Wr(null),hr(1))}),Vy(()=>this.afterPreactivation()),pn(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?ke(d).pipe(Z(()=>o)):W(o)}),Z(l=>{let u=$2(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=le(I({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Ye(()=>{this.events.next(new Sc)}),Q2(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),hr(1),Ye({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new es(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Tm(this.transitionAbortSubject.pipe(Ye(l=>{throw l}))),Wa(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",zt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gr(l=>{if(c=!0,WS(l))this.events.next(new si(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),z2(l)?this.events.next(new Ac(l.url)):o.resolve(!1);else{this.events.next(new bc(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return $t}))}))}cancelNavigationTransition(r,i,s){let o=new si(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qB(t){return t!==Ic}var zB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>b(GB),providedIn:"root"});let t=e;return t})(),d_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},GB=(()=>{let e=class e extends d_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=uc(e)))(s||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:()=>b(WB),providedIn:"root"});let t=e;return t})(),WB=(()=>{let e=class e extends eA{constructor(){super(...arguments),this.location=b(pc),this.urlSerializer=b(h_),this.options=b(v_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(E_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=BS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Dc)this.stateMemento=this.createStateMemento();else if(r instanceof ts)this.rawUrlTree=i.initialUrl;else if(r instanceof ah){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Sc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof si&&(r.code===zt.GuardRejected||r.code===zt.NoDataFromResolver)?this.restoreHistory(i):r instanceof bc?this.restoreHistory(i,!0):r instanceof es&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=I(I({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=uc(e)))(s||e)}})(),e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(wc||{});function KB(t,e){t.events.pipe(Xt(n=>n instanceof es||n instanceof si||n instanceof bc||n instanceof ts),Z(n=>n instanceof es||n instanceof ts?wc.COMPLETE:(n instanceof si?n.code===zt.Redirect||n.code===zt.SupersededByNewNavigation:!1)?wc.REDIRECTING:wc.FAILED),Xt(n=>n!==wc.REDIRECTING),hr(1)).subscribe(()=>{e()})}function QB(t){throw t}var YB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(zd),this.stateManager=b(eA),this.options=b(v_,{optional:!0})||{},this.pendingTasks=b($d),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(HB),this.urlSerializer=b(h_),this.location=b(pc),this.urlHandlingStrategy=b(E_),this._events=new xe,this.errorHandler=this.options.errorHandler||QB,this.navigated=!1,this.routeReuseStrategy=b(zB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(w_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(g_,{optional:!0}),this.eventsSubscription=new Be,this.isNgZoneEnabled=b(ae)instanceof ae&&ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof si&&i.code!==zt.Redirect&&i.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof es)this.navigated=!0;else if(i instanceof Ac){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||qB(s.source)};this.scheduleNavigation(a,Ic,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}XB(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ic,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=I({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(y_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=LS(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return VS(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Lo(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ic,null,i)}navigate(r,i={skipLocationChange:!1}){return ZB(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=I({},YB):i===!1?s=I({},JB):s=i,Lo(r))return IS(this.currentUrlTree,r,s);let o=this.parseUrl(r);return IS(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return KB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}function XB(t){return!(t instanceof Sc)&&!(t instanceof Ac)}var e$=new F("");function tA(t,...e){return To([{provide:w_,multi:!0,useValue:t},[],{provide:Vo,useFactory:t$,deps:[qn]},{provide:wy,multi:!0,useFactory:n$},e.map(n=>n.\u0275providers)])}function t$(t){return t.routerState.root}function n$(){let t=b(nt);return e=>{let n=t.get(Tr);if(e!==n.components[0])return;let r=t.get(qn),i=t.get(r$);t.get(i$)===1&&r.initialNavigation(),t.get(s$,null,X.Optional)?.setUpPreloading(),t.get(e$,null,X.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var r$=new F("",{factory:()=>new xe}),i$=new F("",{providedIn:"root",factory:()=>1});var s$=new F("");var T_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var T=function(t,e){if(!t)throw rs(e)},rs=function(t){return new Error("Firebase Database ("+T_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var rA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},o$=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},yh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new C_;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},C_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},b_=function(t){let e=rA(t);return yh.encodeByteArray(e,!0)},kc=function(t){return b_(t).replace(/\./g,"")},Fc=function(t){try{return yh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iA(t){return sA(void 0,t)}function sA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!a$(n)||(t[n]=sA(t[n],e[n]));return t}function a$(t){return t!=="__proto__"}function c$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var l$=()=>c$().__FIREBASE_DEFAULTS__,u$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Fc(t[1]);return e&&JSON.parse(e)},_h=()=>{try{return l$()||u$()||d$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S_=t=>{var e,n;return(n=(e=_h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vh=t=>{let e=S_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A_=()=>{var t;return(t=_h())===null||t===void 0?void 0:t.config},R_=t=>{var e;return(e=_h())===null||e===void 0?void 0:e[`_${t}`]};var ns=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function wh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kc(JSON.stringify(n)),kc(JSON.stringify(o)),""].join(".")}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function h$(){var t;let e=(t=_h())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Eh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aA(){let t=Ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zn(){return T_.NODE_CLIENT===!0||T_.NODE_ADMIN===!0}function cA(){return!h$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N_(){try{return typeof indexedDB=="object"}catch{return!1}}function lA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var f$="FirebaseError",Gt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=f$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dr.prototype.create)}},Dr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?p$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gt(i,a,r)}};function p$(t,e){return t.replace(m$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var m$=/\{\$([^}]+)}/g;function Bo(t){return JSON.parse(t)}function it(t){return JSON.stringify(t)}var uA=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Bo(Fc(s[0])||""),n=Bo(Fc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var dA=function(t){let e=uA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},hA=function(t){let e=uA(t).claims;return typeof e=="object"&&e.admin===!0};function Gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function is(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Vc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uc(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ss(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(nA(s)&&nA(o)){if(!ss(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function nA(t){return t!==null&&typeof t=="object"}function os(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ho(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var gh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function fA(t,e){let n=new D_(t,e);return n.subscribe.bind(n)}var D_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");g$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=I_),i.error===void 0&&(i.error=I_),i.complete===void 0&&(i.complete=I_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function g$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function I_(){}function pA(t,e){return`${t} failed: ${e} argument `}var mA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,T(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jc=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var Hee=4*60*60*1e3;function Xe(t){return t&&t._delegate?t._delegate:t}var Ft=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var as="[DEFAULT]";var Ih=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ns;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_$(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function y$(t){return t===as?void 0:t}function _$(t){return t.instantiationMode==="EAGER"}var Bc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ih(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var v$=[],ee=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ee||{}),w$={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},E$=ee.INFO,I$={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},T$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=I$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wn=class{constructor(e){this.name=e,this._logLevel=E$,this._logHandler=T$,this._userLogHandler=null,v$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var C$=(t,e)=>e.some(n=>t instanceof n),gA,yA;function D$(){return gA||(gA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b$(){return yA||(yA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _A=new WeakMap,P_=new WeakMap,vA=new WeakMap,M_=new WeakMap,O_=new WeakMap;function S$(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_A.set(n,t)}).catch(()=>{}),O_.set(e,t),e}function A$(t){if(P_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});P_.set(t,e)}var x_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return P_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wA(t){x_=t(x_)}function R$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Th(this),e,...n);return vA.set(r,e.sort?e.sort():[e]),Kn(r)}:b$().includes(t)?function(...e){return t.apply(Th(this),e),Kn(_A.get(this))}:function(...e){return Kn(t.apply(Th(this),e))}}function N$(t){return typeof t=="function"?R$(t):(t instanceof IDBTransaction&&A$(t),C$(t,D$())?new Proxy(t,x_):t)}function Kn(t){if(t instanceof IDBRequest)return S$(t);if(M_.has(t))return M_.get(t);let e=N$(t);return e!==t&&(M_.set(t,e),O_.set(e,t)),e}var Th=t=>O_.get(t);function IA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Kn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Kn(o.result),c.oldVersion,c.newVersion,Kn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var M$=["get","getKey","getAll","getAllKeys","count"],P$=["put","add","delete","clear"],k_=new Map;function EA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(k_.get(e))return k_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=P$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M$.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return k_.set(e,s),s}wA(t=>le(I({},t),{get:(e,n,r)=>EA(e,n)||t.get(e,n,r),has:(e,n)=>!!EA(e,n)||t.has(e,n)}));var L_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x$(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function x$(t){let e=t.getComponent();return e?.type==="VERSION"}var V_="@firebase/app",TA="0.10.2";var cs=new Wn("@firebase/app"),O$="@firebase/app-compat",k$="@firebase/analytics-compat",F$="@firebase/analytics",L$="@firebase/app-check-compat",V$="@firebase/app-check",U$="@firebase/auth",j$="@firebase/auth-compat",B$="@firebase/database",$$="@firebase/database-compat",H$="@firebase/functions",q$="@firebase/functions-compat",z$="@firebase/installations",G$="@firebase/installations-compat",W$="@firebase/messaging",K$="@firebase/messaging-compat",Q$="@firebase/performance",Y$="@firebase/performance-compat",J$="@firebase/remote-config",Z$="@firebase/remote-config-compat",X$="@firebase/storage",eH="@firebase/storage-compat",tH="@firebase/firestore",nH="@firebase/firestore-compat",rH="firebase",iH="10.11.1";var U_="[DEFAULT]",sH={[V_]:"fire-core",[O$]:"fire-core-compat",[F$]:"fire-analytics",[k$]:"fire-analytics-compat",[V$]:"fire-app-check",[L$]:"fire-app-check-compat",[U$]:"fire-auth",[j$]:"fire-auth-compat",[B$]:"fire-rtdb",[$$]:"fire-rtdb-compat",[H$]:"fire-fn",[q$]:"fire-fn-compat",[z$]:"fire-iid",[G$]:"fire-iid-compat",[W$]:"fire-fcm",[K$]:"fire-fcm-compat",[Q$]:"fire-perf",[Y$]:"fire-perf-compat",[J$]:"fire-rc",[Z$]:"fire-rc-compat",[X$]:"fire-gcs",[eH]:"fire-gcs-compat",[tH]:"fire-fst",[nH]:"fire-fst-compat","fire-js":"fire-js",[rH]:"fire-js-all"};var $c=new Map,oH=new Map,j_=new Map;function CA(t,e){try{t.container.addComponent(e)}catch(n){cs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qn(t){let e=t.name;if(j_.has(e))return cs.debug(`There were multiple attempts to register component ${e}.`),!1;j_.set(e,t);for(let n of $c.values())CA(n,t);for(let n of oH.values())CA(n,t);return!0}function ls(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tn(t){return t.settings!==void 0}var aH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new Dr("app","Firebase",aH);var B_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}};var Yn=iH;function q_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:U_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ai.create("bad-app-name",{appName:String(i)});if(n||(n=A_()),!n)throw ai.create("no-options");let s=$c.get(i);if(s){if(ss(n,s.options)&&ss(r,s.config))return s;throw ai.create("duplicate-app",{appName:i})}let o=new Bc(i);for(let c of j_.values())o.addComponent(c);let a=new B_(n,r,o);return $c.set(i,a),a}function ci(t=U_){let e=$c.get(t);if(!e&&t===U_&&A_())return q_();if(!e)throw ai.create("no-app",{appName:t});return e}function Ch(){return Array.from($c.values())}function Me(t,e,n){var r;let i=(r=sH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cs.warn(a.join(" "));return}Qn(new Ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var cH="firebase-heartbeat-database",lH=1,Hc="firebase-heartbeat-store",F_=null;function AA(){return F_||(F_=IA(cH,lH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ai.create("idb-open",{originalErrorMessage:t.message})})),F_}function uH(t){return p(this,null,function*(){try{let n=(yield AA()).transaction(Hc),r=yield n.objectStore(Hc).get(RA(t));return yield n.done,r}catch(e){if(e instanceof Gt)cs.warn(e.message);else{let n=ai.create("idb-get",{originalErrorMessage:e?.message});cs.warn(n.message)}}})}function DA(t,e){return p(this,null,function*(){try{let r=(yield AA()).transaction(Hc,"readwrite");yield r.objectStore(Hc).put(e,RA(t)),yield r.done}catch(n){if(n instanceof Gt)cs.warn(n.message);else{let r=ai.create("idb-set",{originalErrorMessage:n?.message});cs.warn(r.message)}}})}function RA(t){return`${t.name}!${t.options.appId}`}var dH=1024,hH=30*24*60*60*1e3,$_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new H_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bA();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=hH}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=bA(),{heartbeatsToSend:r,unsentEntries:i}=fH(this._heartbeatsCache.heartbeats),s=kc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function bA(){return new Date().toISOString().substring(0,10)}function fH(t,e=dH){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),SA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),SA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var H_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return N_()?lA().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield uH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return DA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return DA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function SA(t){return kc(JSON.stringify({version:2,heartbeats:t})).length}function pH(t){Qn(new Ft("platform-logger",e=>new L_(e),"PRIVATE")),Qn(new Ft("heartbeat",e=>new $_(e),"PRIVATE")),Me(V_,TA,t),Me(V_,TA,"esm2017"),Me("fire-js","")}pH("");var mH="firebase",gH="10.11.1";Me(mH,gH,"app");var br=new vr("ANGULARFIRE2_VERSION");function zo(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ds=(t,e)=>{let n=e?[e]:Ch(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},li=class{constructor(){return ds(yH)}},yH="app-check";function qo(){}var Dh=class{zone;delegate;constructor(e,n=gm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},z_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qo,{},qo,qo)),n.pipe(Ye({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ui=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Dh(Zone.current)),this.insideAngular=n.run(()=>new Dh(Zone.current,mm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(x(ae))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function _H(t){return bh().ngZone.runOutsideAngular(()=>t())}function us(t){return bh().ngZone.run(()=>t())}function vH(t){return wH(bh())(t)}function wH(t){return function(n){return n=n.lift(new z_(t.ngZone)),n.pipe(zr(t.outsideAngular),qr(t.insideAngular))}}var EH=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),us(()=>t.apply(void 0,r))},Lt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=us(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qo,{},qo,qo))),r[s]=EH(r[s],n));let i=_H(()=>t.apply(this,r));if(!e)if(i instanceof ne){let s=bh();return i.pipe(zr(s.outsideAngular),qr(s.insideAngular))}else return us(()=>i);return i instanceof ne?i.pipe(vH):i instanceof Promise?us(()=>new Promise((s,o)=>i.then(a=>us(()=>s(a)),a=>us(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:us(()=>i)};var Cn=class{constructor(e){return e}},Sr=class{constructor(){return Ch()}};function IH(t){return t&&t.length===1?t[0]:new Cn(ci())}var G_=new F("angularfire2._apps"),TH={provide:Cn,useFactory:IH,deps:[[new Je,G_]]},CH={provide:Sr,deps:[[new Je,G_]]};function DH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Cn(r)}}var bH=(()=>{class t{constructor(n){Me("angularfire",br.full,"core"),Me("angularfire",br.full,"app"),Me("angular",Y0.full,n.toString())}static \u0275fac=function(r){return new(r||t)(x(ei))};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[TH,CH]})}return t})();function NA(t,...e){return{ngModule:bH,providers:[{provide:G_,useFactory:DH(t),multi:!0,deps:[ae,nt,ui,...e]}]}}var MA=Lt(q_,!0);function KA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QA=KA,YA=new Dr("auth","Firebase",KA());var Ph=new Wn("@firebase/auth");function SH(t,...e){Ph.logLevel<=ee.WARN&&Ph.warn(`Auth (${Yn}): ${t}`,...e)}function Ah(t,...e){Ph.logLevel<=ee.ERROR&&Ph.error(`Auth (${Yn}): ${t}`,...e)}function Zn(t,...e){throw mv(t,...e)}function hs(t,...e){return mv(t,...e)}function JA(t,e,n){let r=Object.assign(Object.assign({},QA()),{[e]:n});return new Dr("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return JA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YA.create(t,...e)}function j(t,e,...n){if(!t)throw mv(e,...n)}function Ar(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ah(e),new Error(e)}function hi(t,e){t||Ar(e)}function Y_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AH(){return PA()==="http:"||PA()==="https:"}function PA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function RH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AH()||oA()||"connection"in navigator)?navigator.onLine:!0}function NH(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var fs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,hi(n>e,"Short delay should be less than long delay!"),this.isMobile=Lc()||Eh()}get(){return RH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gv(t,e){hi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var MH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var PH=new fs(3e4,6e4);function fi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function pi(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return ZA(t,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=os(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),xh.fetch()(XA(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function ZA(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},MH),e);try{let i=new J_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Sh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Sh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Sh(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw JA(t,u,l);Zn(t,u)}}catch(i){if(i instanceof Gt)throw i;Zn(t,"network-request-failed",{message:String(i)})}})}function Jc(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let l=yield pi(t,e,n,r,i);return"mfaPendingCredential"in l&&Zn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function XA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?gv(t.config,i):`${t.config.apiScheme}://${i}`}function xH(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var J_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hs(this.auth,"network-request-failed")),PH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Sh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=hs(t,e,r);return i.customData._tokenResponse=n,i}function xA(t){return t!==void 0&&t.enterprise!==void 0}var Z_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xH(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function OH(t,e){return p(this,null,function*(){return pi(t,"GET","/v2/recaptchaConfig",fi(t,e))})}function kH(t,e){return p(this,null,function*(){return pi(t,"POST","/v1/accounts:delete",e)})}function eR(t,e){return p(this,null,function*(){return pi(t,"POST","/v1/accounts:lookup",e)})}function qc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function yv(t,e=!1){return p(this,null,function*(){let n=Xe(t),r=yield n.getIdToken(e),i=_v(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qc(W_(i.auth_time)),issuedAtTime:qc(W_(i.iat)),expirationTime:qc(W_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function W_(t){return Number(t)*1e3}function _v(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{let i=Fc(n);return i?JSON.parse(i):(Ah("Failed to decode base64 JWT payload"),null)}catch(i){return Ah("Caught error parsing JWT payload as JSON",i?.toString()),null}}function OA(t){let e=_v(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gc(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Gt&&FH(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function FH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var X_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Wc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Oh(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Gc(t,eR(n,{idToken:r}));j(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tR(s.providerUserInfo):[],a=LH(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function vv(t){return p(this,null,function*(){let e=Xe(t);yield Oh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tR(t){return t.map(e=>{var{providerId:n}=e,r=ym(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function VH(t,e){return p(this,null,function*(){let n=yield ZA(t,{},()=>p(this,null,function*(){let r=os({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=XA(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function UH(t,e){return p(this,null,function*(){return pi(t,"POST","/v2/accounts:revokeToken",fi(t,e))})}var zc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(e.length!==0,"internal-error");let n=OA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield VH(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(j(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(j(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ar("not implemented")}};function di(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Go=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield Gc(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return yv(this,e)}reload(){return vv(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Oh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Tn(this.auth.app))return Promise.reject(Nr(this.auth));let e=yield this.getIdToken();return yield Gc(this,kH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,N=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:M,emailVerified:$,isAnonymous:Ne,providerData:Y,stsTokenManager:me}=n;j(M&&me,e,"internal-error");let be=zc.fromJSON(this.name,me);j(typeof M=="string",e,"internal-error"),di(d,e.name),di(h,e.name),j(typeof $=="boolean",e,"internal-error"),j(typeof Ne=="boolean",e,"internal-error"),di(f,e.name),di(m,e.name),di(g,e.name),di(y,e.name),di(v,e.name),di(N,e.name);let St=new t({uid:M,auth:e,email:h,emailVerified:$,displayName:d,isAnonymous:Ne,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:be,createdAt:v,lastLoginAt:N});return Y&&Array.isArray(Y)&&(St.providerData=Y.map(Ut=>Object.assign({},Ut))),y&&(St._redirectEventId=y),St}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new zc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Oh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];j(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?tR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new zc;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var kA=new Map;function Rr(t){hi(t instanceof Function,"Expected a class definition");let e=kA.get(t);return e?(hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kA.set(t,e),e)}var jH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ev=jH;function Rh(t,e,n){return`firebase:${t}:${e}:${n}`}var kh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Rh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Go._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Rr(ev),e,r);let i=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Rr(ev),o=Rh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Go._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function FA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oR(e))return"Blackberry";if(aR(e))return"Webos";if(wv(e))return"Safari";if((e.includes("chrome/")||rR(e))&&!e.includes("edge/"))return"Chrome";if(sR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function nR(t=Ze()){return/firefox\//i.test(t)}function wv(t=Ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rR(t=Ze()){return/crios\//i.test(t)}function iR(t=Ze()){return/iemobile/i.test(t)}function sR(t=Ze()){return/android/i.test(t)}function oR(t=Ze()){return/blackberry/i.test(t)}function aR(t=Ze()){return/webos/i.test(t)}function Hh(t=Ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BH(t=Ze()){var e;return Hh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $H(){return aA()&&document.documentMode===10}function cR(t=Ze()){return Hh(t)||sR(t)||aR(t)||oR(t)||/windows phone/i.test(t)||iR(t)}function HH(){try{return!!(window&&window!==window.top)}catch{return!1}}function lR(t,e=[]){let n;switch(t){case"Browser":n=FA(Ze());break;case"Worker":n=`${FA(Ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yn}/${r}`}var tv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function qH(n){return p(this,arguments,function*(t,e={}){return pi(t,"GET","/v2/passwordPolicy",fi(t,e))})}var zH=6,nv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:zH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var rv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fh(this),this.idTokenSubscription=new Fh(this),this.beforeStateQueue=new tv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield kh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield eR(this,{idToken:e}),r=yield Go._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(Tn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=NH()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Tn(this.app))return Promise.reject(Nr(this));let n=e?Xe(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Tn(this.app)?Promise.reject(Nr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tn(this.app)?Promise.reject(Nr(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield qH(this),n=new nv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield UH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Rr(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=yield kh.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&SH(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ms(t){return Xe(t)}var Fh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=fA(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var qh={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GH(t){qh=t}function uR(t){return qh.loadJS(t)}function WH(){return qh.recaptchaEnterpriseScript}function KH(){return qh.gapiScript}function dR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var QH="recaptcha-enterprise",YH="NO_RECAPTCHA",iv=class{constructor(e){this.type=QH,this.auth=ms(e)}verify(e="verify",n=!1){return p(this,null,function*(){function r(s){return p(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>p(this,null,function*(){OH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Z_(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;xA(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(YH)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&xA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=WH();c.length!==0&&(c+=a),uR(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function LA(t,e,n,r=!1){return p(this,null,function*(){let i=new iv(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function sv(t,e,n,r){return p(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield LA(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>p(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield LA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Ev(t,e){let n=ls(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(ss(s,e??{}))return i;Zn(i,"already-initialized")}return n.initialize({options:e})}function JH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Iv(t,e,n){let r=ms(t);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=hR(e),{host:o,port:a}=ZH(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||XH()}function hR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZH(t){let e=hR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:VA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:VA(o)}}}function VA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function XH(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Kc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}};function eq(t,e){return p(this,null,function*(){return pi(t,"POST","/v1/accounts:signUp",e)})}function tq(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithPassword",fi(t,e))})}function nq(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithEmailLink",fi(t,e))})}function rq(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithEmailLink",fi(t,e))})}var Qc=class t extends Kc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,n,"signInWithPassword",tq);case"emailLink":return nq(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}})}_linkToIdToken(e,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,r,"signUpPassword",eq);case"emailLink":return rq(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function K_(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithIdp",fi(t,e))})}function iq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sq(t){let e=$o(Ho(t)).link,n=e?$o(Ho(e)).deep_link_id:null,r=$o(Ho(t)).deep_link_id;return(r?$o(Ho(r)).link:null)||r||n||e||t}var Lh=class t{constructor(e){var n,r,i,s,o,a;let c=$o(Ho(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=iq((i=c.mode)!==null&&i!==void 0?i:null);j(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=sq(e);try{return new t(n)}catch{return null}}};var fR=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Qc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Lh.parseLink(r);return j(i,"argument-error"),Qc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Vh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ov=class extends Vh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function oq(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signUp",fi(t,e))})}var Wo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield Go._fromIdTokenResponse(e,r,i),o=UA(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function UA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var av=class t extends Gt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function pR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?av._fromErrorAndOperation(t,s,e,r):s})}function aq(t,e,n=!1){return p(this,null,function*(){let r=yield Gc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Wo._forOperation(t,"link",r)})}function cq(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t;if(Tn(r.app))return Promise.reject(Nr(r));let i="reauthenticate";try{let s=yield Gc(t,pR(r,i,e,t),n);j(s.idToken,r,"internal-error");let o=_v(s.idToken);j(o,r,"internal-error");let{sub:a}=o;return j(t.uid===a,r,"user-mismatch"),Wo._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Zn(r,"user-mismatch"),s}})}function mR(t,e,n=!1){return p(this,null,function*(){if(Tn(t.app))return Promise.reject(Nr(t));let r="signIn",i=yield pR(t,r,e),s=yield Wo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Tv(t,e){return p(this,null,function*(){return mR(ms(t),e)})}function gR(t){return p(this,null,function*(){let e=ms(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Cv(t,e,n){return p(this,null,function*(){if(Tn(t.app))return Promise.reject(Nr(t));let r=ms(t),o=yield sv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oq).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&gR(t),c}),a=yield Wo._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Dv(t,e,n){return Tn(t.app)?Promise.reject(Nr(t)):Tv(Xe(t),fR.credential(e,n)).catch(r=>p(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&gR(t),r}))}function bv(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function Sv(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function Av(t){return Xe(t).signOut()}var Uh="__sak";var jh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function lq(){let t=Ze();return wv(t)||Hh(t)}var uq=1e3,dq=10,hq=(()=>{class t extends jh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=lq()&&HH(),this.fallbackToPolling=cR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);$H()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,dq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},uq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield $r(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield $r(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield $r(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),yR=hq;var fq=(()=>{class t extends jh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Rv=fq;function pq(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var mq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,o)})),l=yield pq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function _R(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var cv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=_R("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Jn(){return window}function gq(t){Jn().location.href=t}function vR(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}function yq(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function _q(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function vq(){return vR()?self:null}var wR="firebaseLocalStorageDb",wq=1,Bh="firebaseLocalStorage",ER="fbase_key",ps=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function zh(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function Eq(){let t=indexedDB.deleteDatabase(wR);return new ps(t).toPromise()}function lv(){let t=indexedDB.open(wR,wq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Bh,{keyPath:ER})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Bh)?e(r):(r.close(),yield Eq(),e(yield lv()))}))})}function jA(t,e,n){return p(this,null,function*(){let r=zh(t,!0).put({[ER]:e,value:n});return new ps(r).toPromise()})}function Iq(t,e){return p(this,null,function*(){let n=zh(t,!1).get(e),r=yield new ps(n).toPromise();return r===void 0?null:r.value})}function BA(t,e){let n=zh(t,!0).delete(e);return new ps(n).toPromise()}var Tq=800,Cq=3,Dq=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield lv(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Cq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return vR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=mq._getInstance(vq()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield yq(),!this.activeServiceWorker)return;this.sender=new cv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||_q()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield lv();return yield jA(n,Uh,"1"),yield BA(n,Uh),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>jA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>Iq(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>BA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=zh(s,!1).getAll();return new ps(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),Tq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),IR=Dq;var Ote=dR("rcb"),kte=new fs(3e4,6e4);function bq(t,e){return e?Rr(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Yc=class extends Kc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return K_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return K_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return K_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Sq(t){return mR(t.auth,new Yc(t),t.bypassAuthState)}function Aq(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),cq(n,new Yc(t),t.bypassAuthState)}function Rq(t){return p(this,null,function*(){let{auth:e,user:n}=t;return j(n,e,"internal-error"),aq(n,new Yc(t),t.bypassAuthState)})}var uv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sq;case"linkViaPopup":case"linkViaRedirect":return Rq;case"reauthViaPopup":case"reauthViaRedirect":return Aq;default:Zn(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Fte=new fs(2e3,1e4);var Nq="pendingRedirect",Nh=new Map,dv=class t extends uv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=Nh.get(this.auth._key());if(!e){try{let r=(yield Mq(this.resolver,this.auth))?yield $r(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nh.set(this.auth._key(),e)}return this.bypassAuthState||Nh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return $r(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,$r(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function Mq(t,e){return p(this,null,function*(){let n=Oq(e),r=xq(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function Pq(t,e){Nh.set(t._key(),e)}function xq(t){return Rr(t._redirectPersistence)}function Oq(t){return Rh(Nq,t.config.apiKey,t.name)}function kq(t,e,n=!1){return p(this,null,function*(){if(Tn(t.app))return Promise.reject(Nr(t));let r=ms(t),i=bq(r,e),o=yield new dv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Fq=10*60*1e3,hv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fq&&this.cachedEventUids.clear(),this.cachedEventUids.has($A(e))}saveEventToCache(e){this.cachedEventUids.add($A(e)),this.lastProcessedEventTime=Date.now()}};function $A(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Lq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TR(t);default:return!1}}function Vq(n){return p(this,arguments,function*(t,e={}){return pi(t,"GET","/v1/projects",e)})}var Uq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jq=/^https?/;function Bq(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Vq(t);for(let n of e)try{if($q(n))return}catch{}Zn(t,"unauthorized-domain")})}function $q(t){let e=Y_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!jq.test(n))return!1;if(Uq.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Hq=new fs(3e4,6e4);function HA(){let t=Jn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qq(t){return new Promise((e,n)=>{var r,i,s;function o(){HA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HA(),n(hs(t,"network-request-failed"))},timeout:Hq.get()})}if(!((i=(r=Jn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Jn().gapi)===null||s===void 0)&&s.load)o();else{let a=dR("iframefcb");return Jn()[a]=()=>{gapi.load?o():n(hs(t,"network-request-failed"))},uR(`${KH()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Mh=null,e})}var Mh=null;function zq(t){return Mh=Mh||qq(t),Mh}var Gq=new fs(5e3,15e3),Wq="__/auth/iframe",Kq="emulator/auth/iframe",Qq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jq(t){let e=t.config;j(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?gv(e,Kq):`https://${t.config.authDomain}/${Wq}`,r={apiKey:e.apiKey,appName:t.name,v:Yn},i=Yq.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${os(r).slice(1)}`}function Zq(t){return p(this,null,function*(){let e=yield zq(t),n=Jn().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:Jq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qq,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=hs(t,"network-request-failed"),a=Jn().setTimeout(()=>{s(o)},Gq.get());function c(){Jn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Xq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ez=500,tz=600,nz="_blank",rz="http://localhost",$h=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function iz(t,e,n,r=ez,i=tz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Xq),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ze().toLowerCase();n&&(a=rR(l)?nz:n),nR(l)&&(e=e||rz,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(BH(l)&&a!=="_self")return sz(e||"",a),new $h(null);let d=window.open(e||"",a,u);j(d,t,"popup-blocked");try{d.focus()}catch{}return new $h(d)}function sz(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var oz="__/auth/handler",az="emulator/auth/handler",cz=encodeURIComponent("fac");function qA(t,e,n,r,i,s){return p(this,null,function*(){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yn,eventId:i};if(e instanceof Vh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Vc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof ov){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${cz}=${encodeURIComponent(c)}`:"";return`${lz(t)}?${os(a).slice(1)}${l}`})}function lz({config:t}){return t.emulator?gv(t,az):`https://${t.authDomain}/${oz}`}var Q_="webStorageSupport",fv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rv,this._completeRedirectFn=kq,this._overrideRedirectResult=Pq}_openPopup(e,n,r,i){return p(this,null,function*(){var s;hi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield qA(e,n,r,Y_(),i);return iz(e,o,_R())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield qA(e,n,r,Y_(),i);return gq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(hi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield Zq(e),r=new hv(e);return n.register("authEvent",i=>(j(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Q_,{type:Q_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Q_];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Bq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cR()||wv()||Hh()}},CR=fv;var zA="@firebase/auth",GA="1.7.2";var pv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function uz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dz(t){Qn(new Ft("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;j(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lR(t)},l=new rv(r,i,s,c);return JH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qn(new Ft("auth-internal",e=>{let n=ms(e.getProvider("auth").getImmediate());return(r=>new pv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(zA,GA,uz(t)),Me(zA,GA,"esm2017")}var hz=5*60,fz=R_("authIdTokenMaxAge")||hz,WA=null,pz=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fz)return;let i=n?.token;WA!==i&&(WA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Nv(t=ci()){let e=ls(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Ev(t,{popupRedirectResolver:CR,persistence:[IR,yR,Rv]}),r=R_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=pz(s.toString());Sv(n,o,()=>o(n.currentUser)),bv(n,a=>o(a))}}let i=S_("auth");return i&&Iv(n,`http://${i}`),n}function mz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=hs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dz("Browser");var DR="auth",gs=class{constructor(e){return e}},ys=class{constructor(){return ds(DR)}};var Mv=new F("angularfire2.auth-instances");function sG(t,e){let n=zo(DR,t,e);return n&&new gs(n)}function oG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new gs(r)}}var aG={provide:ys,deps:[[new Je,Mv]]},cG={provide:gs,useFactory:sG,deps:[[new Je,Mv],Cn]},lG=(()=>{class t{constructor(){Me("angularfire",br.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[cG,aG]})}return t})();function bR(t,...e){return{ngModule:lG,providers:[{provide:Mv,useFactory:oG(t),multi:!0,deps:[ae,nt,ui,Sr,[new Je,li],...e]}]}}var SR=Lt(Cv,!0);var AR=Lt(Nv,!0);var RR=Lt(Dv,!0);var NR=Lt(Av,!0);var dG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bn={},C,Xv=Xv||{},q=dG||self;function of(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function dl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function hG(t){return Object.prototype.hasOwnProperty.call(t,Pv)&&t[Pv]||(t[Pv]=++fG)}var Pv="closure_uid_"+(1e9*Math.random()>>>0),fG=0;function pG(t,e,n){return t.call.apply(t.bind,arguments)}function mG(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?wt=pG:wt=mG,wt.apply(null,arguments)}function Gh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ot(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function mi(){this.s=this.s,this.o=this.o}var gG=0;mi.prototype.s=!1;mi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),gG!=0)&&hG(this)};mi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var HR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ew(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function MR(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(of(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Et(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var yG=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};q.addEventListener("test",n,e),q.removeEventListener("test",n,e)}catch{}return t}();function rl(t){return/^[\s\xa0]*$/.test(t)}function af(){var t=q.navigator;return t&&(t=t.userAgent)?t:""}function Xn(t){return af().indexOf(t)!=-1}function tw(t){return tw[" "](t),t}tw[" "]=function(){};function _G(t,e){var n=oW;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var vG=Xn("Opera"),Jo=Xn("Trident")||Xn("MSIE"),qR=Xn("Edge"),Lv=qR||Jo,zR=Xn("Gecko")&&!(af().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge"))&&!(Xn("Trident")||Xn("MSIE"))&&!Xn("Edge"),wG=af().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge");function GR(){var t=q.document;return t?t.documentMode:void 0}var Vv;e:{if(Wh="",Kh=function(){var t=af();if(zR)return/rv:([^\);]+)(\)|;)/.exec(t);if(qR)return/Edge\/([\d\.]+)/.exec(t);if(Jo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(wG)return/WebKit\/(\S+)/.exec(t);if(vG)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Kh&&(Wh=Kh?Kh[1]:""),Jo&&(Qh=GR(),Qh!=null&&Qh>parseFloat(Wh))){Vv=String(Qh);break e}Vv=Wh}var Wh,Kh,Qh,Uv;q.document&&Jo?(xv=GR(),Uv=xv||parseInt(Vv,10)||void 0):Uv=void 0;var xv,EG=Uv;function il(t,e){if(Et.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(zR){e:{try{tw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:IG[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&il.$.h.call(this)}}ot(il,Et);var IG={2:"touch",3:"pen",4:"mouse"};il.prototype.h=function(){il.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var hl="closure_listenable_"+(1e6*Math.random()|0),TG=0;function CG(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++TG,this.fa=this.ia=!1}function cf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function nw(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function DG(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function WR(t){let e={};for(let n in t)e[n]=t[n];return e}var PR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function KR(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<PR.length;s++)n=PR[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lf(t){this.src=t,this.g={},this.h=0}lf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Bv(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new CG(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function jv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=HR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(cf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Bv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var rw="closure_lm_"+(1e6*Math.random()|0),Ov={};function QR(t,e,n,r,i){if(r&&r.once)return JR(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)QR(t,e[s],n,r,i);return null}return n=ow(n),t&&t[hl]?t.O(e,n,dl(r)?!!r.capture:!!r,i):YR(t,e,n,!1,r,i)}function YR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=dl(i)?!!i.capture:!!i,a=sw(t);if(a||(t[rw]=a=new lf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=bG(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yG||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(XR(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function bG(){function t(n){return e.call(t.src,t.listener,n)}let e=SG;return t}function JR(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)JR(t,e[s],n,r,i);return null}return n=ow(n),t&&t[hl]?t.P(e,n,dl(r)?!!r.capture:!!r,i):YR(t,e,n,!0,r,i)}function ZR(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ZR(t,e[s],n,r,i);else r=dl(r)?!!r.capture:!!r,n=ow(n),t&&t[hl]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Bv(s,n,r,i),-1<n&&(cf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=sw(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Bv(e,n,r,i)),(n=-1<t?e[t]:null)&&iw(n))}function iw(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[hl])jv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(XR(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sw(e))?(jv(n,t),n.h==0&&(n.src=null,e[rw]=null)):cf(t)}}}function XR(t){return t in Ov?Ov[t]:Ov[t]="on"+t}function SG(t,e){if(t.fa)t=!0;else{e=new il(e,this);var n=t.listener,r=t.la||t.src;t.ia&&iw(t),t=n.call(r,e)}return t}function sw(t){return t=t[rw],t instanceof lf?t:null}var kv="__closure_events_fn_"+(1e9*Math.random()>>>0);function ow(t){return typeof t=="function"?t:(t[kv]||(t[kv]=function(e){return t.handleEvent(e)}),t[kv])}function st(){mi.call(this),this.i=new lf(this),this.S=this,this.J=null}ot(st,mi);st.prototype[hl]=!0;st.prototype.removeEventListener=function(t,e,n,r){ZR(this,t,e,n,r)};function mt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Et(e,t);else if(e instanceof Et)e.target=e.target||t;else{var i=e;e=new Et(r,t),KR(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Yh(o,r,!0,e)&&i}if(o=e.g=t,i=Yh(o,r,!0,e)&&i,i=Yh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Yh(o,r,!1,e)&&i}st.prototype.N=function(){if(st.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cf(n[r]);delete t.g[e],t.h--}}this.J=null};st.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};st.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Yh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&jv(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var aw=q.JSON.stringify,$v=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function AG(){var t=cw;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Hv=class{constructor(){this.h=this.g=null}add(e,n){let r=eN.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},eN=new $v(()=>new qv,t=>t.reset()),qv=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function RG(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function NG(t){q.setTimeout(()=>{throw t},0)}var sl,ol=!1,cw=new Hv,tN=()=>{let t=q.Promise.resolve(void 0);sl=()=>{t.then(MG)}},MG=()=>{for(var t;t=AG();){try{t.h.call(t.g)}catch(n){NG(n)}var e=eN;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ol=!1};function uf(t,e){st.call(this),this.h=t||1,this.g=e||q,this.j=wt(this.qb,this),this.l=Date.now()}ot(uf,st);C=uf.prototype;C.ga=!1;C.T=null;C.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mt(this,"tick"),this.ga&&(lw(this),this.start()))}};C.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function lw(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}C.N=function(){uf.$.N.call(this),lw(this),delete this.g};function uw(t,e,n){if(typeof t=="function")n&&(t=wt(t,n));else if(t&&typeof t.handleEvent=="function")t=wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function nN(t){t.g=uw(()=>{t.g=null,t.i&&(t.i=!1,nN(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var zv=class extends mi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nN(this)}N(){super.N(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function al(t){mi.call(this),this.h=t,this.g={}}ot(al,mi);var xR=[];function rN(t,e,n,r){Array.isArray(n)||(n&&(xR[0]=n.toString()),n=xR);for(var i=0;i<n.length;i++){var s=QR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function iN(t){nw(t.g,function(e,n){this.g.hasOwnProperty(n)&&iw(e)},t),t.g={}}al.prototype.N=function(){al.$.N.call(this),iN(this)};al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function df(){this.g=!0}df.prototype.Ea=function(){this.g=!1};function PG(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function xG(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Qo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kG(t,n)+(r?" "+r:"")})}function OG(t,e){t.info(function(){return"TIMEOUT: "+e})}df.prototype.info=function(){};function kG(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return aw(n)}catch{return e}}var Es={},OR=null;function hf(){return OR=OR||new st}Es.Ta="serverreachability";function sN(t){Et.call(this,Es.Ta,t)}ot(sN,Et);function cl(t){let e=hf();mt(e,new sN(e))}Es.STAT_EVENT="statevent";function oN(t,e){Et.call(this,Es.STAT_EVENT,t),this.stat=e}ot(oN,Et);function Mt(t){let e=hf();mt(e,new oN(e,t))}Es.Ua="timingevent";function aN(t,e){Et.call(this,Es.Ua,t),this.size=e}ot(aN,Et);function fl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}var ff={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dw(){}dw.prototype.h=null;function kR(t){return t.h||(t.h=t.i())}function lN(){}var pl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hw(){Et.call(this,"d")}ot(hw,Et);function fw(){Et.call(this,"c")}ot(fw,Et);var Gv;function pf(){}ot(pf,dw);pf.prototype.g=function(){return new XMLHttpRequest};pf.prototype.i=function(){return{}};Gv=new pf;function ml(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new al(this),this.P=FG,t=Lv?125:void 0,this.V=new uf(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new uN}function uN(){this.i=null,this.g="",this.h=!1}var FG=45e3,dN={},Wv={};C=ml.prototype;C.setTimeout=function(t){this.P=t};function Kv(t,e,n){t.L=1,t.A=gf(Pr(e)),t.u=n,t.S=!0,hN(t,null)}function hN(t,e){t.G=Date.now(),gl(t),t.B=Pr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),wN(n.i,"t",r),t.o=0,n=t.l.J,t.h=new uN,t.g=BN(t.l,n?e:null,!t.u),0<t.O&&(t.M=new zv(wt(t.Pa,t,t.g),t.O)),rN(t.U,t.g,"readystatechange",t.nb),e=t.I?WR(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),cl(),PG(t.j,t.v,t.B,t.m,t.W,t.u)}C.nb=function(t){t=t.target;let e=this.M;e&&er(t)==3?e.l():this.Pa(t)};C.Pa=function(t){try{if(t==this.g)e:{let u=er(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||Lv||this.g&&(this.h.h||this.g.ja()||UR(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?cl(3):cl(2)),mf(this);var n=this.g.da();this.ca=n;t:if(fN(this)){var r=UR(this.g);t="";var i=r.length,s=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_s(this),nl(this);var o="";break t}this.h.i=new q.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,xG(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rl(a)){var l=a;break t}}l=null}if(n=l)Qo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qv(this,n);else{this.i=!1,this.s=3,Mt(12),_s(this),nl(this);break e}}this.S?(pN(this,u,o),Lv&&this.i&&u==3&&(rN(this.U,this.V,"tick",this.mb),this.V.start())):(Qo(this.j,this.m,o,null),Qv(this,o)),u==4&&_s(this),this.i&&!this.J&&(u==4?LN(this.l,this):(this.i=!1,gl(this)))}else rW(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),_s(this),nl(this)}}}catch{}finally{}};function fN(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function pN(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=LG(t,n),i==Wv){e==4&&(t.s=4,Mt(14),r=!1),Qo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==dN){t.s=4,Mt(15),Qo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Qo(t.j,t.m,i,null),Qv(t,i);fN(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Mt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),vw(e),e.M=!0,Mt(11))):(Qo(t.j,t.m,n,"[Invalid Chunked Response]"),_s(t),nl(t))}C.mb=function(){if(this.g){var t=er(this.g),e=this.g.ja();this.o<e.length&&(mf(this),pN(this,t,e),this.i&&t!=4&&gl(this))}};function LG(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Wv:(n=Number(e.substring(n,r)),isNaN(n)?dN:(r+=1,r+n>e.length?Wv:(e=e.slice(r,r+n),t.o=r+n,e)))}C.cancel=function(){this.J=!0,_s(this)};function gl(t){t.Y=Date.now()+t.P,mN(t,t.P)}function mN(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=fl(wt(t.lb,t),e)}function mf(t){t.C&&(q.clearTimeout(t.C),t.C=null)}C.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(OG(this.j,this.B),this.L!=2&&(cl(),Mt(17)),_s(this),this.s=2,nl(this)):mN(this,this.Y-t)};function nl(t){t.l.H==0||t.J||LN(t.l,t)}function _s(t){mf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,lw(t.V),iN(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Qv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Yv(n.i,t))){if(!t.K&&Yv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)tf(n),vf(n);else break e;_w(n),Mt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=fl(wt(n.ib,n),6e3));if(1>=TN(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else vs(n,11)}else if((t.K||n.g==t)&&tf(n),!rl(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(pw(s,s.h),s.h=null))}if(r.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Ae(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=jN(r,r.J?r.pa:null,r.Y),o.K){CN(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(mf(a),gl(a)),r.g=o}else kN(r);0<n.j.length&&wf(n)}else l[0]!="stop"&&l[0]!="close"||vs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?vs(n,7):yw(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}cl(4)}catch{}}function VG(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(of(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function UG(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(of(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function gN(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(of(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=UG(t),r=VG(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var yN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jG(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ws(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ws){this.h=t.h,Xh(this,t.j),this.s=t.s,this.g=t.g,ef(this,t.m),this.l=t.l;var e=t.i,n=new ll;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),FR(this,n),this.o=t.o}else t&&(e=String(t).match(yN))?(this.h=!1,Xh(this,e[1]||"",!0),this.s=el(e[2]||""),this.g=el(e[3]||"",!0),ef(this,e[4]),this.l=el(e[5]||"",!0),FR(this,e[6]||"",!0),this.o=el(e[7]||"")):(this.h=!1,this.i=new ll(null,this.h))}ws.prototype.toString=function(){var t=[],e=this.j;e&&t.push(tl(e,LR,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(tl(e,LR,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(tl(n,n.charAt(0)=="/"?HG:$G,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",tl(n,zG)),t.join("")};function Pr(t){return new ws(t)}function Xh(t,e,n){t.j=n?el(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ef(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function FR(t,e,n){e instanceof ll?(t.i=e,GG(t.i,t.h)):(n||(e=tl(e,qG)),t.i=new ll(e,t.h))}function Ae(t,e,n){t.i.set(e,n)}function gf(t){return Ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function el(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,BG),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function BG(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var LR=/[#\/\?@]/g,$G=/[#\?:]/g,HG=/[#\?]/g,qG=/[#\?@]/g,zG=/#/g;function ll(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gi(t){t.g||(t.g=new Map,t.h=0,t.i&&jG(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}C=ll.prototype;C.add=function(t,e){gi(this),this.i=null,t=Zo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function _N(t,e){gi(t),e=Zo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function vN(t,e){return gi(t),e=Zo(t,e),t.g.has(e)}C.forEach=function(t,e){gi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};C.ta=function(){gi(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};C.Z=function(t){gi(this);let e=[];if(typeof t=="string")vN(this,t)&&(e=e.concat(this.g.get(Zo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};C.set=function(t,e){return gi(this),this.i=null,t=Zo(this,t),vN(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};C.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function wN(t,e,n){_N(t,e),0<n.length&&(t.i=null,t.g.set(Zo(t,e),ew(n)),t.h+=n.length)}C.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Zo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function GG(t,e){e&&!t.j&&(gi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(_N(this,r),wN(this,i,n))},t)),t.j=e}var WG=class{constructor(t,e){this.g=t,this.map=e}};function EN(t){this.l=t||KG,q.PerformanceNavigationTiming?(t=q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(q.g&&q.g.Ka&&q.g.Ka()&&q.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var KG=10;function IN(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function TN(t){return t.h?1:t.g?t.g.size:0}function Yv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function pw(t,e){t.g?t.g.add(e):t.h=e}function CN(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}EN.prototype.cancel=function(){if(this.i=DN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function DN(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return ew(t.i)}var QG=class{stringify(t){return q.JSON.stringify(t,void 0)}parse(t){return q.JSON.parse(t,void 0)}};function YG(){this.g=new QG}function JG(t,e,n){let r=n||"";try{gN(t,function(i,s){let o=i;dl(i)&&(o=aw(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ZG(t,e){let n=new df;if(q.Image){let r=new Image;r.onload=Gh(Jh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Gh(Jh,n,r,"TestLoadImage: error",!1,e),r.onabort=Gh(Jh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gh(Jh,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Jh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function yl(t){this.l=t.ec||null,this.j=t.ob||!1}ot(yl,dw);yl.prototype.g=function(){return new yf(this.l,this.j)};yl.prototype.i=function(t){return function(){return t}}({});function yf(t,e){st.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=mw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ot(yf,st);var mw=0;C=yf.prototype;C.open=function(t,e){if(this.readyState!=mw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ul(this)};C.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};C.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_l(this)),this.readyState=mw};C.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bN(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function bN(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}C.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_l(this):ul(this),this.readyState==3&&bN(this)}};C.Za=function(t){this.g&&(this.response=this.responseText=t,_l(this))};C.Ya=function(t){this.g&&(this.response=t,_l(this))};C.ka=function(){this.g&&_l(this)};function _l(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ul(t)}C.setRequestHeader=function(t,e){this.v.append(t,e)};C.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};C.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ul(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(yf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var XG=q.JSON.parse;function Le(t){st.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=SN,this.L=this.M=!1}ot(Le,st);var SN="",eW=/^https?$/i,tW=["POST","PUT"];C=Le.prototype;C.Oa=function(t){this.M=t};C.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gv.g(),this.C=this.u?kR(this.u):kR(Gv),this.g.onreadystatechange=wt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){VR(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=q.FormData&&t instanceof q.FormData,!(0<=HR(tW,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{NN(this),0<this.B&&((this.L=nW(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wt(this.ua,this)):this.A=uw(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){VR(this,s)}};function nW(t){return Jo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}C.ua=function(){typeof Xv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mt(this,"timeout"),this.abort(8))};function VR(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,AN(t),_f(t)}function AN(t){t.F||(t.F=!0,mt(t,"complete"),mt(t,"error"))}C.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mt(this,"complete"),mt(this,"abort"),_f(this))};C.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_f(this,!0)),Le.$.N.call(this)};C.La=function(){this.s||(this.G||this.v||this.l?RN(this):this.kb())};C.kb=function(){RN(this)};function RN(t){if(t.h&&typeof Xv<"u"&&(!t.C[1]||er(t)!=4||t.da()!=2)){if(t.v&&er(t)==4)uw(t.La,0,t);else if(mt(t,"readystatechange"),er(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(yN)[1]||null;!i&&q.self&&q.self.location&&(i=q.self.location.protocol.slice(0,-1)),r=!eW.test(i?i.toLowerCase():"")}n=r}if(n)mt(t,"complete"),mt(t,"success");else{t.m=6;try{var s=2<er(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",AN(t)}}finally{_f(t)}}}}function _f(t,e){if(t.g){NN(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||mt(t,"ready");try{n.onreadystatechange=r}catch{}}}function NN(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(q.clearTimeout(t.A),t.A=null)}C.isActive=function(){return!!this.g};function er(t){return t.g?t.g.readyState:0}C.da=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}};C.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};C.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),XG(e)}};function UR(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case SN:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function rW(t){let e={};t=(t.g&&2<=er(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(rl(t[r]))continue;var n=RG(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}DG(e,function(r){return r.join(", ")})}C.Ia=function(){return this.m};C.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function MN(t){let e="";return nw(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function gw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=MN(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ae(t,e,n))}function Zc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function PN(t){this.Ga=0,this.j=[],this.l=new df,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zc("baseRetryDelayMs",5e3,t),this.hb=Zc("retryDelaySeedMs",1e4,t),this.eb=Zc("forwardChannelMaxRetries",2,t),this.xa=Zc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new EN(t&&t.concurrentRequestLimit),this.Ja=new YG,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}C=PN.prototype;C.ra=8;C.H=1;function yw(t){if(xN(t),t.H==3){var e=t.W++,n=Pr(t.I);if(Ae(n,"SID",t.K),Ae(n,"RID",e),Ae(n,"TYPE","terminate"),vl(t,n),e=new ml(t,t.l,e),e.L=2,e.A=gf(Pr(n)),n=!1,q.navigator&&q.navigator.sendBeacon)try{n=q.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&q.Image&&(new Image().src=e.A,n=!0),n||(e.g=BN(e.l,null),e.g.ha(e.A)),e.G=Date.now(),gl(e)}UN(t)}function vf(t){t.g&&(vw(t),t.g.cancel(),t.g=null)}function xN(t){vf(t),t.u&&(q.clearTimeout(t.u),t.u=null),tf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&q.clearTimeout(t.m),t.m=null)}function wf(t){if(!IN(t.i)&&!t.m){t.m=!0;var e=t.Na;sl||tN(),ol||(sl(),ol=!0),cw.add(e,t),t.C=0}}function iW(t,e){return TN(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=fl(wt(t.Na,t,e),VN(t,t.C)),t.C++,!0)}C.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new ml(this,this.l,t),s=this.s;if(this.U&&(s?(s=WR(s),KR(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ON(this,i,e),n=Pr(this.I),Ae(n,"RID",t),Ae(n,"CVER",22),this.F&&Ae(n,"X-HTTP-Session-Id",this.F),vl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(MN(s)))+"&"+e:this.o&&gw(n,this.o,s)),pw(this.i,i),this.bb&&Ae(n,"TYPE","init"),this.P?(Ae(n,"$req",e),Ae(n,"SID","null"),i.aa=!0,Kv(i,n,null)):Kv(i,n,e),this.H=2}}else this.H==3&&(t?jR(this,t):this.j.length==0||IN(this.i)||jR(this))};function jR(t,e){var n;e?n=e.m:n=t.W++;let r=Pr(t.I);Ae(r,"SID",t.K),Ae(r,"RID",n),Ae(r,"AID",t.V),vl(t,r),t.o&&t.s&&gw(r,t.o,t.s),n=new ml(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ON(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),pw(t.i,n),Kv(n,r,e)}function vl(t,e){t.na&&nw(t.na,function(n,r){Ae(e,r,n)}),t.h&&gN({},function(n,r){Ae(e,r,n)})}function ON(t,e,n){n=Math.min(t.j.length,n);var r=t.h?wt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{JG(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function kN(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;sl||tN(),ol||(sl(),ol=!0),cw.add(e,t),t.A=0}}function _w(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=fl(wt(t.Ma,t),VN(t,t.A)),t.A++,!0)}C.Ma=function(){if(this.u=null,FN(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=fl(wt(this.jb,this),t)}};C.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mt(10),vf(this),FN(this))};function vw(t){t.B!=null&&(q.clearTimeout(t.B),t.B=null)}function FN(t){t.g=new ml(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Pr(t.wa);Ae(e,"RID","rpc"),Ae(e,"SID",t.K),Ae(e,"AID",t.V),Ae(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ae(e,"TO",t.qa),Ae(e,"TYPE","xmlhttp"),vl(t,e),t.o&&t.s&&gw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=gf(Pr(e)),n.u=null,n.S=!0,hN(n,t)}C.ib=function(){this.v!=null&&(this.v=null,vf(this),_w(this),Mt(19))};function tf(t){t.v!=null&&(q.clearTimeout(t.v),t.v=null)}function LN(t,e){var n=null;if(t.g==e){tf(t),vw(t),t.g=null;var r=2}else if(Yv(t.i,e))n=e.F,CN(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=hf(),mt(r,new aN(r,n)),wf(t)}else kN(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&iW(t,e)||r==2&&_w(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:vs(t,5);break;case 4:vs(t,10);break;case 3:vs(t,6);break;default:vs(t,2)}}}function VN(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function vs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=wt(t.pb,t);n||(n=new ws("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||Xh(n,"https"),gf(n)),ZG(n.toString(),r)}else Mt(2);t.H=0,t.h&&t.h.za(e),UN(t),xN(t)}C.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mt(2)):(this.l.info("Failed to ping google.com"),Mt(1))};function UN(t){if(t.H=0,t.ma=[],t.h){let e=DN(t.i);(e.length!=0||t.j.length!=0)&&(MR(t.ma,e),MR(t.ma,t.j),t.i.i.length=0,ew(t.j),t.j.length=0),t.h.ya()}}function jN(t,e,n){var r=n instanceof ws?Pr(n):new ws(n);if(r.g!="")e&&(r.g=e+"."+r.g),ef(r,r.m);else{var i=q.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ws(null);r&&Xh(s,r),e&&(s.g=e),i&&ef(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ae(r,n,e),Ae(r,"VER",t.ra),vl(t,r),r}function BN(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Le(new yl({ob:n})):new Le(t.va),e.Oa(t.J),e}C.isActive=function(){return!!this.h&&this.h.isActive(this)};function $N(){}C=$N.prototype;C.Ba=function(){};C.Aa=function(){};C.za=function(){};C.ya=function(){};C.isActive=function(){return!0};C.Va=function(){};function nf(){if(Jo&&!(10<=Number(EG)))throw Error("Environmental error: no available transport.")}nf.prototype.g=function(t,e){return new Wt(t,e)};function Wt(t,e){st.call(this),this.g=new PN(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!rl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Xo(this)}ot(Wt,st);Wt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=jN(t,null,t.Y),wf(t)};Wt.prototype.close=function(){yw(this.g)};Wt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=aw(t),t=n);e.j.push(new WG(e.fb++,t)),e.H==3&&wf(e)};Wt.prototype.N=function(){this.g.h=null,delete this.j,yw(this.g),delete this.g,Wt.$.N.call(this)};function HN(t){hw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ot(HN,hw);function qN(){fw.call(this),this.status=1}ot(qN,fw);function Xo(t){this.g=t}ot(Xo,$N);Xo.prototype.Ba=function(){mt(this.g,"a")};Xo.prototype.Aa=function(t){mt(this.g,new HN(t))};Xo.prototype.za=function(t){mt(this.g,new qN)};Xo.prototype.ya=function(){mt(this.g,"b")};function sW(){this.blockSize=-1}function Dn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ot(Dn,sW);Dn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Fv(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Dn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Fv(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Fv(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Fv(this,r),i=0;break}}this.h=i,this.i+=e};Dn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function we(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var oW={};function ww(t){return-128<=t&&128>t?_G(t,function(e){return new we([e|0],0>e?-1:0)}):new we([t|0],0>t?-1:0)}function tr(t){if(isNaN(t)||!isFinite(t))return Yo;if(0>t)return pt(tr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Jv;return new we(e,0)}function zN(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pt(zN(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=tr(Math.pow(e,8)),r=Yo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=tr(Math.pow(e,s)),r=r.R(s).add(tr(o))):(r=r.R(n),r=r.add(tr(o)))}return r}var Jv=4294967296,Yo=ww(0),Zv=ww(1),BR=ww(16777216);C=we.prototype;C.ea=function(){if(an(this))return-pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Jv+r)*e,e*=Jv}return t};C.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Mr(this))return"0";if(an(this))return"-"+pt(this).toString(t);for(var e=tr(Math.pow(t,6)),n=this,r="";;){var i=sf(n,e).g;n=rf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Mr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};C.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Mr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function an(t){return t.h==-1}C.X=function(t){return t=rf(this,t),an(t)?-1:Mr(t)?0:1};function pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new we(n,~t.h).add(Zv)}C.abs=function(){return an(this)?pt(this):this};C.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new we(n,n[n.length-1]&-2147483648?-1:0)};function rf(t,e){return t.add(pt(e))}C.R=function(t){if(Mr(this)||Mr(t))return Yo;if(an(this))return an(t)?pt(this).R(pt(t)):pt(pt(this).R(t));if(an(t))return pt(this.R(pt(t)));if(0>this.X(BR)&&0>t.X(BR))return tr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Zh(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Zh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Zh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Zh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new we(n,0)};function Zh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Xc(t,e){this.g=t,this.h=e}function sf(t,e){if(Mr(e))throw Error("division by zero");if(Mr(t))return new Xc(Yo,Yo);if(an(t))return e=sf(pt(t),e),new Xc(pt(e.g),pt(e.h));if(an(e))return e=sf(t,pt(e)),new Xc(pt(e.g),e.h);if(30<t.g.length){if(an(t)||an(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Zv,r=e;0>=r.X(t);)n=$R(n),r=$R(r);var i=Ko(n,1),s=Ko(r,1);for(r=Ko(r,2),n=Ko(n,2);!Mr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ko(r,1),n=Ko(n,1)}return e=rf(t,i.R(e)),new Xc(i,e)}for(i=Yo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=tr(n),o=s.R(e);an(o)||0<o.X(t);)n-=r,s=tr(n),o=s.R(e);Mr(s)&&(s=Zv),i=i.add(s),t=rf(t,o)}return new Xc(i,t)}C.gb=function(t){return sf(this,t).h};C.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new we(n,this.h&t.h)};C.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new we(n,this.h|t.h)};C.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new we(n,this.h^t.h)};function $R(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new we(n,t.h)}function Ko(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new we(i,t.h)}nf.prototype.createWebChannel=nf.prototype.g;Wt.prototype.send=Wt.prototype.u;Wt.prototype.open=Wt.prototype.m;Wt.prototype.close=Wt.prototype.close;ff.NO_ERROR=0;ff.TIMEOUT=8;ff.HTTP_ERROR=6;cN.COMPLETE="complete";lN.EventType=pl;pl.OPEN="a";pl.CLOSE="b";pl.ERROR="c";pl.MESSAGE="d";st.prototype.listen=st.prototype.O;Le.prototype.listenOnce=Le.prototype.P;Le.prototype.getLastError=Le.prototype.Sa;Le.prototype.getLastErrorCode=Le.prototype.Ia;Le.prototype.getStatus=Le.prototype.da;Le.prototype.getResponseJson=Le.prototype.Wa;Le.prototype.getResponseText=Le.prototype.ja;Le.prototype.send=Le.prototype.ha;Le.prototype.setWithCredentials=Le.prototype.Oa;Dn.prototype.digest=Dn.prototype.l;Dn.prototype.reset=Dn.prototype.reset;Dn.prototype.update=Dn.prototype.j;we.prototype.add=we.prototype.add;we.prototype.multiply=we.prototype.R;we.prototype.modulo=we.prototype.gb;we.prototype.compare=we.prototype.X;we.prototype.toNumber=we.prototype.ea;we.prototype.toString=we.prototype.toString;we.prototype.getBits=we.prototype.D;we.fromNumber=tr;we.fromString=zN;var GN=bn.createWebChannelTransport=function(){return new nf},WN=bn.getStatEventTarget=function(){return hf()},Ef=bn.ErrorCode=ff,KN=bn.EventType=cN,QN=bn.Event=Es,Ew=bn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},YN=bn.FetchXmlHttpFactory=yl,wl=bn.WebChannel=lN,JN=bn.XhrIo=Le,ZN=bn.Md5=Dn,Is=bn.Integer=we;var XN="@firebase/firestore";var at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");var wa="10.11.1";var Ss=new Wn("@firebase/firestore");function El(){return Ss.logLevel}function R(t,...e){if(Ss.logLevel<=ee.DEBUG){let n=e.map(rI);Ss.debug(`Firestore (${wa}): ${t}`,...n)}}function Or(t,...e){if(Ss.logLevel<=ee.ERROR){let n=e.map(rI);Ss.error(`Firestore (${wa}): ${t}`,...n)}}function oa(t,...e){if(Ss.logLevel<=ee.WARN){let n=e.map(rI);Ss.warn(`Firestore (${wa}): ${t}`,...n)}}function rI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t="Unexpected state"){let e=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: `+t;throw Or(e),new Error(e)}function De(t,e){t||B()}function G(t,e){return t}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var bf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}},Sw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Aw=class{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{R("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(R("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(R("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new bf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new at(e)}},Rw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Nw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Rw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Pw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&R("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,R("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{R("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):R("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new Mw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function aW(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Sf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=aW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ye(t,e){return t<e?-1:t>e?1:0}function aa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var gt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var K=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new gt(0,0))}static max(){return new t(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Af=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(),r===void 0?r=e.length-n:r>e.length-n&&B(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ue=class t extends Af{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},cW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class t extends Af{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return cW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new O(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new O(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var V=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ue.fromString(e))}static fromName(e){return new t(Ue.fromString(e).popFirst(5))}static empty(){return new t(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ue(e.slice()))}};var xw=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};xw.UNKNOWN_ID=-1;function lW(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new As(i,V.empty(),e)}function uW(t){return new As(t.readTime,t.key,-1)}var As=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(K.min(),V.empty(),-1)}static max(){return new t(K.max(),V.empty(),-1)}};function dW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=V.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}var hW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ow=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Vl(t){return p(this,null,function*(){if(t.code!==_.FAILED_PRECONDITION||t.message!==hW)throw t;R("LocalStore","Unexpectedly lost primary lease")})}var w=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function fW(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ul(t){return t.name==="IndexedDbTransactionError"}var RM=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function rp(t){return t==null}function Al(t){return t===0&&1/t==-1/0}function pW(t){return typeof t=="number"&&Number.isInteger(t)&&!Al(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var mW=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rne=[...mW,"documentOverlays"],gW=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yW=gW,Nne=[...yW,"indexConfiguration","indexState","indexEntries"];function eM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ea(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var je=class t{constructor(e,n){this.comparator=e,this.root=n||ir.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ra(this.root,e,this.comparator,!0)}},ra=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ir=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1;ir.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ir(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tt=class t{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rf(this.data.getIterator())}getIteratorFrom(e){return new Rf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Rf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rr=class t{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Tt(Kt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Nf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pt.EMPTY_BYTE_STRING=new Pt("");var _W=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(De(!!t),typeof t=="string"){let e=0,n=_W.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}function iI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sI(t){let e=t.mapValue.fields.__previous_value__;return iI(e)?sI(e):e}function Rl(t){let e=kr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var kw=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Mf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var If={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?iI(t)?4:MM(t)?9007199254740991:10:B()}function ar(t,e){if(t===e)return!0;let n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rl(t).isEqual(Rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=kr(i.timestampValue),a=kr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return _i(i.bytesValue).isEqual(_i(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ve(i.doubleValue),a=Ve(s.doubleValue);return o===a?Al(o)===Al(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return aa(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(eM(o)!==eM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ar(o[c],a[c])))return!1;return!0}(t,e);default:return B()}}function Nl(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function ca(t,e){if(t===e)return 0;let n=Rs(t),r=Rs(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ve(s.integerValue||s.doubleValue),c=Ve(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return tM(t.timestampValue,e.timestampValue);case 4:return tM(Rl(t),Rl(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){let a=_i(s),c=_i(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ye(a[l],c[l]);if(u!==0)return u}return ye(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ye(Ve(s.latitude),Ve(o.latitude));return a!==0?a:ye(Ve(s.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=ca(a[l],c[l]);if(u)return u}return ye(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===If.mapValue&&o===If.mapValue)return 0;if(s===If.mapValue)return 1;if(o===If.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=ye(c[d],u[d]);if(h!==0)return h;let f=ca(a[c[d]],l[u[d]]);if(f!==0)return f}return ye(c.length,u.length)}(t.mapValue,e.mapValue);default:throw B()}}function tM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);let n=kr(t),r=kr(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function la(t){return Fw(t)}function Fw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return V.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Fw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Fw(n.fields[o])}`;return i+"}"}(t.mapValue):B()}function Lw(t){return!!t&&"integerValue"in t}function oI(t){return!!t&&"arrayValue"in t}function nM(t){return!!t&&"nullValue"in t}function rM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cf(t){return!!t&&"mapValue"in t}function Tl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ea(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Sn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(n)}setAll(e){let n=Kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Tl(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Cf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ea(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Tl(this.value))}};function PM(t){let e=[];return Ea(t.fields,(n,r)=>{let i=new Kt([n]);if(Cf(r)){let s=PM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new rr(e)}var An=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,K.min(),K.min(),K.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,K.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,K.min(),K.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,K.min(),K.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ua=class{constructor(e,n){this.position=e,this.inclusive=n}};function iM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=V.comparator(V.fromName(o.referenceValue),n.key):r=ca(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}var da=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function vW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Pf=class{},et=class t extends Pf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Uw(e,n,r):n==="array-contains"?new $w(e,r):n==="in"?new Hw(e,r):n==="not-in"?new qw(e,r):n==="array-contains-any"?new zw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jw(e,r):new Bw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ca(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},cr=class t extends Pf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return xM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function xM(t){return t.op==="and"}function OM(t){return wW(t)&&xM(t)}function wW(t){for(let e of t.filters)if(e instanceof cr)return!1;return!0}function Vw(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+la(t.value);if(OM(t))return t.filters.map(e=>Vw(e)).join(",");{let e=t.filters.map(n=>Vw(n)).join(",");return`${t.op}(${e})`}}function kM(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&ar(r.value,i.value)}(t,e):t instanceof cr?function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kM(o,i.filters[a]),!0):!1}(t,e):void B()}function FM(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(FM).join(" ,")+"}"}(t):"Filter"}var Uw=class extends et{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){let n=V.comparator(e.key,this.key);return this.matchesComparison(n)}},jw=class extends et{constructor(e,n){super(e,"in",n),this.keys=LM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Bw=class extends et{constructor(e,n){super(e,"not-in",n),this.keys=LM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function LM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}var $w=class extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return oI(n)&&Nl(n.arrayValue,this.value)}},Hw=class extends et{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Nl(this.value.arrayValue,n)}},qw=class extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Nl(this.value.arrayValue,n)}},zw=class extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!oI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}};var Gw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function oM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gw(t,e,n,r,i,s,o)}function aI(t){let e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>la(r)).join(",")),e.ue=n}return e.ue}function cI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sM(t.startAt,e.startAt)&&sM(t.endAt,e.endAt)}function Ww(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ha=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function EW(t,e,n,r,i,s,o,a){return new ha(t,e,n,r,i,s,o,a)}function lI(t){return new ha(t)}function aM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IW(t){return t.collectionGroup!==null}function Cl(t){let e=G(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tt(Kt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new da(s,r))}),n.has(Kt.keyField().canonicalString())||e.ce.push(new da(Kt.keyField(),r))}return e.ce}function sr(t){let e=G(t);return e.le||(e.le=TW(e,Cl(t))),e.le}function TW(t,e){if(t.limitType==="F")return oM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new da(i.field,s)});let n=t.endAt?new ua(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ua(t.startAt.position,t.startAt.inclusive):null;return oM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kw(t,e,n){return new ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ip(t,e){return cI(sr(t),sr(e))&&t.limitType===e.limitType}function VM(t){return`${aI(sr(t))}|lt:${t.limitType}`}function ea(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>FM(i)).join(", ")}]`),rp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>la(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>la(i)).join(",")),`Target(${r})`}(sr(t))}; limitType=${t.limitType})`}function sp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):V.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Cl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=iM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Cl(r),i)||r.endAt&&!function(o,a,c){let l=iM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Cl(r),i))}(t,e)}function CW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UM(t){return(e,n)=>{let r=!1;for(let i of Cl(t)){let s=DW(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DW(t,e,n){let r=t.field.isKeyField()?V.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ca(c,l):B()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var vi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return NM(this.inner)}size(){return this.innerSize}};var bW=new je(V.comparator);function Fr(){return bW}var jM=new je(V.comparator);function Il(...t){let e=jM;for(let n of t)e=e.insert(n.key,n);return e}function BM(t){let e=jM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ts(){return Dl()}function $M(){return Dl()}function Dl(){return new vi(t=>t.toString(),(t,e)=>t.isEqual(e))}var SW=new je(V.comparator),AW=new Tt(V.comparator);function se(...t){let e=AW;for(let n of t)e=e.add(n);return e}var RW=new Tt(ye);function NW(){return RW}function HM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Al(e)?"-0":e}}function qM(t){return{integerValue:""+t}}function MW(t,e){return pW(e)?qM(e):HM(t,e)}var fa=class{constructor(){this._=void 0}};function PW(t,e,n){return t instanceof pa?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&iI(s)&&(s=sI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ns?GM(t,e):t instanceof Ms?WM(t,e):function(i,s){let o=zM(i,s),a=cM(o)+cM(i.Pe);return Lw(o)&&Lw(i.Pe)?qM(a):HM(i.serializer,a)}(t,e)}function xW(t,e,n){return t instanceof Ns?GM(t,e):t instanceof Ms?WM(t,e):n}function zM(t,e){return t instanceof ma?function(r){return Lw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var pa=class extends fa{},Ns=class extends fa{constructor(e){super(),this.elements=e}};function GM(t,e){let n=KM(e);for(let r of t.elements)n.some(i=>ar(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ms=class extends fa{constructor(e){super(),this.elements=e}};function WM(t,e){let n=KM(e);for(let r of t.elements)n=n.filter(i=>!ar(i,r));return{arrayValue:{values:n}}}var ma=class extends fa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function cM(t){return Ve(t.integerValue||t.doubleValue)}function KM(t){return oI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function OW(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ns&&i instanceof Ns||r instanceof Ms&&i instanceof Ms?aa(r.elements,i.elements,ar):r instanceof ma&&i instanceof ma?ar(r.Pe,i.Pe):r instanceof pa&&i instanceof pa}(t.transform,e.transform)}var Qw=class{constructor(e,n){this.version=e,this.transformResults=n}},bs=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ga=class{};function QM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xf(t.key,bs.none()):new Ps(t.key,t.data,bs.none());{let n=t.data,r=Sn.empty(),i=new Tt(Kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lr(t.key,r,new rr(i.toArray()),bs.none())}}function kW(t,e,n){t instanceof Ps?function(i,s,o){let a=i.value.clone(),c=uM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(i,s,o){if(!Df(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=uM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(YM(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bl(t,e,n,r){return t instanceof Ps?function(s,o,a,c){if(!Df(s.precondition,o))return a;let l=s.value.clone(),u=dM(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(s,o,a,c){if(!Df(s.precondition,o))return a;let l=dM(s.fieldTransforms,c,o),u=o.data;return u.setAll(YM(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Df(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function FW(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=zM(r.transform,i||null);s!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,s))}return n||null}function lM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&aa(r,i,(s,o)=>OW(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ps=class extends ga{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lr=class extends ga{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function YM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function uM(t,e,n){let r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xW(o,a,n[i]))}return r}function dM(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,PW(s,o,e))}return r}var xf=class extends ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yw=class extends ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Jw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&kW(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=$M();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=QM(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(n,r)=>lM(n,r))&&aa(this.baseMutations,e.baseMutations,(n,r)=>lM(n,r))}},Zw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return SW}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Xw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var eE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var We,de;function LW(t){switch(t){default:return B();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function JM(t){if(t===void 0)return Or("GRPC error has no .code"),_.UNKNOWN;switch(t){case We.OK:return _.OK;case We.CANCELLED:return _.CANCELLED;case We.UNKNOWN:return _.UNKNOWN;case We.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case We.INTERNAL:return _.INTERNAL;case We.UNAVAILABLE:return _.UNAVAILABLE;case We.UNAUTHENTICATED:return _.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case We.NOT_FOUND:return _.NOT_FOUND;case We.ALREADY_EXISTS:return _.ALREADY_EXISTS;case We.PERMISSION_DENIED:return _.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case We.ABORTED:return _.ABORTED;case We.OUT_OF_RANGE:return _.OUT_OF_RANGE;case We.UNIMPLEMENTED:return _.UNIMPLEMENTED;case We.DATA_LOSS:return _.DATA_LOSS;default:return B()}}(de=We||(We={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var hM=null;function VW(){return new TextEncoder}var UW=new Is([4294967295,4294967295],0);function fM(t){let e=VW().encode(t),n=new ZN;return n.update(e),new Uint8Array(n.digest())}function pM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Is([n,r],0),new Is([i,s],0)]}var tE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cs(`Invalid padding: ${n}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Is.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Is.fromNumber(r)));return i.compare(UW)===1&&(i=new Is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=fM(e),[r,i]=pM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=fM(e),[r,i]=pM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Cs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Of=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(K.min(),i,new je(ye),Fr(),se())}},Ml=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,se(),se(),se())}};var ia=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},kf=class{constructor(e,n){this.targetId=e,this.me=n}},Ff=class{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Lf=class{constructor(){this.fe=0,this.ge=gM(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B()}}),new Ml(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=gM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},nE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=mM(),this.Qe=new je(ye)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Ww(s))if(r===0){let o=new V(s.path);this.Ue(n,o,An.newNoDocument(o,K.min()))}else De(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}hM?.et(function(u,d,h,f,m){var g,y,v,N,M,$;let Ne={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},Y=d.unchangedNames;return Y&&(Ne.bloomFilter={applied:m===0,hashCount:(g=Y?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(N=(v=(y=Y?.bits)===null||y===void 0?void 0:y.bitmap)===null||v===void 0?void 0:v.length)!==null&&N!==void 0?N:0,padding:($=(M=Y?.bits)===null||M===void 0?void 0:M.padding)!==null&&$!==void 0?$:0,mightContain:me=>{var be;return(be=f?.mightContain(me))!==null&&be!==void 0&&be}}),Ne}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=_i(r).toUint8Array()}catch(c){if(c instanceof Nf)return oa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new tE(o,i,s)}catch(c){return oa(c instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Ww(a.target)){let c=new V(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,An.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Of(e,n,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=mM(),this.Qe=new je(ye),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Lf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||R("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function mM(){return new je(V.comparator)}function gM(){return new je(V.comparator)}var jW={asc:"ASCENDING",desc:"DESCENDING"},BW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$W={and:"AND",or:"OR"},rE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function iE(t,e){return t.useProto3Json||rp(e)?e:{value:e}}function Vf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HW(t,e){return Vf(t,e.toTimestamp())}function or(t){return De(!!t),K.fromTimestamp(function(n){let r=kr(n);return new gt(r.seconds,r.nanos)}(t))}function uI(t,e){return sE(t,e).canonicalString()}function sE(t,e){let n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XM(t){let e=Ue.fromString(t);return De(iP(e)),e}function oE(t,e){return uI(t.databaseId,e.path)}function Iw(t,e){let n=XM(e);if(n.get(1)!==t.databaseId.projectId)throw new O(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(tP(n))}function eP(t,e){return uI(t.databaseId,e)}function qW(t){let e=XM(t);return e.length===4?Ue.emptyPath():tP(e)}function aE(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tP(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yM(t,e,n){return{name:oE(t,e),fields:n.value.mapValue.fields}}function zW(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(De(u===void 0||typeof u=="string"),Pt.fromBase64String(u||"")):(De(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Pt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?_.UNKNOWN:JM(l.code);return new O(u,l.message||"")}(o);n=new Ff(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Iw(t,r.document.name),s=or(r.document.updateTime),o=r.document.createTime?or(r.document.createTime):K.min(),a=new Sn({mapValue:{fields:r.document.fields}}),c=An.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new ia(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Iw(t,r.document),s=r.readTime?or(r.readTime):K.min(),o=An.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ia([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Iw(t,r.document),s=r.removedTargetIds||[];n=new ia([],s,i,null)}else{if(!("filter"in e))return B();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new eE(i,s),a=r.targetId;n=new kf(a,o)}}return n}function GW(t,e){let n;if(e instanceof Ps)n={update:yM(t,e.key,e.value)};else if(e instanceof xf)n={delete:oE(t,e.key)};else if(e instanceof Lr)n={update:yM(t,e.key,e.data),updateMask:t4(e.fieldMask)};else{if(!(e instanceof Yw))return B();n={verify:oE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ns)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ms)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ma)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw B()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HW(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function WW(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?or(i.updateTime):or(s);return o.isEqual(K.min())&&(o=or(s)),new Qw(o,i.transformResults||[])}(n,e))):[]}function KW(t,e){return{documents:[eP(t,e.path)]}}function QW(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eP(t,i);let s=function(l){if(l.length!==0)return rP(cr.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:ta(h.field),direction:ZW(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=iE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function YW(t){let e=qW(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){De(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=nP(d);return h instanceof cr&&OM(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(m){return new da(na(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,rp(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new ua(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new ua(f,h)}(n.endAt)),EW(e,i,o,s,a,"F",c,l)}function JW(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=na(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=na(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=na(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=na(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(n){return et.create(na(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(r=>nP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(n.compositeFilter.op))}(t):B()}function ZW(t){return jW[t]}function XW(t){return BW[t]}function e4(t){return $W[t]}function ta(t){return{fieldPath:t.canonicalString()}}function na(t){return Kt.fromServerFormat(t.fieldPath)}function rP(t){return t instanceof et?function(n){if(n.op==="=="){if(rM(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NAN"}};if(nM(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rM(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NAN"}};if(nM(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(n.field),op:XW(n.op),value:n.value}}}(t):t instanceof cr?function(n){let r=n.getFilters().map(i=>rP(i));return r.length===1?r[0]:{compositeFilter:{op:e4(n.op),filters:r}}}(t):B()}function t4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Pl=class t{constructor(e,n,r,i,s=K.min(),o=K.min(),a=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cE=class{constructor(e){this.ut=e}};function n4(t){let e=YW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kw(e,e.limit,"L"):e}var Uf=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Al(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=kr(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(_i(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?MM(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):B()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),V.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Uf.St=new Uf;var lE=class{constructor(){this.on=new uE}addToCollectionParentIndex(e,n){return this.on.add(n),w.resolve()}getCollectionParents(e,n){return w.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return w.resolve()}deleteFieldIndex(e,n){return w.resolve()}deleteAllFieldIndexes(e){return w.resolve()}createTargetIndexes(e,n){return w.resolve()}getDocumentsMatchingTarget(e,n){return w.resolve(null)}getIndexType(e,n){return w.resolve(0)}getFieldIndexes(e,n){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,n){return w.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return w.resolve(As.min())}updateCollectionGroup(e,n,r){return w.resolve()}updateIndexEntries(e,n){return w.resolve()}},uE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(Ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(Ue.comparator)).toArray()}};var Pne=new Uint8Array(0);var nr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(41943040,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);var xl=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var dE=class{constructor(){this.changes=new vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?w.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var hE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var fE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bl(r.mutation,i,rr.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){let i=Ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Il();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Fr(),o=Dl(),a=function(){return Dl()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Lr)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),bl(u.mutation,l,u.mutation.getFieldMask(),gt.now())):o.set(l.key,rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new hE(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Dl(),i=new je((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||rr.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||se()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=$M();u.forEach(h=>{if(!s.has(h)){let f=QM(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return V.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IW(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):w.resolve(Ts()),a=-1,c=s;return o.next(l=>w.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?w.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,se())).next(u=>({batchId:a,changes:BM(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let i=Il();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Il();return this.indexManager.getCollectionParents(e,s).next(a=>w.forEach(a,c=>{let l=function(d,h){return new ha(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,An.newInvalidDocument(u)))});let a=Il();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&bl(u.mutation,l,rr.empty(),gt.now()),sp(n,l)&&(a=a.insert(c,l))}),a})}};var pE=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return w.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:or(i.createTime)}}(n)),w.resolve()}getNamedQuery(e,n){return w.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:n4(i.bundledQuery),readTime:or(i.readTime)}}(n)),w.resolve()}};var mE=class{constructor(){this.overlays=new je(V.comparator),this.lr=new Map}getOverlay(e,n){return w.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ts();return w.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),w.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),w.resolve()}getOverlaysForCollection(e,n,r){let i=Ts(),s=n.length+1,o=new V(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return w.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new je((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Ts(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ts(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return w.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xw(n,r));let s=this.lr.get(n);s===void 0&&(s=se(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var Ol=class{constructor(){this.hr=new Tt(Ke.Pr),this.Ir=new Tt(Ke.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Ke(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Ke(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new V(new Ue([])),r=new Ke(n,e),i=new Ke(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new V(new Ue([])),r=new Ke(n,e),i=new Ke(n,e+1),s=se();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ke(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return V.comparator(e.key,n.key)||ye(e.gr,n.gr)}static Tr(e,n){return ye(e.gr,n.gr)||V.comparator(e.key,n.key)}};var gE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Tt(Ke.Pr)}checkEmpty(e){return w.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Jw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new Ke(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,n){return w.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(ye);return n.forEach(i=>{let s=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),w.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;V.isDocumentKey(s)||(s=s.child(""));let o=new Ke(new V(s),0),a=new Tt(ye);return this.yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.gr)),!0)},o),w.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return w.forEach(n.mutations,i=>{let s=new Ke(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Ke(n,0),i=this.yr.firstAfterOrEqual(r);return w.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,w.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var yE=class{constructor(e){this.Cr=e,this.docs=function(){return new je(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return w.resolve(r?r.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():An.newInvalidDocument(i))}),w.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fr(),o=n.path,a=new V(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||dW(uW(u),r)<=0||(i.has(u.key)||sp(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return w.resolve(s)}getAllFromCollectionGroup(e,n,r,i){B()}vr(e,n){return w.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _E(this)}getSize(e){return w.resolve(this.size)}},_E=class extends dE{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),w.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var vE=class{constructor(e){this.persistence=e,this.Fr=new vi(n=>aI(n),cI),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ol,this.targetCount=0,this.Nr=xl.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),w.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new xl(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,w.resolve()}updateTargetData(e,n){return this.kn(n),w.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(s).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return w.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),w.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),w.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return w.resolve(r)}containsKey(e,n){return w.resolve(this.Or.containsKey(n))}};var wE=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new RM(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new vE(this),this.indexManager=new lE,this.remoteDocumentCache=function(i){return new yE(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new cE(n),this.Kr=new pE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new gE(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){R("MemoryPersistence","Starting transaction:",e);let i=new EE(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return w.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},EE=class extends Ow{constructor(e){super(),this.currentSequenceNumber=e}},IE=class t{constructor(e){this.persistence=e,this.Gr=new Ol,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw B()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),w.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),w.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Hr,r=>{let i=V.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,K.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return w.or([()=>w.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var TE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=se(),i=se();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var CE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var DE=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return cA()?8:fW(Ze())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new CE;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(El()<=ee.DEBUG&&R("QueryEngine","SDK will not create cache indexes for query:",ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),w.resolve()):(El()<=ee.DEBUG&&R("QueryEngine","Query:",ea(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(El()<=ee.DEBUG&&R("QueryEngine","The SDK decides to create cache indexes for query:",ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(n))):w.resolve())}zi(e,n){if(aM(n))return w.resolve(null);let r=sr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Kw(n,null,"F"),r=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=se(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Yi(n,a);return this.Zi(n,l,o,c.readTime)?this.zi(e,Kw(n,null,"F")):this.Xi(e,l,n,c)}))})))}ji(e,n,r,i){return aM(n)||i.isEqual(K.min())?w.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?w.resolve(null):(El()<=ee.DEBUG&&R("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ea(n)),this.Xi(e,o,n,lW(i,-1)).next(a=>a))})}Yi(e,n){let r=new Tt(UM(e));return n.forEach((i,s)=>{sp(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return El()<=ee.DEBUG&&R("QueryEngine","Using full collection scan to execute query:",ea(n)),this.Gi.getDocumentsMatchingQuery(e,n,As.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var bE=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new je(ye),this.ns=new vi(s=>aI(s),cI),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fE(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function r4(t,e,n,r){return new bE(t,e,n,r)}function sP(t,e){return p(this,null,function*(){let n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=se();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})})}function i4(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=w.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(c,m)).next(g=>{let y=l.docVersions.get(m);De(y!==null),g.version.compareTo(y)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function oP(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function s4(t,e){let n=G(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Pt.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(g,y,v){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,f,u)&&a.push(n.qr.updateTargetData(s,f))});let c=Fr(),l=se();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(o4(s,o,e.documentUpdates).next(u=>{c=u.us,l=u.cs})),!r.isEqual(K.min())){let u=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ts=i,s))}function o4(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(K.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):R("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{us:o,cs:i}})}function a4(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function c4(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,w.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Pl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function SE(t,e,n){return p(this,null,function*(){let r=G(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ul(o))throw o;R("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function _M(t,e,n){let r=G(t),i=K.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=G(c),h=d.ns.get(u);return h!==void 0?w.resolve(d.ts.get(h)):d.qr.getTargetData(l,u)}(r,o,sr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:K.min(),n?s:se())).next(a=>(l4(r,CW(e),a),{documents:a,ls:s})))}function l4(t,e,n){let r=t.rs.get(e)||K.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}var jf=class{constructor(){this.activeTargetIds=NW()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var AE=class{constructor(){this.eo=new jf,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new jf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var RE=class{ro(e){}shutdown(){}};var Bf=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){R("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){R("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tf=null;function Tw(){return Tf===null?Tf=function(){return 268435456+Math.round(2147483648*Math.random())}():Tf++,"0x"+Tf.toString(16)}var u4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var NE=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var It="WebChannelConnection",ME=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=Tw(),c=this.Co(n,r.toUriEncodedString());R("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(l,s,o),this.Fo(n,c,l,i).then(u=>(R("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw oa("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=u4[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=Tw();return new Promise((o,a)=>{let c=new JN;c.setWithCredentials(!0),c.listenOnce(KN.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ef.NO_ERROR:let u=c.getResponseJson();R(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Ef.TIMEOUT:R(It,`RPC '${e}' ${s} timed out`),a(new O(_.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:let d=c.getStatus();if(R(It,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(y){let v=y.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(v)>=0?v:_.UNKNOWN}(f.status);a(new O(m,f.message))}else a(new O(_.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new O(_.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{R(It,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);R(It,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}xo(e,n,r){let i=Tw(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GN(),a=WN(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new YN({})),this.vo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=s.join("");R(It,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,m=new NE({co:y=>{f?R(It,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(R(It,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),R(It,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},lo:()=>d.close()}),g=(y,v,N)=>{y.listen(v,M=>{try{N(M)}catch($){setTimeout(()=>{throw $},0)}})};return g(d,wl.EventType.OPEN,()=>{f||(R(It,`RPC '${e}' stream ${i} transport opened.`),m.Vo())}),g(d,wl.EventType.CLOSE,()=>{f||(f=!0,R(It,`RPC '${e}' stream ${i} transport closed`),m.fo())}),g(d,wl.EventType.ERROR,y=>{f||(f=!0,oa(It,`RPC '${e}' stream ${i} transport errored:`,y),m.fo(new O(_.UNAVAILABLE,"The operation could not be completed")))}),g(d,wl.EventType.MESSAGE,y=>{var v;if(!f){let N=y.data[0];De(!!N);let M=N,$=M.error||((v=M[0])===null||v===void 0?void 0:v.error);if($){R(It,`RPC '${e}' stream ${i} received error:`,$);let Ne=$.status,Y=function(St){let Ut=We[St];if(Ut!==void 0)return JM(Ut)}(Ne),me=$.message;Y===void 0&&(Y=_.INTERNAL,me="Unknown error status: "+Ne+" with message "+$.message),f=!0,m.fo(new O(Y,me)),d.close()}else R(It,`RPC '${e}' stream ${i} received:`,N),m.po(N)}}),g(a,QN.STAT_EVENT,y=>{y.stat===Ew.PROXY?R(It,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===Ew.NOPROXY&&R(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.mo()},0),m}};function Cw(){return typeof document<"u"?document:null}function op(t){return new rE(t,!0)}var $f=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&R("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var Hf=class{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new $f(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return p(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return p(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return p(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new O(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>p(this,null,function*(){this.state=0,this.start()}))}u_(e){return R("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(R("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},PE=class extends Hf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=zW(this.serializer,e),r=function(s){if(!("targetChange"in s))return K.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?or(o.readTime):K.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=aE(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Ww(c)?{documents:KW(s,c)}:{query:QW(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZM(s,o.resumeToken);let l=iE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(K.min())>0){a.readTime=Vf(s,o.snapshotVersion.toTimestamp());let l=iE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=JW(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=aE(this.serializer),n.removeTarget=e,this.r_(n)}},xE=class extends Hf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=WW(e.writeResults,e.commitTime),r=or(e.commitTime);return this.listener.d_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=aE(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>GW(this.serializer,r))};this.r_(n)}};var OE=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new O(_.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,sE(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(_.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,sE(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(_.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var kE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Or(n),this.y_=!1):R("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var FE=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>p(this,null,function*(){xs(this)&&(R("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=G(c);l.M_.add(4),yield jl(l),l.N_.set("Unknown"),l.M_.delete(4),yield ap(l)})}(this))}))}),this.N_=new kE(r,i)}};function ap(t){return p(this,null,function*(){if(xs(t))for(let e of t.x_)yield e(!0)})}function jl(t){return p(this,null,function*(){for(let e of t.x_)yield e(!1)})}function aP(t,e){let n=G(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),pI(n)?fI(n):Ia(n).Zo()&&hI(n,e))}function dI(t,e){let n=G(t),r=Ia(n);n.F_.delete(e),r.Zo()&&cP(n,e),n.F_.size===0&&(r.Zo()?r.t_():xs(n)&&n.N_.set("Unknown"))}function hI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).h_(e)}function cP(t,e){t.L_.xe(e),Ia(t).P_(e)}function fI(t){t.L_=new nE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.N_.w_()}function pI(t){return xs(t)&&!Ia(t).Yo()&&t.F_.size>0}function xs(t){return G(t).M_.size===0}function lP(t){t.L_=void 0}function d4(t){return p(this,null,function*(){t.N_.set("Online")})}function h4(t){return p(this,null,function*(){t.F_.forEach((e,n)=>{hI(t,e)})})}function f4(t,e){return p(this,null,function*(){lP(t),pI(t)?(t.N_.D_(e),fI(t)):t.N_.set("Unknown")})}function p4(t,e,n){return p(this,null,function*(){if(t.N_.set("Online"),e instanceof Ff&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){R("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qf(t,r)}else if(e instanceof ia?t.L_.Ke(e):e instanceof kf?t.L_.He(e):t.L_.We(e),!n.isEqual(K.min()))try{let r=yield oP(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.F_.get(l);u&&s.F_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.F_.get(c);if(!u)return;s.F_.set(c,u.withResumeToken(Pt.EMPTY_BYTE_STRING,u.snapshotVersion)),cP(s,c);let d=new Pl(u.target,c,l,u.sequenceNumber);hI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){R("RemoteStore","Failed to raise snapshot:",r),yield qf(t,r)}})}function qf(t,e,n){return p(this,null,function*(){if(!Ul(e))throw e;t.M_.add(1),yield jl(t),t.N_.set("Offline"),n||(n=()=>oP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){R("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ap(t)}))})}function uP(t,e){return e().catch(n=>qf(t,n,e))}function cp(t){return p(this,null,function*(){let e=G(t),n=wi(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;m4(e);)try{let i=yield a4(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,g4(e,i)}catch(i){yield qf(e,i)}dP(e)&&hP(e)})}function m4(t){return xs(t)&&t.v_.length<10}function g4(t,e){t.v_.push(e);let n=wi(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function dP(t){return xs(t)&&!wi(t).Yo()&&t.v_.length>0}function hP(t){wi(t).start()}function y4(t){return p(this,null,function*(){wi(t).R_()})}function _4(t){return p(this,null,function*(){let e=wi(t);for(let n of t.v_)e.E_(n.mutations)})}function v4(t,e,n){return p(this,null,function*(){let r=t.v_.shift(),i=Zw.from(r,e,n);yield uP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield cp(t)})}function w4(t,e){return p(this,null,function*(){e&&wi(t).T_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return LW(o)&&o!==_.ABORTED}(i.code)){let s=r.v_.shift();wi(r).e_(),yield uP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield cp(r)}})}(t,e)),dP(t)&&hP(t)})}function vM(t,e){return p(this,null,function*(){let n=G(t);n.asyncQueue.verifyOperationInProgress(),R("RemoteStore","RemoteStore received new credentials");let r=xs(n);n.M_.add(3),yield jl(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ap(n)})}function E4(t,e){return p(this,null,function*(){let n=G(t);e?(n.M_.delete(2),yield ap(n)):e||(n.M_.add(2),yield jl(n),n.N_.set("Unknown"))})}function Ia(t){return t.B_||(t.B_=function(n,r,i){let s=G(n);return s.m_(),new PE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:d4.bind(null,t),Io:h4.bind(null,t),Eo:f4.bind(null,t),l_:p4.bind(null,t)}),t.x_.push(e=>p(this,null,function*(){e?(t.B_.e_(),pI(t)?fI(t):t.N_.set("Unknown")):(yield t.B_.stop(),lP(t))}))),t.B_}function wi(t){return t.k_||(t.k_=function(n,r,i){let s=G(n);return s.m_(),new xE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:y4.bind(null,t),Eo:w4.bind(null,t),A_:_4.bind(null,t),d_:v4.bind(null,t)}),t.x_.push(e=>p(this,null,function*(){e?(t.k_.e_(),yield cp(t)):(yield t.k_.stop(),t.v_.length>0&&(R("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var LE=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function mI(t,e){if(Or("AsyncQueue",`${e}: ${t}`),Ul(t))return new O(_.UNAVAILABLE,`${e}: ${t}`);throw t}var zf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=Il(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gf=class{constructor(){this.q_=new je(V.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):B():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},ya=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,zf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var VE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},UE=class{constructor(){this.queries=new vi(e=>VM(e),ip),this.onlineState="Unknown",this.z_=new Set}};function I4(t,e){return p(this,null,function*(){let n=G(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new VE,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=mI(o,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&gI(n)})}function T4(t,e){return p(this,null,function*(){let n=G(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function C4(t,e){let n=G(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&gI(n)}function D4(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function gI(t){t.z_.forEach(e=>{e.next()})}var jE,wM;(wM=jE||(jE={})).J_="default",wM.Cache="cache";var BE=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ya(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==jE.Cache}};var Wf=class{constructor(e){this.key=e}},Kf=class{constructor(e){this.key=e}},$E=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=se(),this.mutatedKeys=se(),this.Ia=UM(e),this.Ta=new zf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Gf,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=sp(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),y=!1;h&&f?h.data.isEqual(f.data)?m!==g&&(r.track({type:3,doc:f}),y=!0):this.Ra(h,f)||(r.track({type:2,doc:f}),y=!0,(c&&this.Ia(f,c)>0||l&&this.Ia(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(c||l)&&(a=!0)),y&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((u,d)=>function(f,m){let g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return g(f)-g(m)}(u.type,d.type)||this.Ia(u.doc,d.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new ya(this.query,e.Ta,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Gf,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=se(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Kf(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Wf(r))}),n}pa(e){this.la=e.ls,this.Pa=se();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ya.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},HE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},qE=class{constructor(e){this.key=e,this.wa=!1}},zE=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new vi(a=>VM(a),ip),this.Da=new Map,this.Ca=new Set,this.va=new je(V.comparator),this.Fa=new Map,this.Ma=new Ol,this.xa={},this.Oa=new Map,this.Na=xl.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function b4(t,e,n=!0){return p(this,null,function*(){let r=_P(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield fP(r,e,n,!0),i})}function S4(t,e){return p(this,null,function*(){let n=_P(t);yield fP(n,e,!0,!1)})}function fP(t,e,n,r){return p(this,null,function*(){let i=yield c4(t.localStore,sr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield A4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&aP(t.remoteStore,i),a})}function A4(t,e,n,r,i){return p(this,null,function*(){t.Ba=(d,h,f)=>function(g,y,v,N){return p(this,null,function*(){let M=y.view.da(v);M.Zi&&(M=yield _M(g.localStore,y.query,!1).then(({documents:me})=>y.view.da(me,M)));let $=N&&N.targetChanges.get(y.targetId),Ne=N&&N.targetMismatches.get(y.targetId)!=null,Y=y.view.applyChanges(M,g.isPrimaryClient,$,Ne);return IM(g,y.targetId,Y.fa),Y.snapshot})}(t,d,h,f);let s=yield _M(t.localStore,e,!0),o=new $E(e,s.ls),a=o.da(s.documents),c=Ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);IM(t,n,l.fa);let u=new HE(e,n,o);return t.ba.set(e,u),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function R4(t,e,n){return p(this,null,function*(){let r=G(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!ip(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield SE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dI(r.remoteStore,i.targetId),GE(r,i.targetId)}).catch(Vl))):(GE(r,i.targetId),yield SE(r.localStore,i.targetId,!0))})}function N4(t,e){return p(this,null,function*(){let n=G(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dI(n.remoteStore,r.targetId))})}function M4(t,e,n){return p(this,null,function*(){let r=V4(t);try{let i=yield function(o,a){let c=G(o),l=gt.now(),u=a.reduce((f,m)=>f.add(m.key),se()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Fr(),g=se();return c.ss.getEntries(f,u).next(y=>{m=y,m.forEach((v,N)=>{N.isValidDocument()||(g=g.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(y=>{d=y;let v=[];for(let N of a){let M=FW(N,d.get(N.key).overlayedDocument);M!=null&&v.push(new Lr(N.key,M,PM(M.value.mapValue),bs.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,v,a)}).next(y=>{h=y;let v=y.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,y.batchId,v)})}).then(()=>({batchId:h.batchId,changes:BM(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new je(ye)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Bl(r,i.changes),yield cp(r.remoteStore)}catch(i){let s=mI(i,"Failed to persist write");n.reject(s)}})}function pP(t,e){return p(this,null,function*(){let n=G(t);try{let r=yield s4(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?De(o.wa):i.removedDocuments.size>0&&(De(o.wa),o.wa=!1))}),yield Bl(n,r,e)}catch(r){yield Vl(r)}})}function EM(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=G(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.U_)h.j_(a)&&(l=!0)}),l&&gI(c)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function P4(t,e,n){return p(this,null,function*(){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new je(V.comparator);o=o.insert(s,An.newNoDocument(s,K.min()));let a=se().add(s),c=new Of(K.min(),new Map,new je(ye),o,a);yield pP(r,c),r.va=r.va.remove(s),r.Fa.delete(e),yI(r)}else yield SE(r.localStore,e,!1).then(()=>GE(r,e,n)).catch(Vl)})}function x4(t,e){return p(this,null,function*(){let n=G(t),r=e.batch.batchId;try{let i=yield i4(n.localStore,e);gP(n,r,null),mP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Bl(n,i)}catch(i){yield Vl(i)}})}function O4(t,e,n){return p(this,null,function*(){let r=G(t);try{let i=yield function(o,a){let c=G(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(De(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);gP(r,e,n),mP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Bl(r,i)}catch(i){yield Vl(i)}})}function mP(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function gP(t,e,n){let r=G(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function GE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||yP(t,r)})}function yP(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(dI(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),yI(t))}function IM(t,e,n){for(let r of n)r instanceof Wf?(t.Ma.addReference(r.key,e),k4(t,r)):r instanceof Kf?(R("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||yP(t,r.key)):B()}function k4(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(R("SyncEngine","New document in limbo: "+n),t.Ca.add(r),yI(t))}function yI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new V(Ue.fromString(e)),r=t.Na.next();t.Fa.set(r,new qE(n)),t.va=t.va.insert(n,r),aP(t.remoteStore,new Pl(sr(lI(n.path)),r,"TargetPurposeLimboResolution",RM.oe))}}function Bl(t,e,n){return p(this,null,function*(){let r=G(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=TE.Qi(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(c,l){return p(this,null,function*(){let u=G(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(l,h=>w.forEach(h.ki,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ul(d))throw d;R("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ts.get(h),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);u.ts=u.ts.insert(h,g)}}})}(r.localStore,s))})}function F4(t,e){return p(this,null,function*(){let n=G(t);if(!n.currentUser.isEqual(e)){R("SyncEngine","User change. New user:",e.toKey());let r=yield sP(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new O(_.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bl(n,r._s)}})}function L4(t,e){let n=G(t),r=n.Fa.get(e);if(r&&r.wa)return se().add(r.key);{let i=se(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function _P(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.Sa.l_=C4.bind(null,e.eventManager),e.Sa.ka=D4.bind(null,e.eventManager),e}function V4(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O4.bind(null,e),e}var Qf=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=op(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return r4(this.persistence,new DE,e.initialUser,this.serializer)}createPersistence(e){return new wE(IE.jr,this.serializer)}createSharedClientState(e){return new AE}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var WE=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>EM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F4.bind(null,this.syncEngine),yield E4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new UE}()}createDatastore(e){let n=op(e.databaseInfo.databaseId),r=function(s){return new ME(s)}(e.databaseInfo);return function(s,o,a,c){return new OE(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new FE(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>EM(this.syncEngine,n,0),function(){return Bf.D()?new Bf:new RE}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){let d=new zE(i,s,o,a,c,l);return u&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=G(r);R("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield jl(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var KE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var QE=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=Sf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){R("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(R("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=mI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Dw(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),R("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield sP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function TM(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield j4(t);R("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>vM(e.remoteStore,i)),t._onlineComponents=e})}function U4(t){return t.name==="FirebaseError"?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function j4(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){R("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Dw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!U4(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),yield Dw(t,new Qf)}}else R("FirestoreClient","Using default OfflineComponentProvider"),yield Dw(t,new Qf);return t._offlineComponents})}function vP(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(R("FirestoreClient","Using user provided OnlineComponentProvider"),yield TM(t,t._uninitializedComponentsProvider._online)):(R("FirestoreClient","Using default OnlineComponentProvider"),yield TM(t,new WE))),t._onlineComponents})}function B4(t){return vP(t).then(e=>e.syncEngine)}function CM(t){return p(this,null,function*(){let e=yield vP(t),n=e.eventManager;return n.onListen=b4.bind(null,e.syncEngine),n.onUnlisten=R4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=N4.bind(null,e.syncEngine),n})}function wP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var DM=new Map;function EP(t,e,n){if(!n)throw new O(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $4(t,e,n,r){if(e===!0&&r===!0)throw new O(_.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bM(t){if(!V.isDocumentKey(t))throw new O(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SM(t){if(V.isDocumentKey(t))throw new O(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _I(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function Sl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=_I(t);throw new O(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Yf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_a=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bw;switch(r.type){case"firstParty":return new Nw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=DM.get(n);r&&(R("ComponentProvider","Removing Datastore"),DM.delete(n),r.terminate())}(this),Promise.resolve()}};function IP(t,e,n,r={}){var i;let s=(t=Sl(t,_a))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=at.MOCK_USER;else{a=wh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new at(l)}t._authCredentials=new Sw(new bf(a,c))}}var Jf=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},cn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},yi=class t extends Jf{constructor(e,n,r){super(e,n,lI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new V(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function TP(t,e,...n){if(t=Xe(t),EP("collection","path",e),t instanceof _a){let r=Ue.fromString(e,...n);return SM(r),new yi(t,null,r)}{if(!(t instanceof cn||t instanceof yi))throw new O(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return SM(r),new yi(t.firestore,null,r)}}function CP(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Sf.newId()),EP("doc","path",e),t instanceof _a){let r=Ue.fromString(e,...n);return bM(r),new cn(t,null,new V(r))}{if(!(t instanceof cn||t instanceof yi))throw new O(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return bM(r),new cn(t.firestore,t instanceof yi?t.converter:null,new V(r))}}var YE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new $f(this,"async_queue_retry"),this.hu=()=>{let n=Cw();n&&R("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=Cw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Cw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new xr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return p(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!Ul(e))throw e;R("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Or("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=LE.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&B()}verifyOperationInProgress(){}du(){return p(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function AM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var va=class extends _a{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new YE}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||SP(this),this._firestoreClient.terminate()}};function DP(t,e){let n=typeof t=="object"?t:ci(),r=typeof t=="string"?t:e||"(default)",i=ls(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=vh("firestore");s&&IP(i,...s)}return i}function bP(t){return t._firestoreClient||SP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function SP(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,u){return new kw(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,wP(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new QE(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var kl=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Pt.fromBase64String(e))}catch(n){throw new O(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Fl=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zf=class{constructor(e){this._methodName=e}};var Ll=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}};var H4=/^__.*__$/,JE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ps(e,this.data,n,this.fieldTransforms)}};function AP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var ZE=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Xf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(AP(this.fu)&&H4.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},XE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||op(e)}Fu(e,n,r,i=!1){return new ZE({fu:e,methodName:n,vu:r,path:Kt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function q4(t){let e=t._freezeSettings(),n=op(t._databaseId);return new XE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function z4(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);PP("Data must be an object, but it was:",o,r);let a=NP(r,o),c,l;if(s.merge)c=new rr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=G4(e,d,n);if(!o.contains(h))throw new O(_.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);K4(u,h)||u.push(h)}c=new rr(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new JE(new Sn(a),c,l)}function RP(t,e){if(MP(t=Xe(t)))return PP("Unsupported field value:",e,t),NP(t,e);if(t instanceof Zf)return function(r,i){if(!AP(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=RP(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MW(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=gt.fromDate(r);return{timestampValue:Vf(i.serializer,s)}}if(r instanceof gt){let s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vf(i.serializer,s)}}if(r instanceof Ll)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kl)return{bytesValue:ZM(i.serializer,r._byteString)};if(r instanceof cn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${_I(r)}`)}(t,e)}function NP(t,e){let n={};return NM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(t,(r,i)=>{let s=RP(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function MP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Ll||t instanceof kl||t instanceof cn||t instanceof Zf)}function PP(t,e,n){if(!MP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=_I(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function G4(t,e,n){if((e=Xe(e))instanceof Fl)return e._internalPath;if(typeof e=="string")return xP(t,e);throw Xf("Field path arguments must be of type string or ",t,!1,void 0,n)}var W4=new RegExp("[~\\*/\\[\\]]");function xP(t,e,n){if(e.search(W4)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fl(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new O(_.INVALID_ARGUMENT,a+t+c)}function K4(t,e){return t.some(n=>n.isEqual(e))}var ep=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(OP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},eI=class extends ep{data(){return super.data()}};function OP(t,e){return typeof e=="string"?xP(t,e):e instanceof Fl?e._internalPath:e._delegate._internalPath}function Q4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tI=class{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ea(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ll(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=sI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rl(e));default:return null}}convertTimestamp(e){let n=kr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ue.fromString(e);De(iP(r));let i=new Mf(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||Or(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Y4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ds=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tp=class extends ep{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new sa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(OP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},sa=class extends tp{data(e={}){return super.data(e)}},nI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sa(this._firestore,this._userDataWriter,r.key,r,new Ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new sa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new sa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:J4(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function J4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}var np=class extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}};function kP(t,e){let n=Sl(t.firestore,va),r=CP(t),i=Y4(t.converter,e);return Z4(n,[z4(q4(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bs.exists(!1))]).then(()=>r)}function vI(t,...e){var n,r,i;t=Xe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(AM(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(t instanceof cn)l=Sl(t.firestore,va),u=lI(t._key.path),c={next:d=>{e[o]&&e[o](X4(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=Sl(t,Jf);l=Sl(d.firestore,va),u=d._query;let h=new np(l);c={next:f=>{e[o]&&e[o](new nI(l,h,d,f))},error:e[o+1],complete:e[o+2]},Q4(t._query)}return function(h,f,m,g){let y=new KE(g),v=new BE(f,y,m);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return I4(yield CM(h),v)})),()=>{y.$a(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return T4(yield CM(h),v)}))}}(bP(l),u,a,c)}function Z4(t,e){return function(r,i){let s=new xr;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return M4(yield B4(r),i,s)})),s.promise}(bP(t),e)}function X4(t,e,n){let r=n.docs.get(e._key),i=new np(t);return new tp(t,i,e._key,r,new Ds(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){wa=i})(Yn),Qn(new Ft("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new va(new Aw(r.getProvider("auth-internal")),new Pw(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mf(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Me(XN,"4.6.1",e),Me(XN,"4.6.1","esm2017")})();var lp=function(){return lp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lp.apply(this,arguments)};var n3={includeMetadataChanges:!1};function FP(t,e){return e===void 0&&(e=n3),new ne(function(n){var r=vI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function LP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:lp(lp({},r),(n={},n[e.idField]=t.id,n))}function VP(t){return FP(t,{includeMetadataChanges:!0}).pipe(Z(function(e){return e.docs}))}function UP(t,e){return e===void 0&&(e={}),VP(t).pipe(Z(function(n){return n.map(function(r){return LP(r,e)})}))}var Os=class{constructor(e){return e}},jP="firestore",wI=class{constructor(){return ds(jP)}};var EI=new F("angularfire2.firestore-instances");function r3(t,e){let n=zo(jP,t,e);return n&&new Os(n)}function i3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Os(r)}}var s3={provide:wI,deps:[[new Je,EI]]},o3={provide:Os,useFactory:r3,deps:[[new Je,EI],Cn]},a3=(()=>{class t{constructor(){Me("angularfire",br.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[o3,s3]})}return t})();function BP(t,...e){return{ngModule:a3,providers:[{provide:EI,useFactory:i3(t),multi:!0,deps:[ae,nt,ui,Sr,[new Je,ys],[new Je,li],...e]}]}}var $P=Lt(UP,!0);var HP=Lt(kP,!0);var II=Lt(TP,!0);var qP=Lt(DP,!0);var Q=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Q||{}),lr="*";function zP(t,e){return{type:Q.Trigger,name:t,definitions:e,options:{}}}function TI(t,e=null){return{type:Q.Animate,styles:e,timings:t}}function GP(t,e=null){return{type:Q.Sequence,steps:t,options:e}}function ks(t){return{type:Q.Style,styles:t,offset:null}}function up(t,e,n){return{type:Q.State,name:t,styles:e,options:n}}function CI(t,e,n=null){return{type:Q.Transition,expr:t,animation:e,options:n}}var Ei=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},$l=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},dp="!";var WP=["toast-component",""];function l3(t,e){if(t&1){let n=yy();D(0,"button",5),He("click",function(){Bg(n);let i=Ht();return $g(i.remove())}),D(1,"span",6),L(2,"\xD7"),S()()}}function u3(t,e){if(t&1&&(Hd(0),L(1),qd()),t&2){let n=Ht(2);Se(),ri("[",n.duplicatesCount+1,"]")}}function d3(t,e){if(t&1&&(D(0,"div"),L(1),No(2,u3,2,1,"ng-container",4),S()),t&2){let n=Ht();Ir(n.options.titleClass),ni("aria-label",n.title),Se(),ri(" ",n.title," "),Se(),vt("ngIf",n.duplicatesCount)}}function h3(t,e){if(t&1&&ve(0,"div",7),t&2){let n=Ht();Ir(n.options.messageClass),vt("innerHTML",n.message,ey)}}function f3(t,e){if(t&1&&(D(0,"div",8),L(1),S()),t&2){let n=Ht();Ir(n.options.messageClass),ni("aria-label",n.message),Se(),ri(" ",n.message," ")}}function p3(t,e){if(t&1&&(D(0,"div"),ve(1,"div",9),S()),t&2){let n=Ht();Se(),Gi("width",n.width+"%")}}function m3(t,e){if(t&1){let n=yy();D(0,"button",5),He("click",function(){Bg(n);let i=Ht();return $g(i.remove())}),D(1,"span",6),L(2,"\xD7"),S()()}}function g3(t,e){if(t&1&&(Hd(0),L(1),qd()),t&2){let n=Ht(2);Se(),ri("[",n.duplicatesCount+1,"]")}}function y3(t,e){if(t&1&&(D(0,"div"),L(1),No(2,g3,2,1,"ng-container",4),S()),t&2){let n=Ht();Ir(n.options.titleClass),ni("aria-label",n.title),Se(),ri(" ",n.title," "),Se(),vt("ngIf",n.duplicatesCount)}}function _3(t,e){if(t&1&&ve(0,"div",7),t&2){let n=Ht();Ir(n.options.messageClass),vt("innerHTML",n.message,ey)}}function v3(t,e){if(t&1&&(D(0,"div",8),L(1),S()),t&2){let n=Ht();Ir(n.options.messageClass),ni("aria-label",n.message),Se(),ri(" ",n.message," ")}}function w3(t,e){if(t&1&&(D(0,"div"),ve(1,"div",9),S()),t&2){let n=Ht();Se(),Gi("width",n.width+"%")}}var DI=class{_attachedHost;component;viewContainerRef;injector;constructor(e,n){this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},bI=class{_attachedPortal;_disposeFn;attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},SI=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new xe;_activate=new xe;_manualClose=new xe;_resetTimeout=new xe;_countDuplicate=new xe;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},Ta=class{toastId;config;message;title;toastType;toastRef;_onTap=new xe;_onAction=new xe;constructor(e,n,r,i,s,o){this.toastId=e,this.config=n,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},KP={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},QP=new F("ToastConfig"),AI=class extends bI{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,n,r){super(),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=r}attachComponentPortal(e,n){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},E3=(()=>{class t{_document=b(rt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),RI=class{_portalHost;constructor(e){this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}},I3=(()=>{class t{_overlayContainer=b(E3);_componentFactoryResolver=b(So);_appRef=b(Tr);_document=b(rt);_paneElements=new Map;create(n,r){return this._createOverlayRef(this.getPaneElement(n,r))}getPaneElement(n="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[n]||(this._paneElements.get(r)[n]=this._createPaneElement(n,r)),this._paneElements.get(r)[n]}_createPaneElement(n,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(n),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(n){return new AI(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new RI(this._createPortalHost(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ca=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig=I(I({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=I(I({},n.default.iconClasses),n.config.iconClasses))}show(n,r,i={},s=""){return this._preBuildNotification(s,n,r,this.applyConfig(i))}success(n,r,i={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}error(n,r,i={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}info(n,r,i={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}warning(n,r,i={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}clear(n){for(let r of this.toasts)if(n!==void 0){if(r.toastId===n){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(n){let r=this._findToast(n);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(n="",r="",i,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let c=o&&a.title===n;if((!o||c)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(n={}){return I(I({},this.toastrConfig),n)}_findToast(n){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===n)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(n,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,r,i,s)):this._buildNotification(n,r,i,s)}_buildNotification(n,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let c=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=r;r&&s.enableHtml&&(l=this.sanitizer.sanitize(In.HTML,r));let u=new SI(c),d=new Ta(this.index,s,l,i,n,u),h=[{provide:Ta,useValue:d}],f=nt.create({providers:h,parent:this._injector}),m=new DI(s.toastComponent,f),g=c.attach(m,s.newestOnTop);u.componentInstance=g.instance;let y={toastId:this.index,title:i||"",message:r||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:g};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{y.toastRef.activate()})),this.toasts.push(y),y}static \u0275fac=function(r){return new(r||t)(x(QP),x(I3),x(nt),x(Oy),x(ae))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),T3=(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=le(I({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=le(I({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=le(I({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),r)):this.timeout=setTimeout(()=>n(),r)}outsideInterval(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),r)):this.intervalId=setInterval(()=>n(),r)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(r){return new(r||t)(te(Ca),te(Ta),te(ae))};static \u0275cmp=$e({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&He("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(_y("@flyInOut",i.state),Ir(i.toastClasses),Gi("display",i.displayStyle))},standalone:!0,features:[qe],attrs:WP,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&No(0,l3,3,0,"button",0)(1,d3,3,5,"div",1)(2,h3,1,3,"div",2)(3,f3,2,4,"div",3)(4,p3,2,2,"div",4),r&2&&(vt("ngIf",i.options.closeButton),Se(),vt("ngIf",i.title),Se(),vt("ngIf",i.message&&i.options.enableHtml),Se(),vt("ngIf",i.message&&!i.options.enableHtml),Se(),vt("ngIf",i.options.progressBar))},dependencies:[Cy],encapsulation:2,data:{animation:[zP("flyInOut",[up("inactive",ks({opacity:0})),up("active",ks({opacity:1})),up("removed",ks({opacity:0})),CI("inactive => active",TI("{{ easeTime }}ms {{ easing }}")),CI("active => removed",TI("{{ easeTime }}ms {{ easing }}"))])]}})}return t})(),C3=le(I({},KP),{toastComponent:T3}),YP=(t={})=>To([{provide:QP,useValue:{default:C3,config:t}}]);var D3=(()=>{class t{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||t)(te(Ca),te(Ta),te(Tr))};static \u0275cmp=$e({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&He("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Ir(i.toastClasses),Gi("display",i.displayStyle))},standalone:!0,features:[qe],attrs:WP,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&No(0,m3,3,0,"button",0)(1,y3,3,5,"div",1)(2,_3,1,3,"div",2)(3,v3,2,4,"div",3)(4,w3,2,2,"div",4),r&2&&(vt("ngIf",i.options.closeButton),Se(),vt("ngIf",i.title),Se(),vt("ngIf",i.message&&i.options.enableHtml),Se(),vt("ngIf",i.message&&!i.options.enableHtml),Se(),vt("ngIf",i.options.progressBar))},dependencies:[Cy],encapsulation:2})}return t})(),Die=le(I({},KP),{toastComponent:D3});var Da=(()=>{let e=class e{constructor(r,i,s,o){this.router=r,this.firestore=i,this.auth=s,this.toastr=o,this.loginsCollections=[],this.countLogins=0,this.userMail="",this.userPWD="",this.loggedUser="",this.logged=!1,this.flagError=!1,this.msjError=""}Login(r,i){RR(this.auth,r,i).then(s=>{s.user.email!==null&&(this.loggedUser=s.user.email),this.logged=!0;let o=II(this.firestore,"logins");HP(o,{usuario:r,fecha:new Date}),this.goTo("home")}).catch(s=>{switch(s.code){case"auth/invalid-email":this.msjError="Email invalido";break;case"auth/email-already-in-use":this.msjError="Email ya registrado";break;case"auth/invalid-credential":this.msjError="Email y/o contrase\xF1a incorrecto";break;default:this.msjError=s.code;break}console.log(s.code),this.toastr.error(this.msjError,"Error")})}GetData(){let r=II(this.firestore,"logins"),i=$P(r);this.sub=i.subscribe(s=>{this.loginsCollections=s,this.countLogins=this.loginsCollections.length})}CloseSession(){NR(this.auth).then(()=>{this.goTo("login")})}Register(r,i){SR(this.auth,r,i).then(s=>{s.user.email!==null&&(this.loggedUser=s.user.email),this.flagError=!1,this.goTo("home"),this.toastr.success("Cuenta creada con exito!","Bienvenido")}).catch(s=>{switch(this.flagError=!0,s.code){case"auth/invalid-email":this.msjError="Email invalido";break;case"auth/email-already-in-use":this.msjError="Email ya registrado";break;case"auth/weak-password":this.msjError="La contrase\xF1a debe tener m\xE1s de 6 caracteres";break;default:this.msjError=s.code;break}console.log(this.msjError),this.toastr.error(this.msjError,"Error!")})}isLogged(){return this.auth.currentUser?.email==null?this.logged=!1:this.logged=!0,this.logged}goTo(r){this.router.navigate([r])}};e.\u0275fac=function(i){return new(i||e)(x(qn),x(Os),x(gs),x(Ca))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hp=(()=>{let e=class e{constructor(r,i){this.router=r,this.auth=i}isLogged(){return this.auth.isLogged()}goTo(r){this.router.navigate([r])}};e.\u0275fac=function(i){return new(i||e)(te(qn),te(Da))},e.\u0275cmp=$e({type:e,selectors:[["app-sidebar"]],standalone:!0,features:[qe],decls:25,vars:0,consts:[[1,"navbar","navbar-expand-lg",2,"background-color","rgb(0, 0, 68)"],[1,"container"],["href","#",1,"navbar-brand","fs-4","text-white"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar","aria-label","Toggle navigation",1,"navbar-toggler","shadow-none","border-0","bg-light"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasNavbar","aria-labelledby","offcanvasNavbarLabel",1,"sidebar","offcanvas","offcanvas-start"],[1,"offcanvas-header","text-white","border-bottom"],["id","offcanvasNavbarLabel",1,"offcanvas-title","text-white"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white","shadow-none"],[1,"offcanvas-body","d-flex","flex-column","flex-lg-row","p-4","p-lg-0"],[1,"navbar-nav","justify-content-center","align-items-center","fs-5","flex-grow-1","pe-3"],[1,"nav-item","mx-2"],["aria-current","page","href","home",1,"nav-link","active","text-white",3,"click"],["href","chat",1,"nav-link","text-white",3,"click"],["href","about",1,"nav-link","text-white",3,"click"],[1,"d-flex","flex-column","flex-lg-row","justify-content-center","align-items-center","text-center","gap-3","fs-6"],["href","login","id","btnLogin",1,"text-white","text-decoration-none","px-3","py-1","rounded-4",2,"background-color","rgb(60, 179, 113)",3,"click"]],template:function(i,s){i&1&&(D(0,"nav",0)(1,"div",1)(2,"a",2),L(3,"Sala de juegos"),S(),D(4,"button",3),ve(5,"span",4),S(),D(6,"div",5)(7,"div",6)(8,"h5",7),L(9,"Sala de juegos"),S(),ve(10,"button",8),S(),D(11,"div",9)(12,"ul",10)(13,"li",11)(14,"a",12),He("click",function(){return s.goTo("home")}),L(15,"Home"),S()(),D(16,"li",11)(17,"a",13),He("click",function(){return s.goTo("chat")}),L(18,"Chat"),S()(),D(19,"li",11)(20,"a",14),He("click",function(){return s.goTo("about")}),L(21,"About me"),S()()(),D(22,"div",15)(23,"a",16),He("click",function(){return s.goTo("login")}),L(24,"Cerrar sesi\xF3n"),S()()()()()())},styles:["*[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}#btnLogin[_ngcontent-%COMP%], #btnRegister[_ngcontent-%COMP%]{width:110px}#btnRegister[_ngcontent-%COMP%]{margin-left:10px}@media (max-width: 991px){.sidebar[_ngcontent-%COMP%]{background-color:#004;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}#btnRegister[_ngcontent-%COMP%]{margin-top:10px;margin-left:0}}"]});let t=e;return t})();var ZP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-cards"]],standalone:!0,features:[qe],decls:46,vars:0,consts:[[1,"container","py-5"],[1,"row","m-0","my-4","d-flex","justify-content-center","align-items-center","flex-wrap"],["id","cardMiJuego",1,"col-sm-12","col-md-6","col-lg-3","card","m-1","border","rounded-5","p-3",2,"width","18rem","height","500px"],[1,"card-header","p-0","rounded-5",2,"height","250px"],["src","../../../assets/preguntados.jpg","alt","...",1,"card-img-top","w-100","h-100","border","rounded-5",2,"background-size","cover"],[1,"card-body"],[1,"card-title"],[1,"card-footer","text-center"],["href","#",1,"btn","btn-primary"],["src","../../../assets/unnamed.png","alt","...",1,"card-img-top","border","rounded-5",2,"background-size","cover","height","178px"],["src","../../../assets/40711704-casino-poker-card-cartoon-seamless-pattern-background.jpg","alt","...",1,"card-img-top","border","rounded-5",2,"background-size","cover","height","178px"],[1,"card-body","h-100"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),ve(4,"img",4),S(),D(5,"div",5)(6,"h5",6),L(7,"Preguntados"),S(),D(8,"small"),L(9,"Desaf\xEDa tus conocimientos con 'Preguntados'. Para ganar, tendras que conseguir los personajes correspondientes a cada una de las categorias. Aprovecha para poner a prueba tus conocimientos combinando ingenio y estrategia."),S()(),D(10,"div",7)(11,"a",8),L(12,"Jugar"),S()()(),D(13,"div",2)(14,"div",3),ve(15,"img",9),S(),D(16,"div",5)(17,"h5",6),L(18,"Ahorcado"),S(),D(19,"small"),L(20,"El cl\xE1sico juego del ahorcado desaf\xEDa tus habilidades ling\xFC\xEDsticas al adivinar palabras letra por letra antes de que se complete el dibujo del ahorcado. Es divertido, r\xE1pido y perfecto para poner a prueba tu vocabulario."),S()(),D(21,"div",7)(22,"a",8),L(23,"Jugar"),S()()(),D(24,"div",2)(25,"div",3),ve(26,"img",10),S(),D(27,"div",11)(28,"h5",6),L(29,"Mayor-Menor"),S(),D(30,"small"),L(31,"Desaf\xEDa tu intuici\xF3n. Adivina si la siguiente carta ser\xE1 mayor o menor que la anterior. \xA1R\xE1pido, divertido y perfecto para entrenar tu percepci\xF3n y tomar decisiones r\xE1pidas."),S()(),D(32,"div",7)(33,"a",8),L(34,"Jugar"),S()()(),D(35,"div",2)(36,"div",3),ve(37,"img",4),S(),D(38,"div",5)(39,"h5",6),L(40,"Mi Juego"),S(),D(41,"small"),L(42,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Inventore placeat esse quibusdam ipsum beatae earum, ipsa iure quia ad aut nihil. Sint aliquam, est amet commodi officia praesentium molestias provident?"),S()(),D(43,"div",7)(44,"a",8),L(45,"Jugar"),S()()()()())},styles:["#cardPreguntados[_ngcontent-%COMP%], #cardAhorcado[_ngcontent-%COMP%], #cardMayorMenor[_ngcontent-%COMP%], #cardMiJuego[_ngcontent-%COMP%]{box-shadow:#32325d40 0 13px 27px -5px,#0000004d 0 8px 16px -8px}"]});let t=e;return t})();var XP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-home"]],standalone:!0,features:[qe],decls:4,vars:0,consts:[["id","idSidebar"],[1,"container-fluid","h-100"]],template:function(i,s){i&1&&(D(0,"section"),ve(1,"app-sidebar",0),S(),D(2,"div",1),ve(3,"app-cards"),S())},dependencies:[hp,ZP],styles:["#cardsContainer[_ngcontent-%COMP%]{background-repeat:repeat}#idSidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000}"]});let t=e;return t})();var ax=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(te(Ao),te(Xr))},e.\u0275dir=wn({type:e});let t=e;return t})(),b3=(()=>{let e=class e extends ax{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=uc(e)))(s||e)}})(),e.\u0275dir=wn({type:e,features:[Ro]});let t=e;return t})(),cx=new F("");var S3={provide:cx,useExisting:ac(()=>Sa),multi:!0};function A3(){let t=Cr()?Cr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var R3=new F(""),Sa=(()=>{let e=class e extends ax{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!A3())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(te(Ao),te(Xr),te(R3,8))},e.\u0275dir=wn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&He("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[vy([S3]),Ro]});let t=e;return t})();var N3=new F(""),M3=new F("");function lx(t){return t!=null}function ux(t){return Qi(t)?ke(t):t}function dx(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function hx(t,e){return e.map(n=>n(t))}function P3(t){return!t.validate}function fx(t){return t.map(e=>P3(e)?e:n=>e.validate(n))}function x3(t){if(!t)return null;let e=t.filter(lx);return e.length==0?null:function(n){return dx(hx(n,e))}}function px(t){return t!=null?x3(fx(t)):null}function O3(t){if(!t)return null;let e=t.filter(lx);return e.length==0?null:function(n){let r=hx(n,e).map(ux);return wm(r).pipe(Z(dx))}}function mx(t){return t!=null?O3(fx(t)):null}function ex(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function k3(t){return t._rawValidators}function F3(t){return t._rawAsyncValidators}function MI(t){return t?Array.isArray(t)?t:[t]:[]}function pp(t,e){return Array.isArray(t)?t.includes(e):t===e}function tx(t,e){let n=MI(e);return MI(t).forEach(i=>{pp(n,i)||n.push(i)}),n}function nx(t,e){return MI(e).filter(n=>!pp(t,n))}var mp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=px(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},PI=class extends mp{get formDirective(){return null}get path(){return null}},zl=class extends mp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},xI=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},L3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Qie=le(I({},L3),{"[class.ng-submitted]":"isSubmitted"}),gp=(()=>{let e=class e extends xI{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(te(zl,2))},e.\u0275dir=wn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&gy("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ro]});let t=e;return t})();var Hl="VALID",fp="INVALID",ba="PENDING",ql="DISABLED";function V3(t){return(yp(t)?t.validators:t)||null}function U3(t){return Array.isArray(t)?px(t):t||null}function j3(t,e){return(yp(e)?e.asyncValidators:t)||null}function B3(t){return Array.isArray(t)?mx(t):t||null}function yp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var OI=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Hl}get invalid(){return this.status===fp}get pending(){return this.status==ba}get disabled(){return this.status===ql}get enabled(){return this.status!==ql}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nx(e,this._rawAsyncValidators))}hasValidator(e){return pp(this._rawValidators,e)}hasAsyncValidator(e){return pp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ba,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ql,this.errors=null,this._forEachChild(r=>{r.disable(le(I({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Hl,this._forEachChild(r=>{r.enable(le(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hl||this.status===ba)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ql:Hl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ba,this._hasOwnPendingAsyncValidator=!0;let n=ux(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Rt,this.statusChanges=new Rt}_calculateStatus(){return this._allControlsDisabled()?ql:this.errors?fp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ba)?ba:this._anyControlsHaveStatus(fp)?fp:Hl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=U3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=B3(this._rawAsyncValidators)}};var gx=new F("CallSetDisabledState",{providedIn:"root",factory:()=>kI}),kI="always";function $3(t,e){return[...e.path,t]}function H3(t,e,n=kI){z3(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),G3(t,e),K3(t,e),W3(t,e),q3(t,e)}function rx(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function q3(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function z3(t,e){let n=k3(t);e.validator!==null?t.setValidators(ex(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=F3(t);e.asyncValidator!==null?t.setAsyncValidators(ex(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();rx(e._rawValidators,i),rx(e._rawAsyncValidators,i)}function G3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&yx(t,e)})}function W3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&yx(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function yx(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function K3(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Q3(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Y3(t){return Object.getPrototypeOf(t.constructor)===b3}function J3(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Sa?n=s:Y3(s)?r=s:i=s}),i||r||n||null}function ix(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sx(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Z3=class extends OI{constructor(e=null,n,r){super(V3(n),j3(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ix(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ix(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var X3={provide:zl,useExisting:ac(()=>Gl)},ox=Promise.resolve(),Gl=(()=>{let e=class e extends zl{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Z3,this._registered=!1,this.name="",this.update=new Rt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=J3(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Q3(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){H3(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){ox.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Gd(i);ox.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?$3(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(te(PI,9),te(N3,10),te(M3,10),te(cx,10),te(Yi,8),te(gx,8))},e.\u0275dir=wn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[nn.None,"disabled","isDisabled"],model:[nn.None,"ngModel","model"],options:[nn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vy([X3]),Ro,bo]});let t=e;return t})();var e9=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({});let t=e;return t})();var _p=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:gx,useValue:r.callSetDisabledState??kI}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dt({type:e}),e.\u0275inj=ut({imports:[e9]});let t=e;return t})();var vx=(()=>{let e=class e{constructor(r,i){this.router=r,this.auth=i,this.loginsCollections=[],this.countLogins=0,this.userMail="",this.userPWD="",this.loggedUser=""}Login(){this.auth.Login(this.userMail,this.userPWD)}CloseSession(){this.auth.CloseSession()}goTo(r){this.router.navigate([r])}AccesoRapido(){this.userMail="admin@gmail.com",this.userPWD="admin123"}};e.\u0275fac=function(i){return new(i||e)(te(qn),te(Da))},e.\u0275cmp=$e({type:e,selectors:[["app-login"]],standalone:!0,features:[qe],decls:34,vars:2,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"row","border","rounded-5","p-3","bg-white","shadow","box-area","align-items-center","justify-content-center"],[1,"col-md-6","rounded-4","d-flex","justify-content-center","align-items-center","flex-column","left-box",2,"background-image","url(../assets/gifLogin.gif)","width","400px","height","400px","background-position","center","background-size","cover"],[1,"text-white","fs-1",2,"font-family","Open Sans, sans-serif","font-weight","600","margin-top","100px"],[1,"text-white","text-wrap","text-center","fs-10",2,"width","15rem","font-family","Open Sans, sans-serif"],[1,"col-md-6","right-box"],[1,"row","align-items-center"],[1,"header-text","mb-4"],[1,"login-text","text-center",2,"font-size","20px"],[1,"input-group","mb-3"],["type","text","placeholder","Correo electr\xF3nico",1,"form-control","form-control-lg","gb-light","fs-6",3,"ngModelChange","ngModel"],[1,"input-group","mb-1"],["type","password","placeholder","Constrase\xF1a",1,"form-control","form-control-lg","gb-light","fs-6",3,"ngModelChange","ngModel"],[1,"btn","btn-lg","btn-primary","w-100","fs-6","mt-5",3,"click"],[1,"btn","btn-lg","w-100","fs-6","mt-1","text-white",2,"background-color","rgb(172, 134, 207)",3,"click"],[1,"row"],["href","registro",3,"click"]],template:function(i,s){i&1&&(D(0,"html",0)(1,"head"),ve(2,"meta",1)(3,"meta",2),D(4,"title"),L(5,"Sala de juegos | LOGIN"),S()(),D(6,"body")(7,"div",3)(8,"div",4)(9,"div",5)(10,"p",6),L(11,"Bienvenido!"),S(),D(12,"small",7),L(13,"Una p\xE1gina donde podr\xE1 disfrutar de sus juegos favoritos. Comencemos!"),S()(),D(14,"div",8)(15,"div",9)(16,"div",10)(17,"p",11),L(18,"Inicia sesi\xF3n para comenzar a jugar! "),S()(),D(19,"div",12)(20,"input",13),Ki("ngModelChange",function(a){return Mo(s.userMail,a)||(s.userMail=a),a}),S()(),D(21,"div",14)(22,"input",15),Ki("ngModelChange",function(a){return Mo(s.userPWD,a)||(s.userPWD=a),a}),S()(),D(23,"div",12)(24,"button",16),He("click",function(){return s.Login()}),L(25,"Iniciar sesi\xF3n"),S()(),D(26,"div",12)(27,"button",17),He("click",function(){return s.AccesoRapido()}),L(28,"Acceso r\xE1pido"),S()(),D(29,"div",18)(30,"small"),L(31,"\xBFNo tienes una cuenta? "),D(32,"a",19),He("click",function(){return s.goTo("registro")}),L(33,"Crear cuenta"),S()()()()()()()()()),i&2&&(Se(20),Wi("ngModel",s.userMail),Se(2),Wi("ngModel",s.userPWD))},dependencies:[Dy,_p,Sa,gp,Gl],styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;background-image:url("./media/609668-WZSVGNHF.jpg");background-position:center;background-size:cover}.box-area[_ngcontent-%COMP%]{width:930px}.right-box[_ngcontent-%COMP%]{padding:40px 30px 40px 40x}[_ngcontent-%COMP%]::placeholder{font-size:16px}@media only screen and (max-width: 768px){.box-area[_ngcontent-%COMP%]{margin:0 10px}.left-box[_ngcontent-%COMP%]{height:100px;overflow:hidden}.right-box[_ngcontent-%COMP%]{padding:20px}}']});let t=e;return t})();var wx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-quiensoy"]],standalone:!0,features:[qe],decls:17,vars:0,consts:[[1,"container-sup","vh-100"],[1,"container"],[1,"row","align-items-center"],[1,"header-text","mb-4"],[1,"login-text","text-center","text-white",2,"font-size","20px"],[1,"container","d-flex","justify-content-center","align-items-center"],[1,"row","border","rounded-5","p-3","bg-white","shadow","box-area","align-items-center","justify-content-center"],[1,"col-md-6","rounded-4","d-flex","justify-content-center","align-items-center","flex-column","left-box",2,"background-image","url(../../../assets/gifLogin.gif)","width","400px","height","400px","background-position","center","background-size","cover"],[1,"col-md-6","right-box"],[1,"login-text","text-center",2,"font-size","20px"]],template:function(i,s){i&1&&(D(0,"div",0),ve(1,"app-sidebar"),D(2,"div",1)(3,"div",2)(4,"div",3)(5,"p",4),L(6,"\xBFQui\xE9n soy?"),S()()(),D(7,"div",5)(8,"div",6),ve(9,"div",7),D(10,"div",8)(11,"div",2)(12,"div",3)(13,"p",9),L(14,"Juan Ignacio Fern\xE1ndez"),S()(),D(15,"p"),L(16,"Soy estudiante de programaci\xF3n en la Universidad Tecnol\xF3gica Nacional. Actualmente me encuentro cursando Laboratorio IV, materia para la cual debo presentar este mismo proyecto el cual simula ser una Sala de Juegos."),S()()()()()()())},dependencies:[hp],styles:['.container-sup[_ngcontent-%COMP%]{background-image:url("./media/609668-WZSVGNHF.jpg");background-position:center;background-size:cover}.container[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}']});let t=e;return t})();var Ex=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-page-not-found"]],standalone:!0,features:[qe],decls:2,vars:0,template:function(i,s){i&1&&(D(0,"p"),L(1,"page-not-found works!"),S())}});let t=e;return t})();var Ix=(()=>{let e=class e{constructor(r,i,s){this.router=r,this.auth=i,this.toast=s,this.newUserMail="",this.newUserPWD=""}Register(){this.auth.Register(this.newUserMail,this.newUserPWD)}goTo(r){this.router.navigate([r])}};e.\u0275fac=function(i){return new(i||e)(te(qn),te(Da),te(Ca))},e.\u0275cmp=$e({type:e,selectors:[["app-registro"]],standalone:!0,features:[qe],decls:29,vars:2,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"row","border","rounded-5","p-3","bg-dark","shadow","box-area","align-items-center","justify-content-center"],[1,"col-md-6","rounded-4","d-flex","justify-content-center","align-items-center","flex-column","left-box",2,"background-image","url(../assets/gifRegistro.gif)","width","400px","height","400px","background-position","center","background-size","cover"],[1,"col-md-6","right-box"],[1,"row","align-items-center"],[1,"header-text","mb-4"],[1,"text-center","text-white"],[1,"login-text","text-center","text-white",2,"font-size","20px"],[1,"input-group","mb-3"],["type","text","placeholder","Correo electr\xF3nico",1,"form-control","form-control-lg","gb-light","fs-6",3,"ngModelChange","ngModel"],[1,"input-group","mb-1"],["type","password","placeholder","Constrase\xF1a",1,"form-control","form-control-lg","gb-light","fs-6",3,"ngModelChange","ngModel"],[1,"btn","btn-lg","w-100","fs-6","text-white","mt-5",2,"background-color","rgb(60, 179, 113)",3,"click"],[1,"row"],[1,"text-white"],["href","login",3,"click"]],template:function(i,s){i&1&&(D(0,"html",0)(1,"head"),ve(2,"meta",1)(3,"meta",2),D(4,"title"),L(5,"Sala de juegos | LOGIN"),S()(),D(6,"body")(7,"div",3)(8,"div",4),ve(9,"div",5),D(10,"div",6)(11,"div",7)(12,"div",8)(13,"h3",9),L(14,"Crear cuenta"),S(),D(15,"p",10),L(16,"Por favor, ingrese los datos correspondientes para crear su cuenta. "),S()(),D(17,"div",11)(18,"input",12),Ki("ngModelChange",function(a){return Mo(s.newUserMail,a)||(s.newUserMail=a),a}),S()(),D(19,"div",13)(20,"input",14),Ki("ngModelChange",function(a){return Mo(s.newUserPWD,a)||(s.newUserPWD=a),a}),S()(),D(21,"div",11)(22,"button",15),He("click",function(){return s.Register()}),L(23,"Registrarse"),S()(),D(24,"div",16)(25,"small",17),L(26,"\xBFYa tiene una cuenta creada?"),D(27,"a",18),He("click",function(){return s.goTo("login")}),L(28," Iniciar sesi\xF3n"),S()()()()()()()()()),i&2&&(Se(18),Wi("ngModel",s.newUserMail),Se(2),Wi("ngModel",s.newUserPWD))},dependencies:[_p,Sa,gp,Gl],styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;background-image:url("./media/609668-WZSVGNHF.jpg");background-position:center;background-size:cover}.box-area[_ngcontent-%COMP%]{width:930px}.right-box[_ngcontent-%COMP%]{padding:40px 30px 40px 40x}[_ngcontent-%COMP%]::placeholder{font-size:16px}@media only screen and (max-width: 768px){.box-area[_ngcontent-%COMP%]{margin:0 10px}.left-box[_ngcontent-%COMP%]{height:100px;overflow:hidden}.right-box[_ngcontent-%COMP%]{padding:20px}}']});let t=e;return t})();var Tx=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"home",component:XP},{path:"login",component:vx},{path:"registro",component:Ix},{path:"about",component:wx},{path:"**",component:Ex}];var Cx="@firebase/database",Dx="1.0.4";var xT="";function t9(t){xT=t}var HI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),it(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Bo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var qI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Gn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var rO=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new HI(e)}}catch{}return new qI},Ls=rO("localStorage"),zI=rO("sessionStorage");var Ma=new Wn("@firebase/database"),n9=function(){let t=1;return function(){return t++}}(),iO=function(t){let e=mA(t),n=new gh;n.update(e);let r=n.digest();return yh.encodeByteArray(r)},su=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=su.apply(null,r):typeof r=="object"?e+=it(r):e+=r,e+=" "}return e},Vs=null,bx=!0,r9=function(t,e){T(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ma.logLevel=ee.VERBOSE,Vs=Ma.log.bind(Ma),e&&zI.set("logging_enabled",!0)):typeof t=="function"?Vs=t:(Vs=null,zI.remove("logging_enabled"))},Ct=function(...t){if(bx===!0&&(bx=!1,Vs===null&&zI.get("logging_enabled")===!0&&r9(!0)),Vs){let e=su.apply(null,t);Vs(e)}},ou=function(t){return function(...e){Ct(t,...e)}},GI=function(...t){let e="FIREBASE INTERNAL ERROR: "+su(...t);Ma.error(e)},Ur=function(...t){let e=`FIREBASE FATAL ERROR: ${su(...t)}`;throw Ma.error(e),new Error(e)},Qt=function(...t){let e="FIREBASE WARNING: "+su(...t);Ma.warn(e)},i9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},sO=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},s9=function(t){if(zn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xa="[MIN_NAME]",Us="[MAX_NAME]",ja=function(t,e){if(t===e)return 0;if(t===xa||e===Us)return-1;if(e===xa||t===Us)return 1;{let n=Sx(t),r=Sx(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},o9=function(t,e){return t===e?0:t<e?-1:1},Wl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+it(e))},OT=function(t){if(typeof t!="object"||t===null)return it(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=it(e[r]),n+=":",n+=OT(t[e[r]]);return n+="}",n},oO=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function dn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var aO=function(t){T(!sO(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},a9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},c9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var l9=new RegExp("^-?(0*)\\d{1,10}$"),u9=-2147483648,d9=2147483647,Sx=function(t){if(l9.test(t)){let e=Number(t);if(e>=u9&&e<=d9)return e}return null},au=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Qt("Exception was thrown by user callback.",n),e},Math.floor(0))}},h9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zl=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var WI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var KI=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(e)}},Xl=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),wp="5",cO="v",lO="s",uO="r",dO="f",hO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fO="ls",pO="p",QI="ac",mO="websocket",gO="long_polling";var Ep=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ls.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ls.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function f9(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function yO(t,e,n){T(typeof e=="string","typeof type must == string"),T(typeof n=="object","typeof params must == object");let r;if(e===mO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===gO)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);f9(t)&&(n.ns=t.namespace);let i=[];return dn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var YI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Gn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return iA(this.counters_)}};var FI={},LI={};function kT(t){let e=t.toString();return FI[e]||(FI[e]=new YI),FI[e]}function p9(t,e){let n=t.toString();return LI[n]||(LI[n]=e()),LI[n]}var JI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&au(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Ax="start",m9="close",g9="pLPCommand",y9="pRTLPCB",_O="id",vO="pw",wO="ser",_9="cb",v9="seg",w9="ts",E9="d",I9="dframe",EO=1870,IO=30,T9=EO-IO,C9=25e3,D9=3e4,ZI=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ou(e),this.stats_=kT(n),this.urlFn=c=>(this.appCheckToken&&(c[QI]=this.appCheckToken),yO(n,gO,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new JI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(D9)),s9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new XI((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ax)this.id=a,this.password=c;else if(o===m9)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Ax]="t",r[wO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[_9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cO]=wp,this.transportSessionId&&(r[lO]=this.transportSessionId),this.lastSessionId&&(r[fO]=this.lastSessionId),this.applicationId&&(r[pO]=this.applicationId),this.appCheckToken&&(r[QI]=this.appCheckToken),typeof location<"u"&&location.hostname&&hO.test(location.hostname)&&(r[uO]=dO);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return zn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!a9()&&!c9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=b_(n),i=oO(r,T9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(zn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[I9]="t",r[_O]=e,r[vO]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=it(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},XI=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,zn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=n9(),window[g9+this.uniqueCallbackIdentifier]=e,window[y9+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ct("frame writing exception"),a.stack&&Ct(a.stack),Ct(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ct("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[_O]=this.myID,e[vO]=this.myPW,e[wO]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+IO+r.length<=EO;){let o=this.pendingSegs.shift();r=r+"&"+v9+i+"="+o.seg+"&"+w9+i+"="+o.ts+"&"+E9+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(C9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){zn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var b9=16384,S9=45e3,Ip=null;typeof MozWebSocket<"u"?Ip=MozWebSocket:typeof WebSocket<"u"&&(Ip=WebSocket);var Kl=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ou(this.connId),this.stats_=kT(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[cO]=wp,!zn()&&typeof location<"u"&&location.hostname&&hO.test(location.hostname)&&(a[uO]=dO),r&&(a[lO]=r),i&&(a[fO]=i),s&&(a[QI]=s),o&&(a[pO]=o),yO(n,mO,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ls.set("previous_websocket_failure",!0);try{let i;if(zn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${wp}/${xT}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ip(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Ip!==null&&!t.forceDisallow_}static previouslyFailed(){return Ls.isInMemoryStorage||Ls.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ls.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Bo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(T(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=it(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=oO(r,b9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(S9))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),A9=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ZI,Kl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Kl&&Kl.isAvailable(),i=r&&!Kl.previouslyFailed();if(n.webSocketOnly&&(r||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Kl];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),R9=6e4,N9=5e3,M9=10*1024,P9=100*1024,VI="t",Rx="d",x9="s",Nx="r",O9="e",Mx="o",Px="a",xx="n",Ox="p",k9="h",eT=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ou("c:"+this.id+":"),this.transportManager_=new A9(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>P9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>M9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(VI in e){let n=e[VI];n===Px?this.upgradeIfSecondaryHealthy_():n===Nx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Mx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Wl("t",e),r=Wl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ox,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Px,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:xx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Wl("t",e),r=Wl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Wl(VI,e);if(Rx in e){let r=e[Rx];if(n===k9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===xx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===x9?this.onConnectionShutdown_(r):n===Nx?this.onReset_(r):n===O9?GI("Server Error: "+r):n===Mx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):GI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wp!==r&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(R9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(N9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ox,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ls.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Tp=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Cp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},T(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){T(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Dp=class t extends Cp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return T(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var kx=32,Fx=768,Ce=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ie(){return new Ce("")}function he(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ti(t){return t.pieces_.length-t.pieceNum_}function Re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ce(t.pieces_,e)}function TO(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function F9(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function CO(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function DO(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ce(e,0)}function ct(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ce)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ce(n,0)}function ce(t){return t.pieceNum_>=t.pieces_.length}function ln(t,e){let n=he(t),r=he(e);if(n===null)return e;if(n===r)return ln(Re(t),Re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bO(t,e){if(Ti(t)!==Ti(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Nn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ti(t)>Ti(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tT=class{constructor(e,n){this.errorPrefix_=n,this.parts_=CO(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=jc(this.parts_[r]);SO(this)}};function L9(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=jc(e),SO(t)}function V9(t){let e=t.parts_.pop();t.byteLength_-=jc(e),t.parts_.length>0&&(t.byteLength_-=1)}function SO(t){if(t.byteLength_>Fx)throw new Error(t.errorPrefix_+"has a key path longer than "+Fx+" bytes ("+t.byteLength_+").");if(t.parts_.length>kx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kx+") or object contains a cycle "+Fs(t))}function Fs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var nT=class t extends Cp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return T(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ql=1e3,U9=60*5*1e3,Lx=30*1e3,j9=1.3,B9=3e4,$9="server_kill",Vx=3,FT=(()=>{class t extends Tp{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=ou("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ql,this.maxReconnectDelay_=U9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!zn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nT.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Dp.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(it(o)),T(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new ns,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),T(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),T(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Gn(n,"w")){let i=is(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||hA(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Lx)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=dA(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),T(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+it(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):GI("Unrecognized action received from server: "+it(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){T(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>B9&&(this.reconnectDelay_=Ql),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*j9)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){T(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ct("getToken() completed but was canceled"):(Ct("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new eT(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,m=>{Qt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt($9)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Qt(h),l())}}})}interrupt(n){Ct("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ct("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Vc(this.interruptReasons_)&&(this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>OT(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Ce(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Ct("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Vx&&(this.reconnectDelay_=Lx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ct("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Vx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";zn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+xT.replace(/\./g,"-")]=1,Lc()?n["framework.cordova"]=1:Eh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Dp.getInstance().currentlyOnline();return Vc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),fe=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Oa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new fe(xa,e),i=new fe(xa,n);return this.compare(r,i)!==0}minPost(){return fe.MIN}};var vp,bp=class extends Oa{static get __EMPTY_NODE(){return vp}static set __EMPTY_NODE(e){vp=e}compare(e,n){return ja(e.name,n.name)}isDefinedOn(e){throw rs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return fe.MIN}maxPost(){return new fe(Us,vp)}makePost(e,n){return T(typeof e=="string","KeyIndex indexValue must always be a string."),new fe(e,vp)}toString(){return".key"}},Pa=new bp;var Ra=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Rn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??un.EMPTY_NODE,this.right=o??un.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return un.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return un.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),rT=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Rn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},un=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ra(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ra(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ra(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ra(this.root_,null,this.comparator_,!0,e)}};un.EMPTY_NODE=new rT;function H9(t,e){return ja(t.name,e.name)}function LT(t,e){return ja(t,e)}var iT;function q9(t){iT=t}var AO=function(t){return typeof t=="number"?"number:"+aO(t):"string:"+t},RO=function(t){if(t.isLeafNode()){let e=t.val();T(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gn(e,".sv"),"Priority must be a string or number.")}else T(t===iT||t.isEmpty(),"priority of unexpected type.");T(t===iT||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Ux,ka=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,T(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),RO(this.priorityNode_)}static set __childrenNodeConstructor(n){Ux=n}static get __childrenNodeConstructor(){return Ux}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ce(n)?this:he(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=he(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(T(i!==".priority"||Ti(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Re(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+AO(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=aO(this.value_):n+=this.value_,this.lazyHash_=iO(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(T(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return T(s>=0,"Unknown leaf type: "+r),T(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),NO,MO;function z9(t){NO=t}function G9(t){MO=t}var sT=class extends Oa{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ja(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return fe.MIN}maxPost(){return new fe(Us,new ka("[PRIORITY-POST]",MO))}makePost(e,n){let r=NO(e);return new fe(n,new ka("[PRIORITY-POST]",r))}toString(){return".priority"}},bt=new sT;var W9=Math.log(2),oT=class{constructor(e){let n=s=>parseInt(Math.log(s)/W9,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Sp=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Rn(h,d.node,Rn.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=i(c,f),g=i(f+1,l);return d=t[f],h=n?n(d):d,new Rn(h,d.node,Rn.BLACK,m,g)}},s=function(c){let l=null,u=null,d=t.length,h=function(m,g){let y=d-m,v=d;d-=m;let N=i(y+1,v),M=t[y],$=n?n(M):M;f(new Rn($,M.node,g,null,N))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let g=c.nextBitIsOne(),y=Math.pow(2,c.count-(m+1));g?h(y,Rn.BLACK):(h(y,Rn.BLACK),h(y,Rn.RED))}return u},o=new oT(t.length),a=s(o);return new un(r||e,a)};var UI,Aa={},Fa=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return T(Aa&&bt,"ChildrenNode.ts has not been loaded"),UI=UI||new t({".priority":Aa},{".priority":bt}),UI}get(e){let n=is(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof un?n:null}hasIndex(e){return Gn(this.indexSet_,e.toString())}addIndex(e,n){T(e!==Pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(fe.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Sp(r,e.getCompare()):a=Aa;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Uc(this.indexes_,(i,s)=>{let o=is(this.indexSet_,s);if(T(o,"Missing index implementation for "+s),i===Aa)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(fe.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Sp(a,o.getCompare())}else return Aa;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new fe(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Uc(this.indexes_,i=>{if(i===Aa)return i;{let s=n.get(e.name);return s?i.remove(new fe(e.name,s)):i}});return new t(r,this.indexSet_)}};var Yl,Oe=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RO(this.priorityNode_),this.children_.isEmpty()&&T(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yl||(Yl=new t(new un(LT),null,Fa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yl}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Yl:r}}getChild(n){let r=he(n);return r===null?this:this.getImmediateChild(r).getChild(Re(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(T(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new fe(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Yl:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=he(n);if(i===null)return r;{T(he(n)!==".priority"||Ti(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Re(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(bt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+AO(this.getPriority().val())+":"),this.forEachChild(bt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":iO(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new fe(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new fe(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new fe(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,fe.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,fe.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===cu?-1:0}withIndex(n){if(n===Pa||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Pa||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(bt),s=r.getIterator(bt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Pa?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),aT=class extends Oe{constructor(){super(new un(LT),Oe.EMPTY_NODE,Fa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Oe.EMPTY_NODE}isEmpty(){return!1}},cu=new aT;Object.defineProperties(fe,{MIN:{value:new fe(xa,Oe.EMPTY_NODE)},MAX:{value:new fe(Us,cu)}});bp.__EMPTY_NODE=Oe.EMPTY_NODE;ka.__childrenNodeConstructor=Oe;q9(cu);G9(cu);var K9=!0;function Dt(t,e=null){if(t===null)return Oe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),T(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ka(n,Dt(e))}if(!(t instanceof Array)&&K9){let n=[],r=!1;if(dn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Dt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new fe(o,c)))}}),n.length===0)return Oe.EMPTY_NODE;let s=Sp(n,H9,o=>o.name,LT);if(r){let o=Sp(n,bt.getCompare());return new Oe(s,Dt(e),new Fa({".priority":o},{".priority":bt}))}else return new Oe(s,Dt(e),Fa.Default)}else{let n=Oe.EMPTY_NODE;return dn(t,(r,i)=>{if(Gn(t,r)&&r.substring(0,1)!=="."){let s=Dt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Dt(e))}}z9(Dt);var cT=class extends Oa{constructor(e){super(),this.indexPath_=e,T(!ce(e)&&he(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ja(e.name,n.name):s}makePost(e,n){let r=Dt(e),i=Oe.EMPTY_NODE.updateChild(this.indexPath_,r);return new fe(n,i)}maxPost(){let e=Oe.EMPTY_NODE.updateChild(this.indexPath_,cu);return new fe(Us,e)}toString(){return CO(this.indexPath_,0).join("/")}};var lT=class extends Oa{compare(e,n){let r=e.node.compareTo(n.node);return r===0?ja(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return fe.MIN}maxPost(){return fe.MAX}makePost(e,n){let r=Dt(e);return new fe(n,r)}toString(){return".value"}},Q9=new lT;function Y9(t){return{type:"value",snapshotNode:t}}function J9(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Z9(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jx(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function X9(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var uT=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return T(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return T(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xa}hasEnd(){return this.endSet_}getIndexEndValue(){return T(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return T(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Us}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return T(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Bx(t){let e={};if(t.isDefault())return e;let n;if(t.index_===bt?n="$priority":t.index_===Q9?n="$value":t.index_===Pa?n="$key":(T(t.index_ instanceof cT,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=it(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=it(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+it(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=it(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+it(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function $x(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==bt&&(e.i=t.index_.toString()),e}var dT=class t extends Tp{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ou("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(T(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=Bx(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),is(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Bx(e._queryParams),r=e._path.toString(),i=new ns;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+os(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Bo(a.responseText)}catch{Qt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Qt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var hT=class{constructor(){this.rootNode_=Oe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Ap(){return{value:null,children:new Map}}function PO(t,e,n){if(ce(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=he(e);t.children.has(r)||t.children.set(r,Ap());let i=t.children.get(r);e=Re(e),PO(i,e,n)}}function fT(t,e,n){t.value!==null?n(e,t.value):e6(t,(r,i)=>{let s=new Ce(e.toString()+"/"+r);fT(i,s,n)})}function e6(t,e){t.children.forEach((n,r)=>{e(r,n)})}var pT=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&dn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Hx=10*1e3,t6=30*1e3,n6=5*60*1e3,mT=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new pT(e);let r=Hx+(t6-Hx)*Math.random();Zl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;dn(e,(i,s)=>{s>0&&Gn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Zl(this.reportStats_.bind(this),Math.floor(Math.random()*2*n6))}};var Vr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Vr||{});function xO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function OO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function kO(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var gT=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vr.ACK_USER_WRITE,this.source=xO()}operationForChild(e){if(ce(this.path)){if(this.affectedTree.value!=null)return T(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Ce(e));return new t(Ie(),n,this.revert)}}else return T(he(this.path)===e,"operationForChild called for unrelated child."),new t(Re(this.path),this.affectedTree,this.revert)}};var La=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vr.OVERWRITE}operationForChild(e){return ce(this.path)?new t(this.source,Ie(),this.snap.getImmediateChild(e)):new t(this.source,Re(this.path),this.snap)}};var Rp=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vr.MERGE}operationForChild(e){if(ce(this.path)){let n=this.children.subtree(new Ce(e));return n.isEmpty()?null:n.value?new La(this.source,Ie(),n.value):new t(this.source,Ie(),n)}else return T(he(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var nu=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ce(e))return this.isFullyInitialized()&&!this.filtered_;let n=he(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function r6(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(X9(o.childName,o.snapshotNode))}),Jl(t,i,"child_removed",e,r,n),Jl(t,i,"child_added",e,r,n),Jl(t,i,"child_moved",s,r,n),Jl(t,i,"child_changed",e,r,n),Jl(t,i,"value",e,r,n),i}function Jl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>s6(t,a,c)),o.forEach(a=>{let c=i6(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function i6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function s6(t,e,n){if(e.childName==null||n.childName==null)throw rs("Should only compare child_ events.");let r=new fe(e.childName,e.snapshotNode),i=new fe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function FO(t,e){return{eventCache:t,serverCache:e}}function eu(t,e,n,r){return FO(new nu(e,n,r),t.serverCache)}function LO(t,e,n,r){return FO(t.eventCache,new nu(e,n,r))}function yT(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function js(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var jI,o6=()=>(jI||(jI=new un(o9)),jI),Vt=class t{constructor(e,n=o6()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return dn(e,(r,i)=>{n=n.set(new Ce(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ie(),value:this.value};if(ce(e))return null;{let r=he(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Re(e),n);return s!=null?{path:ct(new Ce(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ce(e))return this;{let n=he(e),r=this.children.get(n);return r!==null?r.subtree(Re(e)):new t(null)}}set(e,n){if(ce(e))return new t(n,this.children);{let r=he(e),s=(this.children.get(r)||new t(null)).set(Re(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ce(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=he(e),r=this.children.get(n);if(r){let i=r.remove(Re(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ce(e))return this.value;{let n=he(e),r=this.children.get(n);return r?r.get(Re(e)):null}}setTree(e,n){if(ce(e))return n;{let r=he(e),s=(this.children.get(r)||new t(null)).setTree(Re(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Ie(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ct(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ie(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ce(e))return null;{let s=he(e),o=this.children.get(s);return o?o.findOnPath_(Re(e),ct(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ie(),n)}foreachOnPath_(e,n,r){if(ce(e))return this;{this.value&&r(n,this.value);let i=he(e),s=this.children.get(i);return s?s.foreachOnPath_(Re(e),ct(n,i),r):new t(null)}}foreach(e){this.foreach_(Ie(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ct(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Mn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Vt(null))}};function tu(t,e,n){if(ce(e))return new Mn(new Vt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=ln(i,e);return s=s.updateChild(o,n),new Mn(t.writeTree_.set(i,s))}else{let i=new Vt(n),s=t.writeTree_.setTree(e,i);return new Mn(s)}}}function qx(t,e,n){let r=t;return dn(n,(i,s)=>{r=tu(r,ct(e,i),s)}),r}function zx(t,e){if(ce(e))return Mn.empty();{let n=t.writeTree_.setTree(e,new Vt(null));return new Mn(n)}}function _T(t,e){return Bs(t,e)!=null}function Bs(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ln(n.path,e)):null}function Gx(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(bt,(r,i)=>{e.push(new fe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new fe(r,i.value))}),e}function Ii(t,e){if(ce(e))return t;{let n=Bs(t,e);return n!=null?new Mn(new Vt(n)):new Mn(t.writeTree_.subtree(e))}}function vT(t){return t.writeTree_.isEmpty()}function Va(t,e){return VO(Ie(),t.writeTree_,e)}function VO(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(T(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=VO(ct(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ct(t,".priority"),r)),n}}function UO(t,e){return qO(e,t)}function a6(t,e,n,r,i){T(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=tu(t.visibleWrites,e,n)),t.lastWriteId=r}function c6(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function l6(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);T(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&u6(a,r.path)?i=!1:Nn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return d6(t),!0;if(r.snap)t.visibleWrites=zx(t.visibleWrites,r.path);else{let a=r.children;dn(a,c=>{t.visibleWrites=zx(t.visibleWrites,ct(r.path,c))})}return!0}else return!1}function u6(t,e){if(t.snap)return Nn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Nn(ct(t.path,n),e))return!0;return!1}function d6(t){t.visibleWrites=jO(t.allWrites,h6,Ie()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function h6(t){return t.visible}function jO(t,e,n){let r=Mn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Nn(n,o)?(a=ln(n,o),r=tu(r,a,s.snap)):Nn(o,n)&&(a=ln(o,n),r=tu(r,Ie(),s.snap.getChild(a)));else if(s.children){if(Nn(n,o))a=ln(n,o),r=qx(r,a,s.children);else if(Nn(o,n))if(a=ln(o,n),ce(a))r=qx(r,Ie(),s.children);else{let c=is(s.children,he(a));if(c){let l=c.getChild(Re(a));r=tu(r,Ie(),l)}}}else throw rs("WriteRecord should have .snap or .children")}}return r}function BO(t,e,n,r,i){if(!r&&!i){let s=Bs(t.visibleWrites,e);if(s!=null)return s;{let o=Ii(t.visibleWrites,e);if(vT(o))return n;if(n==null&&!_T(o,Ie()))return null;{let a=n||Oe.EMPTY_NODE;return Va(o,a)}}}else{let s=Ii(t.visibleWrites,e);if(!i&&vT(s))return n;if(!i&&n==null&&!_T(s,Ie()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Nn(l.path,e)||Nn(e,l.path))},a=jO(t.allWrites,o,e),c=n||Oe.EMPTY_NODE;return Va(a,c)}}}function f6(t,e,n){let r=Oe.EMPTY_NODE,i=Bs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(bt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ii(t.visibleWrites,e);return n.forEachChild(bt,(o,a)=>{let c=Va(Ii(s,new Ce(o)),a);r=r.updateImmediateChild(o,c)}),Gx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ii(t.visibleWrites,e);return Gx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function p6(t,e,n,r,i){T(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ct(e,n);if(_T(t.visibleWrites,s))return null;{let o=Ii(t.visibleWrites,s);return vT(o)?i.getChild(n):Va(o,i.getChild(n))}}function m6(t,e,n,r){let i=ct(e,n),s=Bs(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ii(t.visibleWrites,i);return Va(o,r.getNode().getImmediateChild(n))}else return null}function g6(t,e){return Bs(t.visibleWrites,e)}function y6(t,e,n,r,i,s,o){let a,c=Ii(t.visibleWrites,e),l=Bs(c,Ie());if(l!=null)a=l;else if(n!=null)a=Va(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function _6(){return{visibleWrites:Mn.empty(),allWrites:[],lastWriteId:-1}}function wT(t,e,n,r){return BO(t.writeTree,t.treePath,e,n,r)}function $O(t,e){return f6(t.writeTree,t.treePath,e)}function Wx(t,e,n,r){return p6(t.writeTree,t.treePath,e,n,r)}function Np(t,e){return g6(t.writeTree,ct(t.treePath,e))}function v6(t,e,n,r,i,s){return y6(t.writeTree,t.treePath,e,n,r,i,s)}function VT(t,e,n){return m6(t.writeTree,t.treePath,e,n)}function HO(t,e){return qO(ct(t.treePath,e),t.writeTree)}function qO(t,e){return{treePath:t,writeTree:e}}var ET=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;T(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),T(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,jx(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Z9(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,J9(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,jx(r,e.snapshotNode,i.oldSnap));else throw rs("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var IT=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},zO=new IT,ru=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new nu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VT(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:js(this.viewCache_),s=v6(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function w6(t,e){T(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),T(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function E6(t,e,n,r,i){let s=new ET,o,a;if(n.type===Vr.OVERWRITE){let l=n;l.source.fromUser?o=TT(t,e,l.path,l.snap,r,i,s):(T(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ce(l.path),o=Mp(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Vr.MERGE){let l=n;l.source.fromUser?o=T6(t,e,l.path,l.children,r,i,s):(T(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=CT(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Vr.ACK_USER_WRITE){let l=n;l.revert?o=b6(t,e,l.path,r,i,s):o=C6(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Vr.LISTEN_COMPLETE)o=D6(t,e,n.path,r,s);else throw rs("Unknown operation type: "+n.type);let c=s.getChanges();return I6(e,o,c),{viewCache:o,changes:c}}function I6(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=yT(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Y9(yT(e)))}}function GO(t,e,n,r,i,s){let o=e.eventCache;if(Np(r,n)!=null)return e;{let a,c;if(ce(n))if(T(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=js(e),u=l instanceof Oe?l:Oe.EMPTY_NODE,d=$O(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=wT(r,js(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=he(n);if(l===".priority"){T(Ti(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=Wx(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=Re(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=Wx(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=VT(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return eu(e,a,o.isFullyInitialized()||ce(n),t.filter.filtersNodes())}}function Mp(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(ce(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=he(n);if(!c.isCompleteForPath(n)&&Ti(n)>1)return e;let m=Re(n),y=c.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,m,zO,null)}let d=LO(e,l,c.isFullyInitialized()||ce(n),u.filtersNodes()),h=new ru(i,d,s);return GO(t,d,n,i,h,a)}function TT(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new ru(i,e,s);if(ce(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=eu(e,l,!0,t.filter.filtersNodes());else{let d=he(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=eu(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=Re(n),f=a.getNode().getImmediateChild(d),m;if(ce(h))m=r;else{let g=u.getCompleteChild(d);g!=null?TO(h)===".priority"&&g.getChild(DO(h)).isEmpty()?m=g:m=g.updateChild(h,r):m=Oe.EMPTY_NODE}if(f.equals(m))c=e;else{let g=t.filter.updateChild(a.getNode(),d,m,h,u,o);c=eu(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Kx(t,e){return t.eventCache.isCompleteForChild(e)}function T6(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=ct(n,c);Kx(e,he(u))&&(a=TT(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=ct(n,c);Kx(e,he(u))||(a=TT(t,a,u,l,i,s,o))}),a}function Qx(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function CT(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ce(n)?l=r:l=new Vt(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=Qx(t,f,h);c=Mp(t,c,new Ce(d),m,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),g=Qx(t,m,h);c=Mp(t,c,new Ce(d),g,i,s,o,a)}}),c}function C6(t,e,n,r,i,s,o){if(Np(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ce(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Mp(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ce(n)){let l=new Vt(null);return c.getNode().forEachChild(Pa,(u,d)=>{l=l.set(new Ce(u),d)}),CT(t,e,n,l,i,s,a,o)}else return e}else{let l=new Vt(null);return r.foreach((u,d)=>{let h=ct(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),CT(t,e,n,l,i,s,a,o)}}function D6(t,e,n,r,i){let s=e.serverCache,o=LO(e,s.getNode(),s.isFullyInitialized()||ce(n),s.isFiltered());return GO(t,o,n,r,zO,i)}function b6(t,e,n,r,i,s){let o;if(Np(r,n)!=null)return e;{let a=new ru(r,e,i),c=e.eventCache.getNode(),l;if(ce(n)||he(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=wT(r,js(e));else{let d=e.serverCache.getNode();T(d instanceof Oe,"serverChildren would be complete if leaf node"),u=$O(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=he(n),d=VT(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Re(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Oe.EMPTY_NODE,Re(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=wT(r,js(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Np(r,Ie())!=null,eu(e,l,o,t.filter.filtersNodes())}}function S6(t,e){let n=js(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ce(e)&&!n.getImmediateChild(he(e)).isEmpty())?n.getChild(e):null}function Yx(t,e,n,r){e.type===Vr.MERGE&&e.source.queryId!==null&&(T(js(t.viewCache_),"We should always have a full cache before handling merges"),T(yT(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=E6(t.processor_,i,e,n,r);return w6(t.processor_,s.viewCache),T(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,A6(t,s.changes,s.viewCache.eventCache.getNode(),null)}function A6(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return r6(t.eventGenerator_,e,n,i)}var Jx;function R6(t){T(!Jx,"__referenceConstructor has already been defined"),Jx=t}function UT(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return T(s!=null,"SyncTree gave us an op for an invalid query."),Yx(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Yx(o,e,n,r));return s}}function jT(t,e){let n=null;for(let r of t.views.values())n=n||S6(r,e);return n}var Zx;function N6(t){T(!Zx,"__referenceConstructor has already been defined"),Zx=t}var Pp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vt(null),this.pendingWriteTree_=_6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function M6(t,e,n,r,i){return a6(t.pendingWriteTree_,e,n,r,i),i?Op(t,new La(xO(),e,n)):[]}function Na(t,e,n=!1){let r=c6(t.pendingWriteTree_,e);if(l6(t.pendingWriteTree_,e)){let s=new Vt(null);return r.snap!=null?s=s.set(Ie(),!0):dn(r.children,o=>{s=s.set(new Ce(o),!0)}),Op(t,new gT(r.path,s,n))}else return[]}function xp(t,e,n){return Op(t,new La(OO(),e,n))}function P6(t,e,n){let r=Vt.fromObject(n);return Op(t,new Rp(OO(),e,r))}function x6(t,e,n,r){let i=YO(t,r);if(i!=null){let s=JO(i),o=s.path,a=s.queryId,c=ln(o,e),l=new La(kO(a),c,n);return ZO(t,o,l)}else return[]}function O6(t,e,n,r){let i=YO(t,r);if(i){let s=JO(i),o=s.path,a=s.queryId,c=ln(o,e),l=Vt.fromObject(n),u=new Rp(kO(a),c,l);return ZO(t,o,u)}else return[]}function WO(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=ln(o,e),l=jT(a,c);if(l)return l});return BO(i,e,s,n,!0)}function Op(t,e){return KO(e,t.syncPointTree_,null,UO(t.pendingWriteTree_,Ie()))}function KO(t,e,n,r){if(ce(t.path))return QO(t,e,n,r);{let i=e.get(Ie());n==null&&i!=null&&(n=jT(i,Ie()));let s=[],o=he(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=HO(r,o);s=s.concat(KO(a,c,l,u))}return i&&(s=s.concat(UT(i,t,r,n))),s}}function QO(t,e,n,r){let i=e.get(Ie());n==null&&i!=null&&(n=jT(i,Ie()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=HO(r,o),u=t.operationForChild(o);u&&(s=s.concat(QO(u,a,c,l)))}),i&&(s=s.concat(UT(i,t,r,n))),s}function YO(t,e){return t.tagToQueryMap.get(e)}function JO(t){let e=t.indexOf("$");return T(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ce(t.substr(0,e))}}function ZO(t,e,n){let r=t.syncPointTree_.get(e);T(r,"Missing sync point for query tag that we're tracking");let i=UO(t.pendingWriteTree_,e);return UT(r,n,i,null)}var DT=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},bT=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ct(this.path_,e);return new t(this.syncTree_,n)}node(){return WO(this.syncTree_,this.path_)}},k6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Xx=function(t,e,n){if(!t||typeof t!="object")return t;if(T(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return F6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return L6(t[".sv"],e);T(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},F6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:T(!1,"Unexpected server value: "+t)}},L6=function(t,e,n){t.hasOwnProperty("increment")||T(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&T(!1,"Unexpected increment value: "+r);let i=e.node();if(T(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},V6=function(t,e,n,r){return BT(e,new bT(n,t),r)},U6=function(t,e,n){return BT(t,new DT(e),n)};function BT(t,e,n){let r=t.getPriority().val(),i=Xx(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=Xx(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ka(a,Dt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ka(i))),o.forEachChild(bt,(a,c)=>{let l=BT(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var iu=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function $T(t,e){let n=e instanceof Ce?e:new Ce(e),r=t,i=he(n);for(;i!==null;){let s=is(r.node.children,i)||{children:{},childCount:0};r=new iu(i,r,s),n=Re(n),i=he(n)}return r}function Ba(t){return t.node.value}function XO(t,e){t.node.value=e,ST(t)}function ek(t){return t.node.childCount>0}function j6(t){return Ba(t)===void 0&&!ek(t)}function kp(t,e){dn(t.node.children,(n,r)=>{e(new iu(n,t,r))})}function tk(t,e,n,r){n&&!r&&e(t),kp(t,i=>{tk(i,e,!0,r)}),n&&r&&e(t)}function B6(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function lu(t){return new Ce(t.parent===null?t.name:lu(t.parent)+"/"+t.name)}function ST(t){t.parent!==null&&$6(t.parent,t.name,t)}function $6(t,e,n){let r=j6(n),i=Gn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,ST(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,ST(t))}var H6=/[\[\].#$\/\u0000-\u001F\u007F]/,q6=/[\[\].#$\u0000-\u001F\u007F]/,BI=10*1024*1024,nk=function(t){return typeof t=="string"&&t.length!==0&&!H6.test(t)},z6=function(t){return typeof t=="string"&&t.length!==0&&!q6.test(t)},G6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),z6(t)};var rk=function(t,e,n){let r=n instanceof Ce?new tT(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Fs(r));if(typeof e=="function")throw new Error(t+"contains a function "+Fs(r)+" with contents = "+e.toString());if(sO(e))throw new Error(t+"contains "+e.toString()+" "+Fs(r));if(typeof e=="string"&&e.length>BI/3&&jc(e)>BI)throw new Error(t+"contains a string greater than "+BI+" utf8 bytes "+Fs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(dn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!nk(o)))throw new Error(t+" contains an invalid key ("+o+") "+Fs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);L9(r,o),rk(t,a,r),V9(r)}),i&&s)throw new Error(t+' contains ".value" child '+Fs(r)+" in addition to actual children.")}};var W6=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!G6(n))throw new Error(pA(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var AT=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function K6(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!bO(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function $s(t,e,n){K6(t,n),Q6(t,r=>Nn(r,e)||Nn(e,r))}function Q6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(Y6(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Y6(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Vs&&Ct("event: "+n.toString()),au(r)}}}var J6="repo_interrupt",Z6=25,RT=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ap(),this.transactionQueueTree_=new iu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function X6(t,e,n){if(t.stats_=kT(t.repoInfo_),t.forceRestClient_||h9())t.server_=new dT(t.repoInfo_,(r,i,s,o)=>{eO(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>tO(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new FT(t.repoInfo_,e,(r,i,s,o)=>{eO(t,r,i,s,o)},r=>{tO(t,r)},r=>{t5(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=p9(t.repoInfo_,()=>new mT(t.stats_,t.server_)),t.infoData_=new hT,t.infoSyncTree_=new Pp({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=xp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),HT(t,"connected",!1),t.serverSyncTree_=new Pp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);$s(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function e5(t){let n=t.infoData_.getNode(new Ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ik(t){return k6({timestamp:e5(t)})}function eO(t,e,n,r,i){t.dataUpdateCount++;let s=new Ce(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Uc(n,l=>Dt(l));o=O6(t.serverSyncTree_,s,c,i)}else{let c=Dt(n);o=x6(t.serverSyncTree_,s,c,i)}else if(r){let c=Uc(n,l=>Dt(l));o=P6(t.serverSyncTree_,s,c)}else{let c=Dt(n);o=xp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=zT(t,s)),$s(t.eventQueue_,a,o)}function tO(t,e){HT(t,"connected",e),e===!1&&r5(t)}function t5(t,e){dn(e,(n,r)=>{HT(t,n,r)})}function HT(t,e,n){let r=new Ce("/.info/"+e),i=Dt(n);t.infoData_.updateSnapshot(r,i);let s=xp(t.infoSyncTree_,r,i);$s(t.eventQueue_,r,s)}function n5(t){return t.nextWriteId_++}function r5(t){sk(t,"onDisconnectEvents");let e=ik(t),n=Ap();fT(t.onDisconnect_,Ie(),(i,s)=>{let o=V6(i,s,t.serverSyncTree_,e);PO(n,i,o)});let r=[];fT(n,Ie(),(i,s)=>{r=r.concat(xp(t.serverSyncTree_,i,s));let o=a5(t,i);zT(t,o)}),t.onDisconnect_=Ap(),$s(t.eventQueue_,Ie(),r)}function i5(t){t.persistentConnection_&&t.persistentConnection_.interrupt(J6)}function sk(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ct(n,...e)}function ok(t,e,n){return WO(t.serverSyncTree_,e,n)||Oe.EMPTY_NODE}function qT(t,e=t.transactionQueueTree_){if(e||Fp(t,e),Ba(e)){let n=ck(t,e);T(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&s5(t,lu(e),n)}else ek(e)&&kp(e,n=>{qT(t,n)})}function s5(t,e,n){let r=n.map(l=>l.currentWriteId),i=ok(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];T(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=ln(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{sk(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Na(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Fp(t,$T(t.transactionQueueTree_,e)),qT(t,t.transactionQueueTree_),$s(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)au(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Qt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}zT(t,e)}},o)}function zT(t,e){let n=ak(t,e),r=lu(n),i=ck(t,n);return o5(t,i,r),r}function o5(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=ln(n,c.path),u=!1,d;if(T(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Na(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Z6)u=!0,d="maxretry",i=i.concat(Na(t.serverSyncTree_,c.currentWriteId,!0));else{let h=ok(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){rk("transaction failed: Data returned ",f,c.path);let m=Dt(f);typeof f=="object"&&f!=null&&Gn(f,".priority")||(m=m.updatePriority(h.getPriority()));let y=c.currentWriteId,v=ik(t),N=U6(m,h,v);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=N,c.currentWriteId=n5(t),o.splice(o.indexOf(y),1),i=i.concat(M6(t.serverSyncTree_,c.path,N,c.currentWriteId,c.applyLocally)),i=i.concat(Na(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",i=i.concat(Na(t.serverSyncTree_,c.currentWriteId,!0))}$s(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Fp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)au(r[a]);qT(t,t.transactionQueueTree_)}function ak(t,e){let n,r=t.transactionQueueTree_;for(n=he(e);n!==null&&Ba(r)===void 0;)r=$T(r,n),e=Re(e),n=he(e);return r}function ck(t,e){let n=[];return lk(t,e,n),n.sort((r,i)=>r.order-i.order),n}function lk(t,e,n){let r=Ba(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);kp(e,i=>{lk(t,i,n)})}function Fp(t,e){let n=Ba(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,XO(e,n.length>0?n:void 0)}kp(e,r=>{Fp(t,r)})}function a5(t,e){let n=lu(ak(t,e)),r=$T(t.transactionQueueTree_,e);return B6(r,i=>{$I(t,i)}),$I(t,r),tk(r,i=>{$I(t,i)}),n}function $I(t,e){let n=Ba(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(T(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(T(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Na(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?XO(e,void 0):n.length=s+1,$s(t.eventQueue_,lu(e),i);for(let o=0;o<r.length;o++)au(r[o])}}function c5(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function l5(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qt(`Invalid query segment '${n}' in query '${t}'`)}return e}var nO=function(t,e){let n=u5(t),r=n.namespace;n.domain==="firebase.com"&&Ur(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ur("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||i9();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ep(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ce(n.pathString)}},u5=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=c5(t.substring(u,d)));let h=l5(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var NT=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ce(this._path)?null:TO(this._path)}get ref(){return new Ua(this._repo,this._path)}get _queryIdentifier(){let e=$x(this._queryParams),n=OT(e);return n==="{}"?"default":n}get _queryObject(){return $x(this._queryParams)}isEqual(e){if(e=Xe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=bO(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+F9(this._path)}};var Ua=class t extends NT{constructor(e,n){super(e,n,new uT,!1)}get parent(){let e=DO(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};R6(Ua);N6(Ua);var d5="FIREBASE_DATABASE_EMULATOR_HOST",MT={},h5=!1;function f5(t,e,n,r){t.repoInfo_=new Ep(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function p5(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ur("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ct("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=nO(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[d5]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=nO(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Xl(Xl.OWNER):new KI(t.name,t.options,e);W6("Invalid Firebase Database URL",o),ce(o.path)||Ur("Database URL must point to the root of a Firebase Database (not including a child path).");let d=g5(a,t,u,new WI(t.name,n));return new PT(d,t)}function m5(t,e){let n=MT[e];(!n||n[t.key]!==t)&&Ur(`Database ${e}(${t.repoInfo_}) has already been deleted.`),i5(t),delete n[t.key]}function g5(t,e,n,r){let i=MT[e.name];i||(i={},MT[e.name]=i);let s=i[t.toURLString()];return s&&Ur("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new RT(t,h5,n,r),i[t.toURLString()]=s,s}var PT=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ua(this._repo,Ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(m5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ur("Cannot call "+e+" on a deleted database.")}};function uk(t=ci(),e){let n=ls(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=vh("database");r&&dk(n,...r)}return n}function dk(t,e,n,r={}){t=Xe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ur("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ur('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xl(Xl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:wh(r.mockUserToken,t.app.options.projectId);s=new Xl(o)}f5(i,e,n,s)}function y5(t){t9(Yn),Qn(new Ft("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return p5(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Me(Cx,Dx,t),Me(Cx,Dx,"esm2017")}FT.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};FT.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};y5();var uu=class{constructor(e){return e}},hk="database",GT=class{constructor(){return ds(hk)}};var WT=new F("angularfire2.database-instances");function _5(t,e){let n=zo(hk,t,e);return n&&new uu(n)}function v5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new uu(r)}}var w5={provide:GT,deps:[[new Je,WT]]},E5={provide:uu,useFactory:_5,deps:[[new Je,WT],Cn]},I5=(()=>{class t{constructor(){Me("angularfire",br.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=dt({type:t});static \u0275inj=ut({providers:[E5,w5]})}return t})();function fk(t,...e){return{ngModule:I5,providers:[{provide:WT,useFactory:v5(t),multi:!0,deps:[ae,nt,ui,Sr,[new Je,ys],[new Je,li],...e]}]}}var pk=Lt(uk,!0);var mk={apiKey:"AIzaSyAM3-rStbhtKFlSXHk64dRZKR45UkuRgs4",authDomain:"saladejuegos-5e96c.firebaseapp.com",projectId:"saladejuegos-5e96c",storageBucket:"saladejuegos-5e96c.appspot.com",messagingSenderId:"796957907677",appId:"1:796957907677:web:30cc1441a48bc30db1d934"};function gk(t){return new E(3e3,!1)}function T5(){return new E(3100,!1)}function C5(){return new E(3101,!1)}function D5(t){return new E(3001,!1)}function b5(t){return new E(3003,!1)}function S5(t){return new E(3004,!1)}function A5(t,e){return new E(3005,!1)}function R5(){return new E(3006,!1)}function N5(){return new E(3007,!1)}function M5(t,e){return new E(3008,!1)}function P5(t){return new E(3002,!1)}function x5(t,e,n,r,i){return new E(3010,!1)}function O5(){return new E(3011,!1)}function k5(){return new E(3012,!1)}function F5(){return new E(3200,!1)}function L5(){return new E(3202,!1)}function V5(){return new E(3013,!1)}function U5(t){return new E(3014,!1)}function j5(t){return new E(3015,!1)}function B5(t){return new E(3016,!1)}function $5(t,e){return new E(3404,!1)}function H5(t){return new E(3502,!1)}function q5(t){return new E(3503,!1)}function z5(){return new E(3300,!1)}function G5(t){return new E(3504,!1)}function W5(t){return new E(3301,!1)}function K5(t,e){return new E(3302,!1)}function Q5(t){return new E(3303,!1)}function Y5(t,e){return new E(3400,!1)}function J5(t){return new E(3401,!1)}function Z5(t){return new E(3402,!1)}function X5(t,e){return new E(3505,!1)}function Ci(t){switch(t.length){case 0:return new Ei;case 1:return t[0];default:return new $l(t)}}function Nk(t,e,n=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let m=f,g=h;if(f!=="offset")switch(m=t.normalizePropertyName(m,i),g){case dp:g=n.get(f);break;case lr:g=r.get(f);break;default:g=t.normalizeStyleValue(f,m,g,i);break}d.set(m,g)}),u||s.push(d),a=d,o=l}),i.length)throw H5(i);return s}function gC(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&KT(n,"start",t)));break;case"done":t.onDone(()=>r(n&&KT(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&KT(n,"destroy",t)));break}}function KT(t,e,n){let r=n.totalTime,i=!!n.disabled,s=yC(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,r??t.totalTime,i),o=t._data;return o!=null&&(s._data=o),s}function yC(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Jt(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function yk(t){let e=t.indexOf(":"),n=t.substring(1,e),r=t.slice(e+1);return[n,r]}var e8=typeof document>"u"?null:document.documentElement;function _C(t){let e=t.parentNode||t.host||null;return e===e8?null:e}function t8(t){return t.substring(1,6)=="ebkit"}var Hs=null,_k=!1;function n8(t){Hs||(Hs=r8()||{},_k=Hs.style?"WebkitAppearance"in Hs.style:!1);let e=!0;return Hs.style&&!t8(t)&&(e=t in Hs.style,!e&&_k&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Hs.style)),e}function r8(){return typeof document<"u"?document.body:null}function Mk(t,e){for(;e;){if(e===t)return!0;e=_C(e)}return!1}function Pk(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let r=t.querySelector(e);return r?[r]:[]}var vC=(()=>{let e=class e{validateStyleProperty(r){return n8(r)}matchesElement(r,i){return!1}containsElement(r,i){return Mk(r,i)}getParentElement(r){return _C(r)}query(r,i,s){return Pk(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],l){return new Ei(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})(),TC=class TC{};TC.NOOP=new vC;var Gs=TC,Ws=class{};var i8=1e3,xk="{{",s8="}}",Ok="ng-enter",eC="ng-leave",Lp="ng-trigger",$p=".ng-trigger",vk="ng-animating",tC=".ng-animating";function jr(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:nC(parseFloat(e[1]),e[2])}function nC(t,e){switch(e){case"s":return t*i8;default:return t}}function Hp(t,e,n){return t.hasOwnProperty("duration")?t:o8(t,e,n)}function o8(t,e,n){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof t=="string"){let a=t.match(r);if(a===null)return e.push(gk(t)),{duration:0,delay:0,easing:""};i=nC(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=nC(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=t;if(!n){let a=!1,c=e.length;i<0&&(e.push(T5()),a=!0),s<0&&(e.push(C5()),a=!0),a&&e.splice(c,0,gk(t))}return{duration:i,delay:s,easing:o}}function a8(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function ur(t,e,n){e.forEach((r,i)=>{let s=wC(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r})}function zs(t,e){e.forEach((n,r)=>{let i=wC(r);t.style[i]=""})}function du(t){return Array.isArray(t)?t.length==1?t[0]:GP(t):t}function c8(t,e,n){let r=e.params||{},i=kk(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(D5(s))})}var rC=new RegExp(`${xk}\\s*(.+?)\\s*${s8}`,"g");function kk(t){let e=[];if(typeof t=="string"){let n;for(;n=rC.exec(t);)e.push(n[1]);rC.lastIndex=0}return e}function fu(t,e,n){let r=`${t}`,i=r.replace(rC,(s,o)=>{let a=e[o];return a==null&&(n.push(b5(o)),a=""),a.toString()});return i==r?t:i}var l8=/-+([a-z0-9])/g;function wC(t){return t.replace(l8,(...e)=>e[1].toUpperCase())}function u8(t,e){return t===0||e===0}function d8(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,EC(t,a)))}}return e}function Yt(t,e,n){switch(e.type){case Q.Trigger:return t.visitTrigger(e,n);case Q.State:return t.visitState(e,n);case Q.Transition:return t.visitTransition(e,n);case Q.Sequence:return t.visitSequence(e,n);case Q.Group:return t.visitGroup(e,n);case Q.Animate:return t.visitAnimate(e,n);case Q.Keyframes:return t.visitKeyframes(e,n);case Q.Style:return t.visitStyle(e,n);case Q.Reference:return t.visitReference(e,n);case Q.AnimateChild:return t.visitAnimateChild(e,n);case Q.AnimateRef:return t.visitAnimateRef(e,n);case Q.Query:return t.visitQuery(e,n);case Q.Stagger:return t.visitStagger(e,n);default:throw S5(e.type)}}function EC(t,e){return window.getComputedStyle(t)[e]}var h8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),qp=class extends Ws{normalizePropertyName(e,n){return wC(e)}normalizeStyleValue(e,n,r,i){let s="",o=r.toString().trim();if(h8.has(n)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(A5(e,r))}return o+s}};var zp="*";function f8(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>p8(r,n,e)):n.push(t),n}function p8(t,e,n){if(t[0]==":"){let c=m8(t,n);if(typeof c=="function"){e.push(c);return}t=c}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return n.push(j5(t)),e;let i=r[1],s=r[2],o=r[3];e.push(wk(i,o));let a=i==zp&&o==zp;s[0]=="<"&&!a&&e.push(wk(o,i))}function m8(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(B5(t)),"* => *"}}var Vp=new Set(["true","1"]),Up=new Set(["false","0"]);function wk(t,e){let n=Vp.has(t)||Up.has(t),r=Vp.has(e)||Up.has(e);return(i,s)=>{let o=t==zp||t==i,a=e==zp||e==s;return!o&&n&&typeof i=="boolean"&&(o=i?Vp.has(t):Up.has(t)),!a&&r&&typeof s=="boolean"&&(a=s?Vp.has(e):Up.has(e)),o&&a}}var Fk=":self",g8=new RegExp(`s*${Fk}s*,?`,"g");function Lk(t,e,n,r){return new iC(t).build(e,n,r)}var Ek="",iC=class{constructor(e){this._driver=e}build(e,n,r){let i=new sC(n);return this._resetContextStyleTimingState(i),Yt(this,du(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ek,e.collectedStyles=new Map,e.collectedStyles.set(Ek,new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(R5()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==Q.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,n))}),c.name=l}else if(a.type==Q.Transition){let c=this.visitTransition(a,n);r+=c.queryCount,i+=c.depCount,o.push(c)}else n.errors.push(N5())}),{type:Q.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){let r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{kk(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&n.errors.push(M5(e.name,[...s.values()]))}return{type:Q.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let r=Yt(this,du(e.animation),n),i=f8(e.expr,n.errors);return{type:Q.Transition,matchers:i,animation:r,queryCount:n.queryCount,depCount:n.depCount,options:qs(e.options)}}visitSequence(e,n){return{type:Q.Sequence,steps:e.steps.map(r=>Yt(this,r,n)),options:qs(e.options)}}visitGroup(e,n){let r=n.currentTime,i=0,s=e.steps.map(o=>{n.currentTime=r;let a=Yt(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:Q.Group,steps:s,options:qs(e.options)}}visitAnimate(e,n){let r=w8(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:ks({});if(s.type==Q.Keyframes)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=ks(l)}n.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,n);c.isEmptyStep=a,i=c}return n.currentAnimateTimings=null,{type:Q.Animate,timings:r,style:i,options:null}}visitStyle(e,n){let r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===lr?r.push(a):n.errors.push(P5(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(xk)>=0){s=!0;break}}}),{type:Q.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let r=n.currentAnimateTimings,i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(n.errors.push(x5(c,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:i}),n.options&&c8(a,n.options,n.errors)})})}visitKeyframes(e,n){let r={type:Q.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(O5()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(v=>{let N=this._makeStyleAst(v,n),M=N.offset!=null?N.offset:v8(N.styles),$=0;return M!=null&&(s++,$=N.offset=M),c=c||$<0||$>1,a=a||$<l,l=$,o.push($),N});c&&n.errors.push(k5()),a&&n.errors.push(F5());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(L5()):s==0&&(h=i/(d-1));let f=d-1,m=n.currentTime,g=n.currentAnimateTimings,y=g.duration;return u.forEach((v,N)=>{let M=h>0?N==f?1:h*N:o[N],$=M*y;n.currentTime=m+g.delay+$,g.duration=$,this._validateStyleAst(v,n),v.offset=M,r.styles.push(v)}),r}visitReference(e,n){return{type:Q.Reference,animation:Yt(this,du(e.animation),n),options:qs(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:Q.AnimateChild,options:qs(e.options)}}visitAnimateRef(e,n){return{type:Q.AnimateRef,animation:this.visitReference(e.animation,n),options:qs(e.options)}}visitQuery(e,n){let r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=y8(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,Jt(n.collectedStyles,n.currentQuerySelector,new Map);let a=Yt(this,du(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:Q.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:qs(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(V5());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Hp(e.timings,n.errors,!0);return{type:Q.Stagger,animation:Yt(this,du(e.animation),n),timings:r,options:null}}};function y8(t){let e=!!t.split(/\s*,\s*/).find(n=>n==Fk);return e&&(t=t.replace(g8,"")),t=t.replace(/@\*/g,$p).replace(/@\w+/g,n=>$p+"-"+n.slice(1)).replace(/:animating/g,tC),[t,e]}function _8(t){return t?I({},t):null}var sC=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function v8(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function w8(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Hp(t,e).duration;return QT(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=QT(0,0,"");return s.dynamic=!0,s.strValue=n,s}let i=Hp(n,e);return QT(i.duration,i.delay,i.easing)}function qs(t){return t?(t=I({},t),t.params&&(t.params=_8(t.params))):t={},t}function QT(t,e,n){return{duration:t,delay:e,easing:n}}function IC(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var pu=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},E8=1,I8=":enter",T8=new RegExp(I8,"g"),C8=":leave",D8=new RegExp(C8,"g");function Vk(t,e,n,r,i,s=new Map,o=new Map,a,c,l=[]){return new oC().buildKeyframes(t,e,n,r,i,s,o,a,c,l)}var oC=class{buildKeyframes(e,n,r,i,s,o,a,c,l,u=[]){l=l||new pu;let d=new aC(e,n,l,i,s,u,[]);d.options=c;let h=c.delay?jr(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),Yt(this,r,d);let f=d.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let g=f.length-1;g>=0;g--){let y=f[g];if(y.element===n){m=y;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,c)}return f.length?f.map(m=>m.buildKeyframes()):[IC(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let r=n.subInstructions.get(n.element);if(r){let i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:jr(fu(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime,o=r.duration!=null?jr(r.duration):null,a=r.delay!=null?jr(r.delay):null;return o!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),Yt(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let r=n.subContextCount,i=n,s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==Q.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Gp);let o=jr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Yt(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let r=[],i=n.currentTimeline.currentTime,s=e.options&&e.options.delay?jr(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),Yt(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let r=e.strValue,i=n.params?fu(r,n.params,n.errors):r;return Hp(i,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==Q.Keyframes?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){let r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?jr(i.delay):0;s&&(n.previousNode.type===Q.Style||r==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Gp);let o=r,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);s&&d.delayNextStep(s),l===n.element&&(c=d.currentTimeline),Yt(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;Yt(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},Gp={},aC=class t{constructor(e,n,r,i,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Gp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Wp(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=jr(r.duration)),r.delay!=null&&(i.delay=jr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=fu(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){let i=n||this.element,s=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Gp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){let i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new cC(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(T8,"."+this._enterClassName),e=e.replace(D8,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(U5(n)),a}},Wp=class t{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=E8,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||lr),this._currentKeyframe.set(n,lr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);let s=i&&i.params||{},o=b8(e,this._globalTimelineStyles);for(let[a,c]of o){let l=fu(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??lr),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{let i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===dp?e.add(d):u===lr&&n.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...n.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return IC(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},cC=class extends Wp{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=r+n,a=n/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",Ik(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),m=n+f*r;h.set("offset",Ik(m/o)),s.push(h)}r=o,n=0,i="",e=s}return IC(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}};function Ik(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function b8(t,e){let n=new Map,r;return t.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)n.set(s,lr)}else for(let[s,o]of i)n.set(s,o)}),n}function Tk(t,e,n,r,i,s,o,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var YT={},Kp=class{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return S8(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||YT,f=a&&a.params||YT,m=this.buildStyles(r,f,d),g=c&&c.params||YT,y=this.buildStyles(i,g,d),v=new Set,N=new Map,M=new Map,$=i==="void",Ne={params:Uk(g,h),delay:this.ast.options?.delay},Y=u?[]:Vk(e,n,this.ast.animation,s,o,m,y,Ne,l,d),me=0;return Y.forEach(be=>{me=Math.max(be.duration+be.delay,me)}),d.length?Tk(n,this._triggerName,r,i,$,m,y,[],[],N,M,me,d):(Y.forEach(be=>{let St=be.element,Ut=Jt(N,St,new Set);be.preStyleProps.forEach(Di=>Ut.add(Di));let CC=Jt(M,St,new Set);be.postStyleProps.forEach(Di=>CC.add(Di)),St!==n&&v.add(St)}),Tk(n,this._triggerName,r,i,$,m,y,Y,[...v.values()],N,M,me))}};function S8(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}function Uk(t,e){let n=I({},e);return Object.entries(t).forEach(([r,i])=>{i!=null&&(n[r]=i)}),n}var lC=class{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){let r=new Map,i=Uk(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=fu(o,i,n));let c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),r.set(a,o)})}),r}};function A8(t,e,n){return new uC(t,e,n)}var uC=class{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new lC(i.style,s,r))}),Ck(this.states,"true","1"),Ck(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new Kp(e,i,this.states))}),this.fallbackTransition=R8(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}};function R8(t,e,n){let r=[(o,a)=>!0],i={type:Q.Sequence,steps:[],options:null},s={type:Q.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Kp(t,s,e)}function Ck(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var N8=new pu,dC=class{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let r=[],i=[],s=Lk(this._driver,n,r,i);if(r.length)throw q5(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,r){let i=e.element,s=Nk(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=Vk(this._driver,n,s,Ok,eC,new Map,new Map,r,N8,i),o.forEach(u=>{let d=Jt(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(z5()),o=[]),i.length)throw G5(i);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,lr))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=Ci(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw W5(e);return n}listen(e,n,r,i){let s=yC(n,"","","");return gC(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},Dk="ng-animate-queued",M8=".ng-animate-queued",JT="ng-animate-disabled",P8=".ng-animate-disabled",x8="ng-star-inserted",O8=".ng-star-inserted",k8=[],jk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},F8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pn="__ng_removed",mu=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=V8(i),r){let s=e,{value:o}=s,a=MC(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let r=this.options.params;Object.keys(n).forEach(i=>{r[i]==null&&(r[i]=n[i])})}}},hu="void",ZT=new mu(hu),hC=class{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,hn(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw K5(r,n);if(r==null||r.length==0)throw Q5(n);if(!U8(r))throw Y5(r,n);let s=Jt(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);let a=Jt(this._engine.statesByElement,e,new Map);return a.has(n)||(hn(e,Lp),hn(e,Lp+"-"+n),a.set(n,ZT)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw J5(e);return n}trigger(e,n,r,i=!0){let s=this._getTrigger(n),o=new gu(this.id,n,e),a=this._engine.statesByElement.get(e);a||(hn(e,Lp),hn(e,Lp+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new mu(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=ZT),!(l.value===hu)&&c.value===l.value){if(!$8(c.params,l.params)){let g=[],y=s.matchStyles(c.value,c.params,g),v=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{zs(e,y),ur(e,v)})}return}let h=Jt(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),m=!1;if(!f){if(!i)return;f=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:m}),m||(hn(e,Dk),o.onStart(()=>{$a(e,Dk)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let y=this._engine.playersByElement.get(e);if(y){let v=y.indexOf(o);v>=0&&y.splice(v,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let r=this._engine.driver.query(e,$p,!0);r.forEach(i=>{if(i[Pn])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,hu,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&Ci(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){let i=new Set;n.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||ZT,u=new mu(hu),d=new gu(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{let s=e[Pn];(!s||s===jk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){hn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=yC(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,gC(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},fC=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r,i){this.bodyNode=e,this.driver=n,this._normalizer=r,this.scheduler=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){let r=new hC(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}}return n}trigger(e,n,r,i){if(jp(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!jp(n))return;let s=n[Pn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),hn(e,JT)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),$a(e,JT))}removeNode(e,n,r){if(jp(n)){this.scheduler?.notify();let i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[Pn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return jp(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,$p,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,tC,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ci(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[Pn];if(n&&n.setForRemoval){if(e[Pn]=jk,n.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(JT)&&this.markElementAsDisabled(e,!1),this.driver.query(e,P8,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];hn(i,x8)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],n.length?Ci(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw Z5(e)}_flushAnimations(e,n){let r=new pu,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(A=>{u.add(A);let k=this.driver.query(A,M8,!0);for(let U=0;U<k.length;U++)u.add(k[U])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Ak(h,this.collectedEnterElements),m=new Map,g=0;f.forEach((A,k)=>{let U=Ok+g++;m.set(k,U),A.forEach(pe=>hn(pe,U))});let y=[],v=new Set,N=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){let k=this.collectedLeaveElements[A],U=k[Pn];U&&U.setForRemoval&&(y.push(k),v.add(k),U.hasAnimation?this.driver.query(k,O8,!0).forEach(pe=>v.add(pe)):N.add(k))}let M=new Map,$=Ak(h,Array.from(v));$.forEach((A,k)=>{let U=eC+g++;M.set(k,U),A.forEach(pe=>hn(pe,U))}),e.push(()=>{f.forEach((A,k)=>{let U=m.get(k);A.forEach(pe=>$a(pe,U))}),$.forEach((A,k)=>{let U=M.get(k);A.forEach(pe=>$a(pe,U))}),y.forEach(A=>{this.processLeaveNode(A)})});let Ne=[],Y=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(n).forEach(U=>{let pe=U.player,tt=U.element;if(Ne.push(pe),this.collectedEnterElements.length){let yt=tt[Pn];if(yt&&yt.setForMove){if(yt.previousTriggersValues&&yt.previousTriggersValues.has(U.triggerName)){let bi=yt.previousTriggersValues.get(U.triggerName),Zt=this.statesByElement.get(U.element);if(Zt&&Zt.has(U.triggerName)){let yu=Zt.get(U.triggerName);yu.value=bi,Zt.set(U.triggerName,yu)}}pe.destroy();return}}let xn=!d||!this.driver.containsElement(d,tt),jt=M.get(tt),Br=m.get(tt),Pe=this._buildInstruction(U,r,Br,jt,xn);if(Pe.errors&&Pe.errors.length){Y.push(Pe);return}if(xn){pe.onStart(()=>zs(tt,Pe.fromStyles)),pe.onDestroy(()=>ur(tt,Pe.toStyles)),i.push(pe);return}if(U.isFallbackTransition){pe.onStart(()=>zs(tt,Pe.fromStyles)),pe.onDestroy(()=>ur(tt,Pe.toStyles)),i.push(pe);return}let SC=[];Pe.timelines.forEach(yt=>{yt.stretchStartingKeyframe=!0,this.disabledNodes.has(yt.element)||SC.push(yt)}),Pe.timelines=SC,r.append(tt,Pe.timelines);let Wk={instruction:Pe,player:pe,element:tt};o.push(Wk),Pe.queriedElements.forEach(yt=>Jt(a,yt,[]).push(pe)),Pe.preStyleProps.forEach((yt,bi)=>{if(yt.size){let Zt=c.get(bi);Zt||c.set(bi,Zt=new Set),yt.forEach((yu,em)=>Zt.add(em))}}),Pe.postStyleProps.forEach((yt,bi)=>{let Zt=l.get(bi);Zt||l.set(bi,Zt=new Set),yt.forEach((yu,em)=>Zt.add(em))})});if(Y.length){let A=[];Y.forEach(k=>{A.push(X5(k.triggerName,k.errors))}),Ne.forEach(k=>k.destroy()),this.reportError(A)}let me=new Map,be=new Map;o.forEach(A=>{let k=A.element;r.has(k)&&(be.set(k,k),this._beforeAnimationBuild(A.player.namespaceId,A.instruction,me))}),i.forEach(A=>{let k=A.element;this._getPreviousPlayers(k,!1,A.namespaceId,A.triggerName,null).forEach(pe=>{Jt(me,k,[]).push(pe),pe.destroy()})});let St=y.filter(A=>Rk(A,c,l)),Ut=new Map;Sk(Ut,this.driver,N,l,lr).forEach(A=>{Rk(A,c,l)&&St.push(A)});let Di=new Map;f.forEach((A,k)=>{Sk(Di,this.driver,new Set(A),c,dp)}),St.forEach(A=>{let k=Ut.get(A),U=Di.get(A);Ut.set(A,new Map([...k?.entries()??[],...U?.entries()??[]]))});let Xp=[],DC=[],bC={};o.forEach(A=>{let{element:k,player:U,instruction:pe}=A;if(r.has(k)){if(u.has(k)){U.onDestroy(()=>ur(k,pe.toStyles)),U.disabled=!0,U.overrideTotalTime(pe.totalTime),i.push(U);return}let tt=bC;if(be.size>1){let jt=k,Br=[];for(;jt=jt.parentNode;){let Pe=be.get(jt);if(Pe){tt=Pe;break}Br.push(jt)}Br.forEach(Pe=>be.set(Pe,tt))}let xn=this._buildAnimation(U.namespaceId,pe,me,s,Di,Ut);if(U.setRealPlayer(xn),tt===bC)Xp.push(U);else{let jt=this.playersByElement.get(tt);jt&&jt.length&&(U.parentPlayer=Ci(jt)),i.push(U)}}else zs(k,pe.fromStyles),U.onDestroy(()=>ur(k,pe.toStyles)),DC.push(U),u.has(k)&&i.push(U)}),DC.forEach(A=>{let k=s.get(A.element);if(k&&k.length){let U=Ci(k);A.setRealPlayer(U)}}),i.forEach(A=>{A.parentPlayer?A.syncPlayerEvents(A.parentPlayer):A.destroy()});for(let A=0;A<y.length;A++){let k=y[A],U=k[Pn];if($a(k,eC),U&&U.hasAnimation)continue;let pe=[];if(a.size){let xn=a.get(k);xn&&xn.length&&pe.push(...xn);let jt=this.driver.query(k,tC,!0);for(let Br=0;Br<jt.length;Br++){let Pe=a.get(jt[Br]);Pe&&Pe.length&&pe.push(...Pe)}}let tt=pe.filter(xn=>!xn.destroyed);tt.length?j8(this,k,tt):this.processLeaveNode(k)}return y.length=0,Xp.forEach(A=>{this.players.push(A),A.onDone(()=>{A.destroy();let k=this.players.indexOf(A);this.players.splice(k,1)}),A.play()}),Xp}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==hu;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){let i=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:i;for(let c of n.timelines){let l=c.element,u=l!==s,d=Jt(r,l,[]);this._getPreviousPlayers(l,u,o,a,n.toState).forEach(f=>{let m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),d.push(f)})}zs(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(m=>{let g=m.element;u.add(g);let y=g[Pn];if(y&&y.removedBeforeQueried)return new Ei(m.duration,m.delay);let v=g!==c,N=B8((r.get(g)||k8).map(me=>me.getRealPlayer())).filter(me=>{let be=me;return be.element?be.element===g:!1}),M=s.get(g),$=o.get(g),Ne=Nk(this._normalizer,m.keyframes,M,$),Y=this._buildPlayer(m,Ne,N);if(m.subTimeline&&i&&d.add(g),v){let me=new gu(e,a,g);me.setRealPlayer(Y),l.push(me)}return Y});l.forEach(m=>{Jt(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>L8(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>hn(m,vk));let f=Ci(h);return f.onDestroy(()=>{u.forEach(m=>$a(m,vk)),ur(c,n.toStyles)}),d.forEach(m=>{Jt(i,m,[]).push(f)}),f}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new Ei(e.duration,e.delay)}},gu=class{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new Ei,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>gC(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Jt(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function L8(t,e,n){let r=t.get(e);if(r){if(r.length){let i=r.indexOf(n);r.splice(i,1)}r.length==0&&t.delete(e)}return r}function V8(t){return t??null}function jp(t){return t&&t.nodeType===1}function U8(t){return t=="start"||t=="done"}function bk(t,e){let n=t.style.display;return t.style.display=e??"none",n}function Sk(t,e,n,r,i){let s=[];n.forEach(c=>s.push(bk(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,i);u.set(d,h),(!h||h.length==0)&&(l[Pn]=F8,o.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>bk(c,s[a++])),o}function Ak(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&n.get(c).push(a)}),n}function hn(t,e){t.classList?.add(e)}function $a(t,e){t.classList?.remove(e)}function j8(t,e,n){Ci(n).onDone(()=>t.processLeaveNode(e))}function B8(t){let e=[];return Bk(t,e),e}function Bk(t,e){for(let n=0;n<t.length;n++){let r=t[n];r instanceof $l?Bk(r.players,e):e.push(r)}}function $8(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function Rk(t,e,n){let r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}var qa=class{constructor(e,n,r,i){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,o)=>{},this._transitionEngine=new fC(e.body,n,r,i),this._timelineEngine=new dC(e.body,n,r),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(e,n,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=Lk(this._driver,s,c,l);if(c.length)throw $5(i,c);l.length&&void 0,a=A8(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if(r.charAt(0)=="@"){let[s,o]=yk(r),a=i;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if(r.charAt(0)=="@"){let[o,a]=yk(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function H8(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=XT(e[0]),e.length>1&&(r=XT(e[e.length-1]))):e instanceof Map&&(n=XT(e)),n||r?new pC(t,n,r):null}var Ha=class Ha{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=Ha.initialStylesByElement.get(e);i||Ha.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&ur(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ur(this._element,this._initialStyles),this._endStyles&&(ur(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ha.initialStylesByElement.delete(this._element),this._startStyles&&(zs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zs(this._element,this._endStyles),this._endStyles=null),ur(this._element,this._initialStyles),this._state=3)}};Ha.initialStylesByElement=new WeakMap;var pC=Ha;function XT(t){let e=null;return t.forEach((n,r)=>{q8(r)&&(e=e||new Map,e.set(r,n))}),e}function q8(t){return t==="display"||t==="position"}var Qp=class{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:EC(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Yp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return Mk(e,n)}getParentElement(e){return _C(e)}query(e,n,r){return Pk(e,n,r)}computeStyle(e,n,r){return EC(e,n)}animate(e,n,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof Qp);u8(r,i)&&u.forEach(f=>{f.currentSnapshot.forEach((m,g)=>l.set(g,m))});let d=a8(n).map(f=>new Map(f));d=d8(e,d,l);let h=H8(e,d);return new Qp(e,d,c,h)}};var Bp="@",$k="@.disabled",Jp=class{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){n.charAt(0)==Bp&&n==$k?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},mC=class extends Jp{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){n.charAt(0)==Bp?n.charAt(1)=="."&&n==$k?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if(n.charAt(0)==Bp){let i=z8(e),s=n.slice(1),o="";return s.charAt(0)!=Bp&&([s,o]=G8(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,n,r)}};function z8(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function G8(t){let e=t.indexOf("."),n=t.substring(0,e),r=t.slice(e+1);return[n,r]}var Zp=class{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,n){let r="",i=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let d=()=>l.delete(i);u=new Jp(r,i,this.engine,d),l.set(i,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return n.data.animation.forEach(a),new mC(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var K8=(()=>{let e=class e extends qa{constructor(r,i,s){super(r,i,s,b(nc,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(x(rt),x(Gs),x(Ws))},e.\u0275prov=P({token:e,factory:e.\u0275fac});let t=e;return t})();function Q8(){return new qp}function Y8(t,e,n){return new Zp(t,e,n)}var Hk=[{provide:Ws,useFactory:Q8},{provide:qa,useClass:K8},{provide:Ui,useFactory:Y8,deps:[Jd,qa,ae]}],J8=[{provide:Gs,useFactory:()=>new Yp},{provide:Qg,useValue:"BrowserAnimations"},...Hk],Doe=[{provide:Gs,useClass:vC},{provide:Qg,useValue:"NoopAnimations"},...Hk];function qk(){return Bd("NgEagerAnimations"),[...J8]}var zk={providers:[tA(Tx),Co(NA(()=>MA(mk))),Co(bR(()=>AR())),Co(BP(()=>qP())),Co(fk(()=>pk())),qk(),YP({preventDuplicates:!0,timeOut:3e3,positionClass:"toast-top-center"})]};var Gk=(()=>{let e=class e{constructor(){this.title="saladejuegos"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-root"]],standalone:!0,features:[qe],decls:1,vars:0,template:function(i,s){i&1&&ve(0,"router-outlet")},dependencies:[m_]});let t=e;return t})();vS(Gk,zk).catch(t=>console.error(t));
